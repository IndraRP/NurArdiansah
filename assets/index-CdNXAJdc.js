var NT=Object.defineProperty;var EA=i=>{throw TypeError(i)};var IT=(i,t,e)=>t in i?NT(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var O=(i,t,e)=>IT(i,typeof t!="symbol"?t+"":t,e),Xy=(i,t,e)=>t.has(i)||EA("Cannot "+e);var a=(i,t,e)=>(Xy(i,t,"read from private field"),e?e.call(i):t.get(i)),A=(i,t,e)=>t.has(i)?EA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),m=(i,t,e,n)=>(Xy(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e),S=(i,t,e)=>(Xy(i,t,"access private method"),e);var xe=(i,t,e,n)=>({set _(s){m(i,t,s,e)},get _(){return a(i,t,n)}});function FT(i,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const r=Object.getOwnPropertyDescriptor(n,s);r&&Object.defineProperty(i,s,r.get?r:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function RS(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var MS={exports:{}},yy={},DS={exports:{}},yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp=Symbol.for("react.element"),OT=Symbol.for("react.portal"),BT=Symbol.for("react.fragment"),jT=Symbol.for("react.strict_mode"),zT=Symbol.for("react.profiler"),UT=Symbol.for("react.provider"),HT=Symbol.for("react.context"),$T=Symbol.for("react.forward_ref"),VT=Symbol.for("react.suspense"),GT=Symbol.for("react.memo"),WT=Symbol.for("react.lazy"),_A=Symbol.iterator;function XT(i){return i===null||typeof i!="object"?null:(i=_A&&i[_A]||i["@@iterator"],typeof i=="function"?i:null)}var NS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IS=Object.assign,FS={};function xh(i,t,e){this.props=i,this.context=t,this.refs=FS,this.updater=e||NS}xh.prototype.isReactComponent={};xh.prototype.setState=function(i,t){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,t,"setState")};xh.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function OS(){}OS.prototype=xh.prototype;function Jw(i,t,e){this.props=i,this.context=t,this.refs=FS,this.updater=e||NS}var Zw=Jw.prototype=new OS;Zw.constructor=Jw;IS(Zw,xh.prototype);Zw.isPureReactComponent=!0;var CA=Array.isArray,BS=Object.prototype.hasOwnProperty,t1={current:null},jS={key:!0,ref:!0,__self:!0,__source:!0};function zS(i,t,e){var n,s={},r=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)BS.call(t,n)&&!jS.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=e;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(i&&i.defaultProps)for(n in l=i.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Dp,type:i,key:r,ref:o,props:s,_owner:t1.current}}function YT(i,t){return{$$typeof:Dp,type:i.type,key:t,ref:i.ref,props:i.props,_owner:i._owner}}function e1(i){return typeof i=="object"&&i!==null&&i.$$typeof===Dp}function qT(i){var t={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(e){return t[e]})}var TA=/\/+/g;function Yy(i,t){return typeof i=="object"&&i!==null&&i.key!=null?qT(""+i.key):t.toString(36)}function Eg(i,t,e,n,s){var r=typeof i;(r==="undefined"||r==="boolean")&&(i=null);var o=!1;if(i===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(i.$$typeof){case Dp:case OT:o=!0}}if(o)return o=i,s=s(o),i=n===""?"."+Yy(o,0):n,CA(s)?(e="",i!=null&&(e=i.replace(TA,"$&/")+"/"),Eg(s,t,e,"",function(u){return u})):s!=null&&(e1(s)&&(s=YT(s,e+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(TA,"$&/")+"/")+i)),t.push(s)),1;if(o=0,n=n===""?".":n+":",CA(i))for(var l=0;l<i.length;l++){r=i[l];var c=n+Yy(r,l);o+=Eg(r,t,e,c,s)}else if(c=XT(i),typeof c=="function")for(i=c.call(i),l=0;!(r=i.next()).done;)r=r.value,c=n+Yy(r,l++),o+=Eg(r,t,e,c,s);else if(r==="object")throw t=String(i),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Qp(i,t,e){if(i==null)return i;var n=[],s=0;return Eg(i,n,"","",function(r){return t.call(e,r,s++)}),n}function KT(i){if(i._status===-1){var t=i._result;t=t(),t.then(function(e){(i._status===0||i._status===-1)&&(i._status=1,i._result=e)},function(e){(i._status===0||i._status===-1)&&(i._status=2,i._result=e)}),i._status===-1&&(i._status=0,i._result=t)}if(i._status===1)return i._result.default;throw i._result}var xn={current:null},_g={transition:null},QT={ReactCurrentDispatcher:xn,ReactCurrentBatchConfig:_g,ReactCurrentOwner:t1};function US(){throw Error("act(...) is not supported in production builds of React.")}yt.Children={map:Qp,forEach:function(i,t,e){Qp(i,function(){t.apply(this,arguments)},e)},count:function(i){var t=0;return Qp(i,function(){t++}),t},toArray:function(i){return Qp(i,function(t){return t})||[]},only:function(i){if(!e1(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};yt.Component=xh;yt.Fragment=BT;yt.Profiler=zT;yt.PureComponent=Jw;yt.StrictMode=jT;yt.Suspense=VT;yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QT;yt.act=US;yt.cloneElement=function(i,t,e){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var n=IS({},i.props),s=i.key,r=i.ref,o=i._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=t1.current),t.key!==void 0&&(s=""+t.key),i.type&&i.type.defaultProps)var l=i.type.defaultProps;for(c in t)BS.call(t,c)&&!jS.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=e;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Dp,type:i.type,key:s,ref:r,props:n,_owner:o}};yt.createContext=function(i){return i={$$typeof:HT,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:UT,_context:i},i.Consumer=i};yt.createElement=zS;yt.createFactory=function(i){var t=zS.bind(null,i);return t.type=i,t};yt.createRef=function(){return{current:null}};yt.forwardRef=function(i){return{$$typeof:$T,render:i}};yt.isValidElement=e1;yt.lazy=function(i){return{$$typeof:WT,_payload:{_status:-1,_result:i},_init:KT}};yt.memo=function(i,t){return{$$typeof:GT,type:i,compare:t===void 0?null:t}};yt.startTransition=function(i){var t=_g.transition;_g.transition={};try{i()}finally{_g.transition=t}};yt.unstable_act=US;yt.useCallback=function(i,t){return xn.current.useCallback(i,t)};yt.useContext=function(i){return xn.current.useContext(i)};yt.useDebugValue=function(){};yt.useDeferredValue=function(i){return xn.current.useDeferredValue(i)};yt.useEffect=function(i,t){return xn.current.useEffect(i,t)};yt.useId=function(){return xn.current.useId()};yt.useImperativeHandle=function(i,t,e){return xn.current.useImperativeHandle(i,t,e)};yt.useInsertionEffect=function(i,t){return xn.current.useInsertionEffect(i,t)};yt.useLayoutEffect=function(i,t){return xn.current.useLayoutEffect(i,t)};yt.useMemo=function(i,t){return xn.current.useMemo(i,t)};yt.useReducer=function(i,t,e){return xn.current.useReducer(i,t,e)};yt.useRef=function(i){return xn.current.useRef(i)};yt.useState=function(i){return xn.current.useState(i)};yt.useSyncExternalStore=function(i,t,e){return xn.current.useSyncExternalStore(i,t,e)};yt.useTransition=function(){return xn.current.useTransition()};yt.version="18.3.1";DS.exports=yt;var F=DS.exports;const k0=RS(F),JT=FT({__proto__:null,default:k0},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZT=F,tk=Symbol.for("react.element"),ek=Symbol.for("react.fragment"),nk=Object.prototype.hasOwnProperty,ik=ZT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sk={key:!0,ref:!0,__self:!0,__source:!0};function HS(i,t,e){var n,s={},r=null,o=null;e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)nk.call(t,n)&&!sk.hasOwnProperty(n)&&(s[n]=t[n]);if(i&&i.defaultProps)for(n in t=i.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:tk,type:i,key:r,ref:o,props:s,_owner:ik.current}}yy.Fragment=ek;yy.jsx=HS;yy.jsxs=HS;MS.exports=yy;var R=MS.exports,$S={exports:{}},fi={},VS={exports:{}},GS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function t(D,H){var B=D.length;D.push(H);t:for(;0<B;){var Z=B-1>>>1,G=D[Z];if(0<s(G,H))D[Z]=H,D[B]=G,B=Z;else break t}}function e(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var H=D[0],B=D.pop();if(B!==H){D[0]=B;t:for(var Z=0,G=D.length,tt=G>>>1;Z<tt;){var ct=2*(Z+1)-1,Pt=D[ct],_t=ct+1,rt=D[_t];if(0>s(Pt,B))_t<G&&0>s(rt,Pt)?(D[Z]=rt,D[_t]=B,Z=_t):(D[Z]=Pt,D[ct]=B,Z=ct);else if(_t<G&&0>s(rt,B))D[Z]=rt,D[_t]=B,Z=_t;else break t}}return H}function s(D,H){var B=D.sortIndex-H.sortIndex;return B!==0?B:D.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,y=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var H=e(u);H!==null;){if(H.callback===null)n(u);else if(H.startTime<=D)n(u),H.sortIndex=H.expirationTime,t(c,H);else break;H=e(u)}}function E(D){if(w=!1,b(D),!y)if(e(c)!==null)y=!0,j(_);else{var H=e(u);H!==null&&U(E,H.startTime-D)}}function _(D,H){y=!1,w&&(w=!1,g(k),k=-1),p=!0;var B=f;try{for(b(H),d=e(c);d!==null&&(!(d.expirationTime>H)||D&&!M());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,f=d.priorityLevel;var G=Z(d.expirationTime<=H);H=i.unstable_now(),typeof G=="function"?d.callback=G:d===e(c)&&n(c),b(H)}else n(c);d=e(c)}if(d!==null)var tt=!0;else{var ct=e(u);ct!==null&&U(E,ct.startTime-H),tt=!1}return tt}finally{d=null,f=B,p=!1}}var C=!1,T=null,k=-1,P=5,L=-1;function M(){return!(i.unstable_now()-L<P)}function I(){if(T!==null){var D=i.unstable_now();L=D;var H=!0;try{H=T(!0,D)}finally{H?$():(C=!1,T=null)}}else C=!1}var $;if(typeof v=="function")$=function(){v(I)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,W=N.port2;N.port1.onmessage=I,$=function(){W.postMessage(null)}}else $=function(){x(I,0)};function j(D){T=D,C||(C=!0,$())}function U(D,H){k=x(function(){D(i.unstable_now())},H)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(D){D.callback=null},i.unstable_continueExecution=function(){y||p||(y=!0,j(_))},i.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<D?Math.floor(1e3/D):5},i.unstable_getCurrentPriorityLevel=function(){return f},i.unstable_getFirstCallbackNode=function(){return e(c)},i.unstable_next=function(D){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var B=f;f=H;try{return D()}finally{f=B}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(D,H){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var B=f;f=D;try{return H()}finally{f=B}},i.unstable_scheduleCallback=function(D,H,B){var Z=i.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?Z+B:Z):B=Z,D){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=B+G,D={id:h++,callback:H,priorityLevel:D,startTime:B,expirationTime:G,sortIndex:-1},B>Z?(D.sortIndex=B,t(u,D),e(c)===null&&D===e(u)&&(w?(g(k),k=-1):w=!0,U(E,B-Z))):(D.sortIndex=G,t(c,D),y||p||(y=!0,j(_))),D},i.unstable_shouldYield=M,i.unstable_wrapCallback=function(D){var H=f;return function(){var B=f;f=H;try{return D.apply(this,arguments)}finally{f=B}}}})(GS);VS.exports=GS;var rk=VS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ok=F,hi=rk;function z(i){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+i,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+i+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var WS=new Set,Ed={};function ec(i,t){fh(i,t),fh(i+"Capture",t)}function fh(i,t){for(Ed[i]=t,i=0;i<t.length;i++)WS.add(t[i])}var Ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P0=Object.prototype.hasOwnProperty,ak=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kA={},PA={};function lk(i){return P0.call(PA,i)?!0:P0.call(kA,i)?!1:ak.test(i)?PA[i]=!0:(kA[i]=!0,!1)}function ck(i,t,e,n){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:e!==null?!e.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function uk(i,t,e,n){if(t===null||typeof t>"u"||ck(i,t,e,n))return!0;if(n)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function En(i,t,e,n,s,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=e,this.propertyName=i,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Qe[i]=new En(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var t=i[0];Qe[t]=new En(t,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Qe[i]=new En(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Qe[i]=new En(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Qe[i]=new En(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Qe[i]=new En(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Qe[i]=new En(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Qe[i]=new En(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Qe[i]=new En(i,5,!1,i.toLowerCase(),null,!1,!1)});var n1=/[\-:]([a-z])/g;function i1(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var t=i.replace(n1,i1);Qe[t]=new En(t,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var t=i.replace(n1,i1);Qe[t]=new En(t,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var t=i.replace(n1,i1);Qe[t]=new En(t,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Qe[i]=new En(i,1,!1,i.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new En("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Qe[i]=new En(i,1,!1,i.toLowerCase(),null,!0,!0)});function s1(i,t,e,n){var s=Qe.hasOwnProperty(t)?Qe[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(uk(t,e,s,n)&&(e=null),n||s===null?lk(t)&&(e===null?i.removeAttribute(t):i.setAttribute(t,""+e)):s.mustUseProperty?i[s.propertyName]=e===null?s.type===3?!1:"":e:(t=s.attributeName,n=s.attributeNamespace,e===null?i.removeAttribute(t):(s=s.type,e=s===3||s===4&&e===!0?"":""+e,n?i.setAttributeNS(n,t,e):i.setAttribute(t,e))))}var qr=ok.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jp=Symbol.for("react.element"),gc=Symbol.for("react.portal"),mc=Symbol.for("react.fragment"),r1=Symbol.for("react.strict_mode"),L0=Symbol.for("react.profiler"),XS=Symbol.for("react.provider"),YS=Symbol.for("react.context"),o1=Symbol.for("react.forward_ref"),R0=Symbol.for("react.suspense"),M0=Symbol.for("react.suspense_list"),a1=Symbol.for("react.memo"),Zr=Symbol.for("react.lazy"),qS=Symbol.for("react.offscreen"),LA=Symbol.iterator;function Ph(i){return i===null||typeof i!="object"?null:(i=LA&&i[LA]||i["@@iterator"],typeof i=="function"?i:null)}var ae=Object.assign,qy;function Uh(i){if(qy===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);qy=t&&t[1]||""}return`
`+qy+i}var Ky=!1;function Qy(i,t){if(!i||Ky)return"";Ky=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(i,[],t)}else{try{t.call()}catch(u){n=u}i.call(t.prototype)}else{try{throw Error()}catch(u){n=u}i()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),r=n.stack.split(`
`),o=s.length-1,l=r.length-1;1<=o&&0<=l&&s[o]!==r[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==r[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==r[l]){var c=`
`+s[o].replace(" at new "," at ");return i.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",i.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ky=!1,Error.prepareStackTrace=e}return(i=i?i.displayName||i.name:"")?Uh(i):""}function hk(i){switch(i.tag){case 5:return Uh(i.type);case 16:return Uh("Lazy");case 13:return Uh("Suspense");case 19:return Uh("SuspenseList");case 0:case 2:case 15:return i=Qy(i.type,!1),i;case 11:return i=Qy(i.type.render,!1),i;case 1:return i=Qy(i.type,!0),i;default:return""}}function D0(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case mc:return"Fragment";case gc:return"Portal";case L0:return"Profiler";case r1:return"StrictMode";case R0:return"Suspense";case M0:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case YS:return(i.displayName||"Context")+".Consumer";case XS:return(i._context.displayName||"Context")+".Provider";case o1:var t=i.render;return i=i.displayName,i||(i=t.displayName||t.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case a1:return t=i.displayName||null,t!==null?t:D0(i.type)||"Memo";case Zr:t=i._payload,i=i._init;try{return D0(i(t))}catch{}}return null}function dk(i){var t=i.type;switch(i.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=t.render,i=i.displayName||i.name||"",t.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D0(t);case 8:return t===r1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ca(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function KS(i){var t=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fk(i){var t=KS(i)?"checked":"value",e=Object.getOwnPropertyDescriptor(i.constructor.prototype,t),n=""+i[t];if(!i.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var s=e.get,r=e.set;return Object.defineProperty(i,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,r.call(this,o)}}),Object.defineProperty(i,t,{enumerable:e.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){i._valueTracker=null,delete i[t]}}}}function Zp(i){i._valueTracker||(i._valueTracker=fk(i))}function QS(i){if(!i)return!1;var t=i._valueTracker;if(!t)return!0;var e=t.getValue(),n="";return i&&(n=KS(i)?i.checked?"true":"false":i.value),i=n,i!==e?(t.setValue(i),!0):!1}function pm(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function N0(i,t){var e=t.checked;return ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??i._wrapperState.initialChecked})}function RA(i,t){var e=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;e=ca(t.value!=null?t.value:e),i._wrapperState={initialChecked:n,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function JS(i,t){t=t.checked,t!=null&&s1(i,"checked",t,!1)}function I0(i,t){JS(i,t);var e=ca(t.value),n=t.type;if(e!=null)n==="number"?(e===0&&i.value===""||i.value!=e)&&(i.value=""+e):i.value!==""+e&&(i.value=""+e);else if(n==="submit"||n==="reset"){i.removeAttribute("value");return}t.hasOwnProperty("value")?F0(i,t.type,e):t.hasOwnProperty("defaultValue")&&F0(i,t.type,ca(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(i.defaultChecked=!!t.defaultChecked)}function MA(i,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+i._wrapperState.initialValue,e||t===i.value||(i.value=t),i.defaultValue=t}e=i.name,e!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,e!==""&&(i.name=e)}function F0(i,t,e){(t!=="number"||pm(i.ownerDocument)!==i)&&(e==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+e&&(i.defaultValue=""+e))}var Hh=Array.isArray;function Mc(i,t,e,n){if(i=i.options,t){t={};for(var s=0;s<e.length;s++)t["$"+e[s]]=!0;for(e=0;e<i.length;e++)s=t.hasOwnProperty("$"+i[e].value),i[e].selected!==s&&(i[e].selected=s),s&&n&&(i[e].defaultSelected=!0)}else{for(e=""+ca(e),t=null,s=0;s<i.length;s++){if(i[s].value===e){i[s].selected=!0,n&&(i[s].defaultSelected=!0);return}t!==null||i[s].disabled||(t=i[s])}t!==null&&(t.selected=!0)}}function O0(i,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return ae({},t,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function DA(i,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(z(92));if(Hh(e)){if(1<e.length)throw Error(z(93));e=e[0]}t=e}t==null&&(t=""),e=t}i._wrapperState={initialValue:ca(e)}}function ZS(i,t){var e=ca(t.value),n=ca(t.defaultValue);e!=null&&(e=""+e,e!==i.value&&(i.value=e),t.defaultValue==null&&i.defaultValue!==e&&(i.defaultValue=e)),n!=null&&(i.defaultValue=""+n)}function NA(i){var t=i.textContent;t===i._wrapperState.initialValue&&t!==""&&t!==null&&(i.value=t)}function tx(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function B0(i,t){return i==null||i==="http://www.w3.org/1999/xhtml"?tx(t):i==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var tg,ex=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,n,s){MSApp.execUnsafeLocalFunction(function(){return i(t,e,n,s)})}:i}(function(i,t){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=t;else{for(tg=tg||document.createElement("div"),tg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=tg.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;t.firstChild;)i.appendChild(t.firstChild)}});function _d(i,t){if(t){var e=i.firstChild;if(e&&e===i.lastChild&&e.nodeType===3){e.nodeValue=t;return}}i.textContent=t}var fd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pk=["Webkit","ms","Moz","O"];Object.keys(fd).forEach(function(i){pk.forEach(function(t){t=t+i.charAt(0).toUpperCase()+i.substring(1),fd[t]=fd[i]})});function nx(i,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||fd.hasOwnProperty(i)&&fd[i]?(""+t).trim():t+"px"}function ix(i,t){i=i.style;for(var e in t)if(t.hasOwnProperty(e)){var n=e.indexOf("--")===0,s=nx(e,t[e],n);e==="float"&&(e="cssFloat"),n?i.setProperty(e,s):i[e]=s}}var gk=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function j0(i,t){if(t){if(gk[i]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,i));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function z0(i,t){if(i.indexOf("-")===-1)return typeof t.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var U0=null;function l1(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var H0=null,Dc=null,Nc=null;function IA(i){if(i=Fp(i)){if(typeof H0!="function")throw Error(z(280));var t=i.stateNode;t&&(t=Sy(t),H0(i.stateNode,i.type,t))}}function sx(i){Dc?Nc?Nc.push(i):Nc=[i]:Dc=i}function rx(){if(Dc){var i=Dc,t=Nc;if(Nc=Dc=null,IA(i),t)for(i=0;i<t.length;i++)IA(t[i])}}function ox(i,t){return i(t)}function ax(){}var Jy=!1;function lx(i,t,e){if(Jy)return i(t,e);Jy=!0;try{return ox(i,t,e)}finally{Jy=!1,(Dc!==null||Nc!==null)&&(ax(),rx())}}function Cd(i,t){var e=i.stateNode;if(e===null)return null;var n=Sy(e);if(n===null)return null;e=n[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(i=i.type,n=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!n;break t;default:i=!1}if(i)return null;if(e&&typeof e!="function")throw Error(z(231,t,typeof e));return e}var $0=!1;if(Ur)try{var Lh={};Object.defineProperty(Lh,"passive",{get:function(){$0=!0}}),window.addEventListener("test",Lh,Lh),window.removeEventListener("test",Lh,Lh)}catch{$0=!1}function mk(i,t,e,n,s,r,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(e,u)}catch(h){this.onError(h)}}var pd=!1,gm=null,mm=!1,V0=null,yk={onError:function(i){pd=!0,gm=i}};function vk(i,t,e,n,s,r,o,l,c){pd=!1,gm=null,mk.apply(yk,arguments)}function wk(i,t,e,n,s,r,o,l,c){if(vk.apply(this,arguments),pd){if(pd){var u=gm;pd=!1,gm=null}else throw Error(z(198));mm||(mm=!0,V0=u)}}function nc(i){var t=i,e=i;if(i.alternate)for(;t.return;)t=t.return;else{i=t;do t=i,t.flags&4098&&(e=t.return),i=t.return;while(i)}return t.tag===3?e:null}function cx(i){if(i.tag===13){var t=i.memoizedState;if(t===null&&(i=i.alternate,i!==null&&(t=i.memoizedState)),t!==null)return t.dehydrated}return null}function FA(i){if(nc(i)!==i)throw Error(z(188))}function Ak(i){var t=i.alternate;if(!t){if(t=nc(i),t===null)throw Error(z(188));return t!==i?null:i}for(var e=i,n=t;;){var s=e.return;if(s===null)break;var r=s.alternate;if(r===null){if(n=s.return,n!==null){e=n;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===e)return FA(s),i;if(r===n)return FA(s),t;r=r.sibling}throw Error(z(188))}if(e.return!==n.return)e=s,n=r;else{for(var o=!1,l=s.child;l;){if(l===e){o=!0,e=s,n=r;break}if(l===n){o=!0,n=s,e=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===e){o=!0,e=r,n=s;break}if(l===n){o=!0,n=r,e=s;break}l=l.sibling}if(!o)throw Error(z(189))}}if(e.alternate!==n)throw Error(z(190))}if(e.tag!==3)throw Error(z(188));return e.stateNode.current===e?i:t}function ux(i){return i=Ak(i),i!==null?hx(i):null}function hx(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var t=hx(i);if(t!==null)return t;i=i.sibling}return null}var dx=hi.unstable_scheduleCallback,OA=hi.unstable_cancelCallback,bk=hi.unstable_shouldYield,Sk=hi.unstable_requestPaint,ye=hi.unstable_now,xk=hi.unstable_getCurrentPriorityLevel,c1=hi.unstable_ImmediatePriority,fx=hi.unstable_UserBlockingPriority,ym=hi.unstable_NormalPriority,Ek=hi.unstable_LowPriority,px=hi.unstable_IdlePriority,vy=null,Gs=null;function _k(i){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(vy,i,void 0,(i.current.flags&128)===128)}catch{}}var ss=Math.clz32?Math.clz32:kk,Ck=Math.log,Tk=Math.LN2;function kk(i){return i>>>=0,i===0?32:31-(Ck(i)/Tk|0)|0}var eg=64,ng=4194304;function $h(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function vm(i,t){var e=i.pendingLanes;if(e===0)return 0;var n=0,s=i.suspendedLanes,r=i.pingedLanes,o=e&268435455;if(o!==0){var l=o&~s;l!==0?n=$h(l):(r&=o,r!==0&&(n=$h(r)))}else o=e&~s,o!==0?n=$h(o):r!==0&&(n=$h(r));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,r=t&-t,s>=r||s===16&&(r&4194240)!==0))return t;if(n&4&&(n|=e&16),t=i.entangledLanes,t!==0)for(i=i.entanglements,t&=n;0<t;)e=31-ss(t),s=1<<e,n|=i[e],t&=~s;return n}function Pk(i,t){switch(i){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lk(i,t){for(var e=i.suspendedLanes,n=i.pingedLanes,s=i.expirationTimes,r=i.pendingLanes;0<r;){var o=31-ss(r),l=1<<o,c=s[o];c===-1?(!(l&e)||l&n)&&(s[o]=Pk(l,t)):c<=t&&(i.expiredLanes|=l),r&=~l}}function G0(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function gx(){var i=eg;return eg<<=1,!(eg&4194240)&&(eg=64),i}function Zy(i){for(var t=[],e=0;31>e;e++)t.push(i);return t}function Np(i,t,e){i.pendingLanes|=t,t!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,t=31-ss(t),i[t]=e}function Rk(i,t){var e=i.pendingLanes&~t;i.pendingLanes=t,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=t,i.mutableReadLanes&=t,i.entangledLanes&=t,t=i.entanglements;var n=i.eventTimes;for(i=i.expirationTimes;0<e;){var s=31-ss(e),r=1<<s;t[s]=0,n[s]=-1,i[s]=-1,e&=~r}}function u1(i,t){var e=i.entangledLanes|=t;for(i=i.entanglements;e;){var n=31-ss(e),s=1<<n;s&t|i[n]&t&&(i[n]|=t),e&=~s}}var kt=0;function mx(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var yx,h1,vx,wx,Ax,W0=!1,ig=[],ta=null,ea=null,na=null,Td=new Map,kd=new Map,eo=[],Mk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function BA(i,t){switch(i){case"focusin":case"focusout":ta=null;break;case"dragenter":case"dragleave":ea=null;break;case"mouseover":case"mouseout":na=null;break;case"pointerover":case"pointerout":Td.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kd.delete(t.pointerId)}}function Rh(i,t,e,n,s,r){return i===null||i.nativeEvent!==r?(i={blockedOn:t,domEventName:e,eventSystemFlags:n,nativeEvent:r,targetContainers:[s]},t!==null&&(t=Fp(t),t!==null&&h1(t)),i):(i.eventSystemFlags|=n,t=i.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),i)}function Dk(i,t,e,n,s){switch(t){case"focusin":return ta=Rh(ta,i,t,e,n,s),!0;case"dragenter":return ea=Rh(ea,i,t,e,n,s),!0;case"mouseover":return na=Rh(na,i,t,e,n,s),!0;case"pointerover":var r=s.pointerId;return Td.set(r,Rh(Td.get(r)||null,i,t,e,n,s)),!0;case"gotpointercapture":return r=s.pointerId,kd.set(r,Rh(kd.get(r)||null,i,t,e,n,s)),!0}return!1}function bx(i){var t=Pa(i.target);if(t!==null){var e=nc(t);if(e!==null){if(t=e.tag,t===13){if(t=cx(e),t!==null){i.blockedOn=t,Ax(i.priority,function(){vx(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){i.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Cg(i){if(i.blockedOn!==null)return!1;for(var t=i.targetContainers;0<t.length;){var e=X0(i.domEventName,i.eventSystemFlags,t[0],i.nativeEvent);if(e===null){e=i.nativeEvent;var n=new e.constructor(e.type,e);U0=n,e.target.dispatchEvent(n),U0=null}else return t=Fp(e),t!==null&&h1(t),i.blockedOn=e,!1;t.shift()}return!0}function jA(i,t,e){Cg(i)&&e.delete(t)}function Nk(){W0=!1,ta!==null&&Cg(ta)&&(ta=null),ea!==null&&Cg(ea)&&(ea=null),na!==null&&Cg(na)&&(na=null),Td.forEach(jA),kd.forEach(jA)}function Mh(i,t){i.blockedOn===t&&(i.blockedOn=null,W0||(W0=!0,hi.unstable_scheduleCallback(hi.unstable_NormalPriority,Nk)))}function Pd(i){function t(s){return Mh(s,i)}if(0<ig.length){Mh(ig[0],i);for(var e=1;e<ig.length;e++){var n=ig[e];n.blockedOn===i&&(n.blockedOn=null)}}for(ta!==null&&Mh(ta,i),ea!==null&&Mh(ea,i),na!==null&&Mh(na,i),Td.forEach(t),kd.forEach(t),e=0;e<eo.length;e++)n=eo[e],n.blockedOn===i&&(n.blockedOn=null);for(;0<eo.length&&(e=eo[0],e.blockedOn===null);)bx(e),e.blockedOn===null&&eo.shift()}var Ic=qr.ReactCurrentBatchConfig,wm=!0;function Ik(i,t,e,n){var s=kt,r=Ic.transition;Ic.transition=null;try{kt=1,d1(i,t,e,n)}finally{kt=s,Ic.transition=r}}function Fk(i,t,e,n){var s=kt,r=Ic.transition;Ic.transition=null;try{kt=4,d1(i,t,e,n)}finally{kt=s,Ic.transition=r}}function d1(i,t,e,n){if(wm){var s=X0(i,t,e,n);if(s===null)c0(i,t,n,Am,e),BA(i,n);else if(Dk(s,i,t,e,n))n.stopPropagation();else if(BA(i,n),t&4&&-1<Mk.indexOf(i)){for(;s!==null;){var r=Fp(s);if(r!==null&&yx(r),r=X0(i,t,e,n),r===null&&c0(i,t,n,Am,e),r===s)break;s=r}s!==null&&n.stopPropagation()}else c0(i,t,n,null,e)}}var Am=null;function X0(i,t,e,n){if(Am=null,i=l1(n),i=Pa(i),i!==null)if(t=nc(i),t===null)i=null;else if(e=t.tag,e===13){if(i=cx(t),i!==null)return i;i=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;i=null}else t!==i&&(i=null);return Am=i,null}function Sx(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xk()){case c1:return 1;case fx:return 4;case ym:case Ek:return 16;case px:return 536870912;default:return 16}default:return 16}}var Jo=null,f1=null,Tg=null;function xx(){if(Tg)return Tg;var i,t=f1,e=t.length,n,s="value"in Jo?Jo.value:Jo.textContent,r=s.length;for(i=0;i<e&&t[i]===s[i];i++);var o=e-i;for(n=1;n<=o&&t[e-n]===s[r-n];n++);return Tg=s.slice(i,1<n?1-n:void 0)}function kg(i){var t=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&t===13&&(i=13)):i=t,i===10&&(i=13),32<=i||i===13?i:0}function sg(){return!0}function zA(){return!1}function pi(i){function t(e,n,s,r,o){this._reactName=e,this._targetInst=s,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in i)i.hasOwnProperty(l)&&(e=i[l],this[l]=e?e(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?sg:zA,this.isPropagationStopped=zA,this}return ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=sg)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=sg)},persist:function(){},isPersistent:sg}),t}var Eh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},p1=pi(Eh),Ip=ae({},Eh,{view:0,detail:0}),Ok=pi(Ip),t0,e0,Dh,wy=ae({},Ip,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:g1,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Dh&&(Dh&&i.type==="mousemove"?(t0=i.screenX-Dh.screenX,e0=i.screenY-Dh.screenY):e0=t0=0,Dh=i),t0)},movementY:function(i){return"movementY"in i?i.movementY:e0}}),UA=pi(wy),Bk=ae({},wy,{dataTransfer:0}),jk=pi(Bk),zk=ae({},Ip,{relatedTarget:0}),n0=pi(zk),Uk=ae({},Eh,{animationName:0,elapsedTime:0,pseudoElement:0}),Hk=pi(Uk),$k=ae({},Eh,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Vk=pi($k),Gk=ae({},Eh,{data:0}),HA=pi(Gk),Wk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qk(i){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(i):(i=Yk[i])?!!t[i]:!1}function g1(){return qk}var Kk=ae({},Ip,{key:function(i){if(i.key){var t=Wk[i.key]||i.key;if(t!=="Unidentified")return t}return i.type==="keypress"?(i=kg(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Xk[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:g1,charCode:function(i){return i.type==="keypress"?kg(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?kg(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Qk=pi(Kk),Jk=ae({},wy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$A=pi(Jk),Zk=ae({},Ip,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:g1}),tP=pi(Zk),eP=ae({},Eh,{propertyName:0,elapsedTime:0,pseudoElement:0}),nP=pi(eP),iP=ae({},wy,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),sP=pi(iP),rP=[9,13,27,32],m1=Ur&&"CompositionEvent"in window,gd=null;Ur&&"documentMode"in document&&(gd=document.documentMode);var oP=Ur&&"TextEvent"in window&&!gd,Ex=Ur&&(!m1||gd&&8<gd&&11>=gd),VA=" ",GA=!1;function _x(i,t){switch(i){case"keyup":return rP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cx(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var yc=!1;function aP(i,t){switch(i){case"compositionend":return Cx(t);case"keypress":return t.which!==32?null:(GA=!0,VA);case"textInput":return i=t.data,i===VA&&GA?null:i;default:return null}}function lP(i,t){if(yc)return i==="compositionend"||!m1&&_x(i,t)?(i=xx(),Tg=f1=Jo=null,yc=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ex&&t.locale!=="ko"?null:t.data;default:return null}}var cP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function WA(i){var t=i&&i.nodeName&&i.nodeName.toLowerCase();return t==="input"?!!cP[i.type]:t==="textarea"}function Tx(i,t,e,n){sx(n),t=bm(t,"onChange"),0<t.length&&(e=new p1("onChange","change",null,e,n),i.push({event:e,listeners:t}))}var md=null,Ld=null;function uP(i){Bx(i,0)}function Ay(i){var t=Ac(i);if(QS(t))return i}function hP(i,t){if(i==="change")return t}var kx=!1;if(Ur){var i0;if(Ur){var s0="oninput"in document;if(!s0){var XA=document.createElement("div");XA.setAttribute("oninput","return;"),s0=typeof XA.oninput=="function"}i0=s0}else i0=!1;kx=i0&&(!document.documentMode||9<document.documentMode)}function YA(){md&&(md.detachEvent("onpropertychange",Px),Ld=md=null)}function Px(i){if(i.propertyName==="value"&&Ay(Ld)){var t=[];Tx(t,Ld,i,l1(i)),lx(uP,t)}}function dP(i,t,e){i==="focusin"?(YA(),md=t,Ld=e,md.attachEvent("onpropertychange",Px)):i==="focusout"&&YA()}function fP(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ay(Ld)}function pP(i,t){if(i==="click")return Ay(t)}function gP(i,t){if(i==="input"||i==="change")return Ay(t)}function mP(i,t){return i===t&&(i!==0||1/i===1/t)||i!==i&&t!==t}var as=typeof Object.is=="function"?Object.is:mP;function Rd(i,t){if(as(i,t))return!0;if(typeof i!="object"||i===null||typeof t!="object"||t===null)return!1;var e=Object.keys(i),n=Object.keys(t);if(e.length!==n.length)return!1;for(n=0;n<e.length;n++){var s=e[n];if(!P0.call(t,s)||!as(i[s],t[s]))return!1}return!0}function qA(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function KA(i,t){var e=qA(i);i=0;for(var n;e;){if(e.nodeType===3){if(n=i+e.textContent.length,i<=t&&n>=t)return{node:e,offset:t-i};i=n}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=qA(e)}}function Lx(i,t){return i&&t?i===t?!0:i&&i.nodeType===3?!1:t&&t.nodeType===3?Lx(i,t.parentNode):"contains"in i?i.contains(t):i.compareDocumentPosition?!!(i.compareDocumentPosition(t)&16):!1:!1}function Rx(){for(var i=window,t=pm();t instanceof i.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)i=t.contentWindow;else break;t=pm(i.document)}return t}function y1(i){var t=i&&i.nodeName&&i.nodeName.toLowerCase();return t&&(t==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||t==="textarea"||i.contentEditable==="true")}function yP(i){var t=Rx(),e=i.focusedElem,n=i.selectionRange;if(t!==e&&e&&e.ownerDocument&&Lx(e.ownerDocument.documentElement,e)){if(n!==null&&y1(e)){if(t=n.start,i=n.end,i===void 0&&(i=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(i,e.value.length);else if(i=(t=e.ownerDocument||document)&&t.defaultView||window,i.getSelection){i=i.getSelection();var s=e.textContent.length,r=Math.min(n.start,s);n=n.end===void 0?r:Math.min(n.end,s),!i.extend&&r>n&&(s=n,n=r,r=s),s=KA(e,r);var o=KA(e,n);s&&o&&(i.rangeCount!==1||i.anchorNode!==s.node||i.anchorOffset!==s.offset||i.focusNode!==o.node||i.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),i.removeAllRanges(),r>n?(i.addRange(t),i.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),i.addRange(t)))}}for(t=[],i=e;i=i.parentNode;)i.nodeType===1&&t.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)i=t[e],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var vP=Ur&&"documentMode"in document&&11>=document.documentMode,vc=null,Y0=null,yd=null,q0=!1;function QA(i,t,e){var n=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;q0||vc==null||vc!==pm(n)||(n=vc,"selectionStart"in n&&y1(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),yd&&Rd(yd,n)||(yd=n,n=bm(Y0,"onSelect"),0<n.length&&(t=new p1("onSelect","select",null,t,e),i.push({event:t,listeners:n}),t.target=vc)))}function rg(i,t){var e={};return e[i.toLowerCase()]=t.toLowerCase(),e["Webkit"+i]="webkit"+t,e["Moz"+i]="moz"+t,e}var wc={animationend:rg("Animation","AnimationEnd"),animationiteration:rg("Animation","AnimationIteration"),animationstart:rg("Animation","AnimationStart"),transitionend:rg("Transition","TransitionEnd")},r0={},Mx={};Ur&&(Mx=document.createElement("div").style,"AnimationEvent"in window||(delete wc.animationend.animation,delete wc.animationiteration.animation,delete wc.animationstart.animation),"TransitionEvent"in window||delete wc.transitionend.transition);function by(i){if(r0[i])return r0[i];if(!wc[i])return i;var t=wc[i],e;for(e in t)if(t.hasOwnProperty(e)&&e in Mx)return r0[i]=t[e];return i}var Dx=by("animationend"),Nx=by("animationiteration"),Ix=by("animationstart"),Fx=by("transitionend"),Ox=new Map,JA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ga(i,t){Ox.set(i,t),ec(t,[i])}for(var o0=0;o0<JA.length;o0++){var a0=JA[o0],wP=a0.toLowerCase(),AP=a0[0].toUpperCase()+a0.slice(1);ga(wP,"on"+AP)}ga(Dx,"onAnimationEnd");ga(Nx,"onAnimationIteration");ga(Ix,"onAnimationStart");ga("dblclick","onDoubleClick");ga("focusin","onFocus");ga("focusout","onBlur");ga(Fx,"onTransitionEnd");fh("onMouseEnter",["mouseout","mouseover"]);fh("onMouseLeave",["mouseout","mouseover"]);fh("onPointerEnter",["pointerout","pointerover"]);fh("onPointerLeave",["pointerout","pointerover"]);ec("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ec("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ec("onBeforeInput",["compositionend","keypress","textInput","paste"]);ec("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vh));function ZA(i,t,e){var n=i.type||"unknown-event";i.currentTarget=e,wk(n,t,void 0,i),i.currentTarget=null}function Bx(i,t){t=(t&4)!==0;for(var e=0;e<i.length;e++){var n=i[e],s=n.event;n=n.listeners;t:{var r=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==r&&s.isPropagationStopped())break t;ZA(s,l,u),r=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==r&&s.isPropagationStopped())break t;ZA(s,l,u),r=c}}}if(mm)throw i=V0,mm=!1,V0=null,i}function Xt(i,t){var e=t[tv];e===void 0&&(e=t[tv]=new Set);var n=i+"__bubble";e.has(n)||(jx(t,i,2,!1),e.add(n))}function l0(i,t,e){var n=0;t&&(n|=4),jx(e,i,n,t)}var og="_reactListening"+Math.random().toString(36).slice(2);function Md(i){if(!i[og]){i[og]=!0,WS.forEach(function(e){e!=="selectionchange"&&(bP.has(e)||l0(e,!1,i),l0(e,!0,i))});var t=i.nodeType===9?i:i.ownerDocument;t===null||t[og]||(t[og]=!0,l0("selectionchange",!1,t))}}function jx(i,t,e,n){switch(Sx(t)){case 1:var s=Ik;break;case 4:s=Fk;break;default:s=d1}e=s.bind(null,t,e,i),s=void 0,!$0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?i.addEventListener(t,e,{capture:!0,passive:s}):i.addEventListener(t,e,!0):s!==void 0?i.addEventListener(t,e,{passive:s}):i.addEventListener(t,e,!1)}function c0(i,t,e,n,s){var r=n;if(!(t&1)&&!(t&2)&&n!==null)t:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Pa(l),o===null)return;if(c=o.tag,c===5||c===6){n=r=o;continue t}l=l.parentNode}}n=n.return}lx(function(){var u=r,h=l1(e),d=[];t:{var f=Ox.get(i);if(f!==void 0){var p=p1,y=i;switch(i){case"keypress":if(kg(e)===0)break t;case"keydown":case"keyup":p=Qk;break;case"focusin":y="focus",p=n0;break;case"focusout":y="blur",p=n0;break;case"beforeblur":case"afterblur":p=n0;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=UA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=jk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=tP;break;case Dx:case Nx:case Ix:p=Hk;break;case Fx:p=nP;break;case"scroll":p=Ok;break;case"wheel":p=sP;break;case"copy":case"cut":case"paste":p=Vk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=$A}var w=(t&4)!==0,x=!w&&i==="scroll",g=w?f!==null?f+"Capture":null:f;w=[];for(var v=u,b;v!==null;){b=v;var E=b.stateNode;if(b.tag===5&&E!==null&&(b=E,g!==null&&(E=Cd(v,g),E!=null&&w.push(Dd(v,E,b)))),x)break;v=v.return}0<w.length&&(f=new p(f,y,null,e,h),d.push({event:f,listeners:w}))}}if(!(t&7)){t:{if(f=i==="mouseover"||i==="pointerover",p=i==="mouseout"||i==="pointerout",f&&e!==U0&&(y=e.relatedTarget||e.fromElement)&&(Pa(y)||y[Hr]))break t;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=e.relatedTarget||e.toElement,p=u,y=y?Pa(y):null,y!==null&&(x=nc(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(w=UA,E="onMouseLeave",g="onMouseEnter",v="mouse",(i==="pointerout"||i==="pointerover")&&(w=$A,E="onPointerLeave",g="onPointerEnter",v="pointer"),x=p==null?f:Ac(p),b=y==null?f:Ac(y),f=new w(E,v+"leave",p,e,h),f.target=x,f.relatedTarget=b,E=null,Pa(h)===u&&(w=new w(g,v+"enter",y,e,h),w.target=b,w.relatedTarget=x,E=w),x=E,p&&y)e:{for(w=p,g=y,v=0,b=w;b;b=rc(b))v++;for(b=0,E=g;E;E=rc(E))b++;for(;0<v-b;)w=rc(w),v--;for(;0<b-v;)g=rc(g),b--;for(;v--;){if(w===g||g!==null&&w===g.alternate)break e;w=rc(w),g=rc(g)}w=null}else w=null;p!==null&&tb(d,f,p,w,!1),y!==null&&x!==null&&tb(d,x,y,w,!0)}}t:{if(f=u?Ac(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=hP;else if(WA(f))if(kx)_=gP;else{_=fP;var C=dP}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=pP);if(_&&(_=_(i,u))){Tx(d,_,e,h);break t}C&&C(i,f,u),i==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&F0(f,"number",f.value)}switch(C=u?Ac(u):window,i){case"focusin":(WA(C)||C.contentEditable==="true")&&(vc=C,Y0=u,yd=null);break;case"focusout":yd=Y0=vc=null;break;case"mousedown":q0=!0;break;case"contextmenu":case"mouseup":case"dragend":q0=!1,QA(d,e,h);break;case"selectionchange":if(vP)break;case"keydown":case"keyup":QA(d,e,h)}var T;if(m1)t:{switch(i){case"compositionstart":var k="onCompositionStart";break t;case"compositionend":k="onCompositionEnd";break t;case"compositionupdate":k="onCompositionUpdate";break t}k=void 0}else yc?_x(i,e)&&(k="onCompositionEnd"):i==="keydown"&&e.keyCode===229&&(k="onCompositionStart");k&&(Ex&&e.locale!=="ko"&&(yc||k!=="onCompositionStart"?k==="onCompositionEnd"&&yc&&(T=xx()):(Jo=h,f1="value"in Jo?Jo.value:Jo.textContent,yc=!0)),C=bm(u,k),0<C.length&&(k=new HA(k,i,null,e,h),d.push({event:k,listeners:C}),T?k.data=T:(T=Cx(e),T!==null&&(k.data=T)))),(T=oP?aP(i,e):lP(i,e))&&(u=bm(u,"onBeforeInput"),0<u.length&&(h=new HA("onBeforeInput","beforeinput",null,e,h),d.push({event:h,listeners:u}),h.data=T))}Bx(d,t)})}function Dd(i,t,e){return{instance:i,listener:t,currentTarget:e}}function bm(i,t){for(var e=t+"Capture",n=[];i!==null;){var s=i,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Cd(i,e),r!=null&&n.unshift(Dd(i,r,s)),r=Cd(i,t),r!=null&&n.push(Dd(i,r,s))),i=i.return}return n}function rc(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function tb(i,t,e,n,s){for(var r=t._reactName,o=[];e!==null&&e!==n;){var l=e,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Cd(e,r),c!=null&&o.unshift(Dd(e,c,l))):s||(c=Cd(e,r),c!=null&&o.push(Dd(e,c,l)))),e=e.return}o.length!==0&&i.push({event:t,listeners:o})}var SP=/\r\n?/g,xP=/\u0000|\uFFFD/g;function eb(i){return(typeof i=="string"?i:""+i).replace(SP,`
`).replace(xP,"")}function ag(i,t,e){if(t=eb(t),eb(i)!==t&&e)throw Error(z(425))}function Sm(){}var K0=null,Q0=null;function J0(i,t){return i==="textarea"||i==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Z0=typeof setTimeout=="function"?setTimeout:void 0,EP=typeof clearTimeout=="function"?clearTimeout:void 0,nb=typeof Promise=="function"?Promise:void 0,_P=typeof queueMicrotask=="function"?queueMicrotask:typeof nb<"u"?function(i){return nb.resolve(null).then(i).catch(CP)}:Z0;function CP(i){setTimeout(function(){throw i})}function u0(i,t){var e=t,n=0;do{var s=e.nextSibling;if(i.removeChild(e),s&&s.nodeType===8)if(e=s.data,e==="/$"){if(n===0){i.removeChild(s),Pd(t);return}n--}else e!=="$"&&e!=="$?"&&e!=="$!"||n++;e=s}while(e);Pd(t)}function ia(i){for(;i!=null;i=i.nextSibling){var t=i.nodeType;if(t===1||t===3)break;if(t===8){if(t=i.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return i}function ib(i){i=i.previousSibling;for(var t=0;i;){if(i.nodeType===8){var e=i.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return i;t--}else e==="/$"&&t++}i=i.previousSibling}return null}var _h=Math.random().toString(36).slice(2),Us="__reactFiber$"+_h,Nd="__reactProps$"+_h,Hr="__reactContainer$"+_h,tv="__reactEvents$"+_h,TP="__reactListeners$"+_h,kP="__reactHandles$"+_h;function Pa(i){var t=i[Us];if(t)return t;for(var e=i.parentNode;e;){if(t=e[Hr]||e[Us]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(i=ib(i);i!==null;){if(e=i[Us])return e;i=ib(i)}return t}i=e,e=i.parentNode}return null}function Fp(i){return i=i[Us]||i[Hr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ac(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(z(33))}function Sy(i){return i[Nd]||null}var ev=[],bc=-1;function ma(i){return{current:i}}function qt(i){0>bc||(i.current=ev[bc],ev[bc]=null,bc--)}function $t(i,t){bc++,ev[bc]=i.current,i.current=t}var ua={},hn=ma(ua),On=ma(!1),Xl=ua;function ph(i,t){var e=i.type.contextTypes;if(!e)return ua;var n=i.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in e)s[r]=t[r];return n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=t,i.__reactInternalMemoizedMaskedChildContext=s),s}function Bn(i){return i=i.childContextTypes,i!=null}function xm(){qt(On),qt(hn)}function sb(i,t,e){if(hn.current!==ua)throw Error(z(168));$t(hn,t),$t(On,e)}function zx(i,t,e){var n=i.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return e;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(z(108,dk(i)||"Unknown",s));return ae({},e,n)}function Em(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ua,Xl=hn.current,$t(hn,i),$t(On,On.current),!0}function rb(i,t,e){var n=i.stateNode;if(!n)throw Error(z(169));e?(i=zx(i,t,Xl),n.__reactInternalMemoizedMergedChildContext=i,qt(On),qt(hn),$t(hn,i)):qt(On),$t(On,e)}var er=null,xy=!1,h0=!1;function Ux(i){er===null?er=[i]:er.push(i)}function PP(i){xy=!0,Ux(i)}function ya(){if(!h0&&er!==null){h0=!0;var i=0,t=kt;try{var e=er;for(kt=1;i<e.length;i++){var n=e[i];do n=n(!0);while(n!==null)}er=null,xy=!1}catch(s){throw er!==null&&(er=er.slice(i+1)),dx(c1,ya),s}finally{kt=t,h0=!1}}return null}var Sc=[],xc=0,_m=null,Cm=0,ki=[],Pi=0,Yl=null,Fr=1,Or="";function ba(i,t){Sc[xc++]=Cm,Sc[xc++]=_m,_m=i,Cm=t}function Hx(i,t,e){ki[Pi++]=Fr,ki[Pi++]=Or,ki[Pi++]=Yl,Yl=i;var n=Fr;i=Or;var s=32-ss(n)-1;n&=~(1<<s),e+=1;var r=32-ss(t)+s;if(30<r){var o=s-s%5;r=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Fr=1<<32-ss(t)+s|e<<s|n,Or=r+i}else Fr=1<<r|e<<s|n,Or=i}function v1(i){i.return!==null&&(ba(i,1),Hx(i,1,0))}function w1(i){for(;i===_m;)_m=Sc[--xc],Sc[xc]=null,Cm=Sc[--xc],Sc[xc]=null;for(;i===Yl;)Yl=ki[--Pi],ki[Pi]=null,Or=ki[--Pi],ki[Pi]=null,Fr=ki[--Pi],ki[Pi]=null}var ci=null,li=null,Zt=!1,es=null;function $x(i,t){var e=Mi(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=i,t=i.deletions,t===null?(i.deletions=[e],i.flags|=16):t.push(e)}function ob(i,t){switch(i.tag){case 5:var e=i.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(i.stateNode=t,ci=i,li=ia(t.firstChild),!0):!1;case 6:return t=i.pendingProps===""||t.nodeType!==3?null:t,t!==null?(i.stateNode=t,ci=i,li=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=Yl!==null?{id:Fr,overflow:Or}:null,i.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=Mi(18,null,null,0),e.stateNode=t,e.return=i,i.child=e,ci=i,li=null,!0):!1;default:return!1}}function nv(i){return(i.mode&1)!==0&&(i.flags&128)===0}function iv(i){if(Zt){var t=li;if(t){var e=t;if(!ob(i,t)){if(nv(i))throw Error(z(418));t=ia(e.nextSibling);var n=ci;t&&ob(i,t)?$x(n,e):(i.flags=i.flags&-4097|2,Zt=!1,ci=i)}}else{if(nv(i))throw Error(z(418));i.flags=i.flags&-4097|2,Zt=!1,ci=i}}}function ab(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;ci=i}function lg(i){if(i!==ci)return!1;if(!Zt)return ab(i),Zt=!0,!1;var t;if((t=i.tag!==3)&&!(t=i.tag!==5)&&(t=i.type,t=t!=="head"&&t!=="body"&&!J0(i.type,i.memoizedProps)),t&&(t=li)){if(nv(i))throw Vx(),Error(z(418));for(;t;)$x(i,t),t=ia(t.nextSibling)}if(ab(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));t:{for(i=i.nextSibling,t=0;i;){if(i.nodeType===8){var e=i.data;if(e==="/$"){if(t===0){li=ia(i.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}i=i.nextSibling}li=null}}else li=ci?ia(i.stateNode.nextSibling):null;return!0}function Vx(){for(var i=li;i;)i=ia(i.nextSibling)}function gh(){li=ci=null,Zt=!1}function A1(i){es===null?es=[i]:es.push(i)}var LP=qr.ReactCurrentBatchConfig;function Nh(i,t,e){if(i=e.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(z(309));var n=e.stateNode}if(!n)throw Error(z(147,i));var s=n,r=""+i;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var l=s.refs;o===null?delete l[r]:l[r]=o},t._stringRef=r,t)}if(typeof i!="string")throw Error(z(284));if(!e._owner)throw Error(z(290,i))}return i}function cg(i,t){throw i=Object.prototype.toString.call(t),Error(z(31,i==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":i))}function lb(i){var t=i._init;return t(i._payload)}function Gx(i){function t(g,v){if(i){var b=g.deletions;b===null?(g.deletions=[v],g.flags|=16):b.push(v)}}function e(g,v){if(!i)return null;for(;v!==null;)t(g,v),v=v.sibling;return null}function n(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function s(g,v){return g=aa(g,v),g.index=0,g.sibling=null,g}function r(g,v,b){return g.index=b,i?(b=g.alternate,b!==null?(b=b.index,b<v?(g.flags|=2,v):b):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return i&&g.alternate===null&&(g.flags|=2),g}function l(g,v,b,E){return v===null||v.tag!==6?(v=v0(b,g.mode,E),v.return=g,v):(v=s(v,b),v.return=g,v)}function c(g,v,b,E){var _=b.type;return _===mc?h(g,v,b.props.children,E,b.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Zr&&lb(_)===v.type)?(E=s(v,b.props),E.ref=Nh(g,v,b),E.return=g,E):(E=Ig(b.type,b.key,b.props,null,g.mode,E),E.ref=Nh(g,v,b),E.return=g,E)}function u(g,v,b,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=w0(b,g.mode,E),v.return=g,v):(v=s(v,b.children||[]),v.return=g,v)}function h(g,v,b,E,_){return v===null||v.tag!==7?(v=Wl(b,g.mode,E,_),v.return=g,v):(v=s(v,b),v.return=g,v)}function d(g,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=v0(""+v,g.mode,b),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Jp:return b=Ig(v.type,v.key,v.props,null,g.mode,b),b.ref=Nh(g,null,v),b.return=g,b;case gc:return v=w0(v,g.mode,b),v.return=g,v;case Zr:var E=v._init;return d(g,E(v._payload),b)}if(Hh(v)||Ph(v))return v=Wl(v,g.mode,b,null),v.return=g,v;cg(g,v)}return null}function f(g,v,b,E){var _=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:l(g,v,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Jp:return b.key===_?c(g,v,b,E):null;case gc:return b.key===_?u(g,v,b,E):null;case Zr:return _=b._init,f(g,v,_(b._payload),E)}if(Hh(b)||Ph(b))return _!==null?null:h(g,v,b,E,null);cg(g,b)}return null}function p(g,v,b,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(b)||null,l(v,g,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Jp:return g=g.get(E.key===null?b:E.key)||null,c(v,g,E,_);case gc:return g=g.get(E.key===null?b:E.key)||null,u(v,g,E,_);case Zr:var C=E._init;return p(g,v,b,C(E._payload),_)}if(Hh(E)||Ph(E))return g=g.get(b)||null,h(v,g,E,_,null);cg(v,E)}return null}function y(g,v,b,E){for(var _=null,C=null,T=v,k=v=0,P=null;T!==null&&k<b.length;k++){T.index>k?(P=T,T=null):P=T.sibling;var L=f(g,T,b[k],E);if(L===null){T===null&&(T=P);break}i&&T&&L.alternate===null&&t(g,T),v=r(L,v,k),C===null?_=L:C.sibling=L,C=L,T=P}if(k===b.length)return e(g,T),Zt&&ba(g,k),_;if(T===null){for(;k<b.length;k++)T=d(g,b[k],E),T!==null&&(v=r(T,v,k),C===null?_=T:C.sibling=T,C=T);return Zt&&ba(g,k),_}for(T=n(g,T);k<b.length;k++)P=p(T,g,k,b[k],E),P!==null&&(i&&P.alternate!==null&&T.delete(P.key===null?k:P.key),v=r(P,v,k),C===null?_=P:C.sibling=P,C=P);return i&&T.forEach(function(M){return t(g,M)}),Zt&&ba(g,k),_}function w(g,v,b,E){var _=Ph(b);if(typeof _!="function")throw Error(z(150));if(b=_.call(b),b==null)throw Error(z(151));for(var C=_=null,T=v,k=v=0,P=null,L=b.next();T!==null&&!L.done;k++,L=b.next()){T.index>k?(P=T,T=null):P=T.sibling;var M=f(g,T,L.value,E);if(M===null){T===null&&(T=P);break}i&&T&&M.alternate===null&&t(g,T),v=r(M,v,k),C===null?_=M:C.sibling=M,C=M,T=P}if(L.done)return e(g,T),Zt&&ba(g,k),_;if(T===null){for(;!L.done;k++,L=b.next())L=d(g,L.value,E),L!==null&&(v=r(L,v,k),C===null?_=L:C.sibling=L,C=L);return Zt&&ba(g,k),_}for(T=n(g,T);!L.done;k++,L=b.next())L=p(T,g,k,L.value,E),L!==null&&(i&&L.alternate!==null&&T.delete(L.key===null?k:L.key),v=r(L,v,k),C===null?_=L:C.sibling=L,C=L);return i&&T.forEach(function(I){return t(g,I)}),Zt&&ba(g,k),_}function x(g,v,b,E){if(typeof b=="object"&&b!==null&&b.type===mc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Jp:t:{for(var _=b.key,C=v;C!==null;){if(C.key===_){if(_=b.type,_===mc){if(C.tag===7){e(g,C.sibling),v=s(C,b.props.children),v.return=g,g=v;break t}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Zr&&lb(_)===C.type){e(g,C.sibling),v=s(C,b.props),v.ref=Nh(g,C,b),v.return=g,g=v;break t}e(g,C);break}else t(g,C);C=C.sibling}b.type===mc?(v=Wl(b.props.children,g.mode,E,b.key),v.return=g,g=v):(E=Ig(b.type,b.key,b.props,null,g.mode,E),E.ref=Nh(g,v,b),E.return=g,g=E)}return o(g);case gc:t:{for(C=b.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){e(g,v.sibling),v=s(v,b.children||[]),v.return=g,g=v;break t}else{e(g,v);break}else t(g,v);v=v.sibling}v=w0(b,g.mode,E),v.return=g,g=v}return o(g);case Zr:return C=b._init,x(g,v,C(b._payload),E)}if(Hh(b))return y(g,v,b,E);if(Ph(b))return w(g,v,b,E);cg(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(e(g,v.sibling),v=s(v,b),v.return=g,g=v):(e(g,v),v=v0(b,g.mode,E),v.return=g,g=v),o(g)):e(g,v)}return x}var mh=Gx(!0),Wx=Gx(!1),Tm=ma(null),km=null,Ec=null,b1=null;function S1(){b1=Ec=km=null}function x1(i){var t=Tm.current;qt(Tm),i._currentValue=t}function sv(i,t,e){for(;i!==null;){var n=i.alternate;if((i.childLanes&t)!==t?(i.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),i===e)break;i=i.return}}function Fc(i,t){km=i,b1=Ec=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&t&&(Fn=!0),i.firstContext=null)}function Ii(i){var t=i._currentValue;if(b1!==i)if(i={context:i,memoizedValue:t,next:null},Ec===null){if(km===null)throw Error(z(308));Ec=i,km.dependencies={lanes:0,firstContext:i}}else Ec=Ec.next=i;return t}var La=null;function E1(i){La===null?La=[i]:La.push(i)}function Xx(i,t,e,n){var s=t.interleaved;return s===null?(e.next=e,E1(t)):(e.next=s.next,s.next=e),t.interleaved=e,$r(i,n)}function $r(i,t){i.lanes|=t;var e=i.alternate;for(e!==null&&(e.lanes|=t),e=i,i=i.return;i!==null;)i.childLanes|=t,e=i.alternate,e!==null&&(e.childLanes|=t),e=i,i=i.return;return e.tag===3?e.stateNode:null}var to=!1;function _1(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yx(i,t){i=i.updateQueue,t.updateQueue===i&&(t.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Br(i,t){return{eventTime:i,lane:t,tag:0,payload:null,callback:null,next:null}}function sa(i,t,e){var n=i.updateQueue;if(n===null)return null;if(n=n.shared,At&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,$r(i,e)}return s=n.interleaved,s===null?(t.next=t,E1(n)):(t.next=s.next,s.next=t),n.interleaved=t,$r(i,e)}function Pg(i,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var n=t.lanes;n&=i.pendingLanes,e|=n,t.lanes=e,u1(i,e)}}function cb(i,t){var e=i.updateQueue,n=i.alternate;if(n!==null&&(n=n.updateQueue,e===n)){var s=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var o={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?s=r=o:r=r.next=o,e=e.next}while(e!==null);r===null?s=r=t:r=r.next=t}else s=r=t;e={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:n.shared,effects:n.effects},i.updateQueue=e;return}i=e.lastBaseUpdate,i===null?e.firstBaseUpdate=t:i.next=t,e.lastBaseUpdate=t}function Pm(i,t,e,n){var s=i.updateQueue;to=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?r=u:o.next=u,o=c;var h=i.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=s.baseState;o=0,h=u=c=null,l=r;do{var f=l.lane,p=l.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var y=i,w=l;switch(f=t,p=e,w.tag){case 1:if(y=w.payload,typeof y=="function"){d=y.call(p,d,f);break t}d=y;break t;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,f=typeof y=="function"?y.call(p,d,f):y,f==null)break t;d=ae({},d,f);break t;case 2:to=!0}}l.callback!==null&&l.lane!==0&&(i.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else r===null&&(s.shared.lanes=0);Kl|=o,i.lanes=o,i.memoizedState=d}}function ub(i,t,e){if(i=t.effects,t.effects=null,i!==null)for(t=0;t<i.length;t++){var n=i[t],s=n.callback;if(s!==null){if(n.callback=null,n=e,typeof s!="function")throw Error(z(191,s));s.call(n)}}}var Op={},Ws=ma(Op),Id=ma(Op),Fd=ma(Op);function Ra(i){if(i===Op)throw Error(z(174));return i}function C1(i,t){switch($t(Fd,t),$t(Id,i),$t(Ws,Op),i=t.nodeType,i){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:B0(null,"");break;default:i=i===8?t.parentNode:t,t=i.namespaceURI||null,i=i.tagName,t=B0(t,i)}qt(Ws),$t(Ws,t)}function yh(){qt(Ws),qt(Id),qt(Fd)}function qx(i){Ra(Fd.current);var t=Ra(Ws.current),e=B0(t,i.type);t!==e&&($t(Id,i),$t(Ws,e))}function T1(i){Id.current===i&&(qt(Ws),qt(Id))}var ne=ma(0);function Lm(i){for(var t=i;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break;for(;t.sibling===null;){if(t.return===null||t.return===i)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var d0=[];function k1(){for(var i=0;i<d0.length;i++)d0[i]._workInProgressVersionPrimary=null;d0.length=0}var Lg=qr.ReactCurrentDispatcher,f0=qr.ReactCurrentBatchConfig,ql=0,re=null,Te=null,Oe=null,Rm=!1,vd=!1,Od=0,RP=0;function Je(){throw Error(z(321))}function P1(i,t){if(t===null)return!1;for(var e=0;e<t.length&&e<i.length;e++)if(!as(i[e],t[e]))return!1;return!0}function L1(i,t,e,n,s,r){if(ql=r,re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Lg.current=i===null||i.memoizedState===null?IP:FP,i=e(n,s),vd){r=0;do{if(vd=!1,Od=0,25<=r)throw Error(z(301));r+=1,Oe=Te=null,t.updateQueue=null,Lg.current=OP,i=e(n,s)}while(vd)}if(Lg.current=Mm,t=Te!==null&&Te.next!==null,ql=0,Oe=Te=re=null,Rm=!1,t)throw Error(z(300));return i}function R1(){var i=Od!==0;return Od=0,i}function ys(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?re.memoizedState=Oe=i:Oe=Oe.next=i,Oe}function Fi(){if(Te===null){var i=re.alternate;i=i!==null?i.memoizedState:null}else i=Te.next;var t=Oe===null?re.memoizedState:Oe.next;if(t!==null)Oe=t,Te=i;else{if(i===null)throw Error(z(310));Te=i,i={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Oe===null?re.memoizedState=Oe=i:Oe=Oe.next=i}return Oe}function Bd(i,t){return typeof t=="function"?t(i):t}function p0(i){var t=Fi(),e=t.queue;if(e===null)throw Error(z(311));e.lastRenderedReducer=i;var n=Te,s=n.baseQueue,r=e.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}n.baseQueue=s=r,e.pending=null}if(s!==null){r=s.next,n=n.baseState;var l=o=null,c=null,u=r;do{var h=u.lane;if((ql&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:i(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=n):c=c.next=d,re.lanes|=h,Kl|=h}u=u.next}while(u!==null&&u!==r);c===null?o=n:c.next=l,as(n,t.memoizedState)||(Fn=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,e.lastRenderedState=n}if(i=e.interleaved,i!==null){s=i;do r=s.lane,re.lanes|=r,Kl|=r,s=s.next;while(s!==i)}else s===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function g0(i){var t=Fi(),e=t.queue;if(e===null)throw Error(z(311));e.lastRenderedReducer=i;var n=e.dispatch,s=e.pending,r=t.memoizedState;if(s!==null){e.pending=null;var o=s=s.next;do r=i(r,o.action),o=o.next;while(o!==s);as(r,t.memoizedState)||(Fn=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),e.lastRenderedState=r}return[r,n]}function Kx(){}function Qx(i,t){var e=re,n=Fi(),s=t(),r=!as(n.memoizedState,s);if(r&&(n.memoizedState=s,Fn=!0),n=n.queue,M1(tE.bind(null,e,n,i),[i]),n.getSnapshot!==t||r||Oe!==null&&Oe.memoizedState.tag&1){if(e.flags|=2048,jd(9,Zx.bind(null,e,n,s,t),void 0,null),Be===null)throw Error(z(349));ql&30||Jx(e,t,s)}return s}function Jx(i,t,e){i.flags|=16384,i={getSnapshot:t,value:e},t=re.updateQueue,t===null?(t={lastEffect:null,stores:null},re.updateQueue=t,t.stores=[i]):(e=t.stores,e===null?t.stores=[i]:e.push(i))}function Zx(i,t,e,n){t.value=e,t.getSnapshot=n,eE(t)&&nE(i)}function tE(i,t,e){return e(function(){eE(t)&&nE(i)})}function eE(i){var t=i.getSnapshot;i=i.value;try{var e=t();return!as(i,e)}catch{return!0}}function nE(i){var t=$r(i,1);t!==null&&rs(t,i,1,-1)}function hb(i){var t=ys();return typeof i=="function"&&(i=i()),t.memoizedState=t.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bd,lastRenderedState:i},t.queue=i,i=i.dispatch=NP.bind(null,re,i),[t.memoizedState,i]}function jd(i,t,e,n){return i={tag:i,create:t,destroy:e,deps:n,next:null},t=re.updateQueue,t===null?(t={lastEffect:null,stores:null},re.updateQueue=t,t.lastEffect=i.next=i):(e=t.lastEffect,e===null?t.lastEffect=i.next=i:(n=e.next,e.next=i,i.next=n,t.lastEffect=i)),i}function iE(){return Fi().memoizedState}function Rg(i,t,e,n){var s=ys();re.flags|=i,s.memoizedState=jd(1|t,e,void 0,n===void 0?null:n)}function Ey(i,t,e,n){var s=Fi();n=n===void 0?null:n;var r=void 0;if(Te!==null){var o=Te.memoizedState;if(r=o.destroy,n!==null&&P1(n,o.deps)){s.memoizedState=jd(t,e,r,n);return}}re.flags|=i,s.memoizedState=jd(1|t,e,r,n)}function db(i,t){return Rg(8390656,8,i,t)}function M1(i,t){return Ey(2048,8,i,t)}function sE(i,t){return Ey(4,2,i,t)}function rE(i,t){return Ey(4,4,i,t)}function oE(i,t){if(typeof t=="function")return i=i(),t(i),function(){t(null)};if(t!=null)return i=i(),t.current=i,function(){t.current=null}}function aE(i,t,e){return e=e!=null?e.concat([i]):null,Ey(4,4,oE.bind(null,t,i),e)}function D1(){}function lE(i,t){var e=Fi();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&P1(t,n[1])?n[0]:(e.memoizedState=[i,t],i)}function cE(i,t){var e=Fi();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&P1(t,n[1])?n[0]:(i=i(),e.memoizedState=[i,t],i)}function uE(i,t,e){return ql&21?(as(e,t)||(e=gx(),re.lanes|=e,Kl|=e,i.baseState=!0),t):(i.baseState&&(i.baseState=!1,Fn=!0),i.memoizedState=e)}function MP(i,t){var e=kt;kt=e!==0&&4>e?e:4,i(!0);var n=f0.transition;f0.transition={};try{i(!1),t()}finally{kt=e,f0.transition=n}}function hE(){return Fi().memoizedState}function DP(i,t,e){var n=oa(i);if(e={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null},dE(i))fE(t,e);else if(e=Xx(i,t,e,n),e!==null){var s=bn();rs(e,i,n,s),pE(e,t,n)}}function NP(i,t,e){var n=oa(i),s={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null};if(dE(i))fE(t,s);else{var r=i.alternate;if(i.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,l=r(o,e);if(s.hasEagerState=!0,s.eagerState=l,as(l,o)){var c=t.interleaved;c===null?(s.next=s,E1(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}e=Xx(i,t,s,n),e!==null&&(s=bn(),rs(e,i,n,s),pE(e,t,n))}}function dE(i){var t=i.alternate;return i===re||t!==null&&t===re}function fE(i,t){vd=Rm=!0;var e=i.pending;e===null?t.next=t:(t.next=e.next,e.next=t),i.pending=t}function pE(i,t,e){if(e&4194240){var n=t.lanes;n&=i.pendingLanes,e|=n,t.lanes=e,u1(i,e)}}var Mm={readContext:Ii,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},IP={readContext:Ii,useCallback:function(i,t){return ys().memoizedState=[i,t===void 0?null:t],i},useContext:Ii,useEffect:db,useImperativeHandle:function(i,t,e){return e=e!=null?e.concat([i]):null,Rg(4194308,4,oE.bind(null,t,i),e)},useLayoutEffect:function(i,t){return Rg(4194308,4,i,t)},useInsertionEffect:function(i,t){return Rg(4,2,i,t)},useMemo:function(i,t){var e=ys();return t=t===void 0?null:t,i=i(),e.memoizedState=[i,t],i},useReducer:function(i,t,e){var n=ys();return t=e!==void 0?e(t):t,n.memoizedState=n.baseState=t,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:t},n.queue=i,i=i.dispatch=DP.bind(null,re,i),[n.memoizedState,i]},useRef:function(i){var t=ys();return i={current:i},t.memoizedState=i},useState:hb,useDebugValue:D1,useDeferredValue:function(i){return ys().memoizedState=i},useTransition:function(){var i=hb(!1),t=i[0];return i=MP.bind(null,i[1]),ys().memoizedState=i,[t,i]},useMutableSource:function(){},useSyncExternalStore:function(i,t,e){var n=re,s=ys();if(Zt){if(e===void 0)throw Error(z(407));e=e()}else{if(e=t(),Be===null)throw Error(z(349));ql&30||Jx(n,t,e)}s.memoizedState=e;var r={value:e,getSnapshot:t};return s.queue=r,db(tE.bind(null,n,r,i),[i]),n.flags|=2048,jd(9,Zx.bind(null,n,r,e,t),void 0,null),e},useId:function(){var i=ys(),t=Be.identifierPrefix;if(Zt){var e=Or,n=Fr;e=(n&~(1<<32-ss(n)-1)).toString(32)+e,t=":"+t+"R"+e,e=Od++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=RP++,t=":"+t+"r"+e.toString(32)+":";return i.memoizedState=t},unstable_isNewReconciler:!1},FP={readContext:Ii,useCallback:lE,useContext:Ii,useEffect:M1,useImperativeHandle:aE,useInsertionEffect:sE,useLayoutEffect:rE,useMemo:cE,useReducer:p0,useRef:iE,useState:function(){return p0(Bd)},useDebugValue:D1,useDeferredValue:function(i){var t=Fi();return uE(t,Te.memoizedState,i)},useTransition:function(){var i=p0(Bd)[0],t=Fi().memoizedState;return[i,t]},useMutableSource:Kx,useSyncExternalStore:Qx,useId:hE,unstable_isNewReconciler:!1},OP={readContext:Ii,useCallback:lE,useContext:Ii,useEffect:M1,useImperativeHandle:aE,useInsertionEffect:sE,useLayoutEffect:rE,useMemo:cE,useReducer:g0,useRef:iE,useState:function(){return g0(Bd)},useDebugValue:D1,useDeferredValue:function(i){var t=Fi();return Te===null?t.memoizedState=i:uE(t,Te.memoizedState,i)},useTransition:function(){var i=g0(Bd)[0],t=Fi().memoizedState;return[i,t]},useMutableSource:Kx,useSyncExternalStore:Qx,useId:hE,unstable_isNewReconciler:!1};function Ui(i,t){if(i&&i.defaultProps){t=ae({},t),i=i.defaultProps;for(var e in i)t[e]===void 0&&(t[e]=i[e]);return t}return t}function rv(i,t,e,n){t=i.memoizedState,e=e(n,t),e=e==null?t:ae({},t,e),i.memoizedState=e,i.lanes===0&&(i.updateQueue.baseState=e)}var _y={isMounted:function(i){return(i=i._reactInternals)?nc(i)===i:!1},enqueueSetState:function(i,t,e){i=i._reactInternals;var n=bn(),s=oa(i),r=Br(n,s);r.payload=t,e!=null&&(r.callback=e),t=sa(i,r,s),t!==null&&(rs(t,i,s,n),Pg(t,i,s))},enqueueReplaceState:function(i,t,e){i=i._reactInternals;var n=bn(),s=oa(i),r=Br(n,s);r.tag=1,r.payload=t,e!=null&&(r.callback=e),t=sa(i,r,s),t!==null&&(rs(t,i,s,n),Pg(t,i,s))},enqueueForceUpdate:function(i,t){i=i._reactInternals;var e=bn(),n=oa(i),s=Br(e,n);s.tag=2,t!=null&&(s.callback=t),t=sa(i,s,n),t!==null&&(rs(t,i,n,e),Pg(t,i,n))}};function fb(i,t,e,n,s,r,o){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(n,r,o):t.prototype&&t.prototype.isPureReactComponent?!Rd(e,n)||!Rd(s,r):!0}function gE(i,t,e){var n=!1,s=ua,r=t.contextType;return typeof r=="object"&&r!==null?r=Ii(r):(s=Bn(t)?Xl:hn.current,n=t.contextTypes,r=(n=n!=null)?ph(i,s):ua),t=new t(e,r),i.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_y,i.stateNode=t,t._reactInternals=i,n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=r),t}function pb(i,t,e,n){i=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,n),t.state!==i&&_y.enqueueReplaceState(t,t.state,null)}function ov(i,t,e,n){var s=i.stateNode;s.props=e,s.state=i.memoizedState,s.refs={},_1(i);var r=t.contextType;typeof r=="object"&&r!==null?s.context=Ii(r):(r=Bn(t)?Xl:hn.current,s.context=ph(i,r)),s.state=i.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(rv(i,t,r,e),s.state=i.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&_y.enqueueReplaceState(s,s.state,null),Pm(i,e,s,n),s.state=i.memoizedState),typeof s.componentDidMount=="function"&&(i.flags|=4194308)}function vh(i,t){try{var e="",n=t;do e+=hk(n),n=n.return;while(n);var s=e}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:i,source:t,stack:s,digest:null}}function m0(i,t,e){return{value:i,source:null,stack:e??null,digest:t??null}}function av(i,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var BP=typeof WeakMap=="function"?WeakMap:Map;function mE(i,t,e){e=Br(-1,e),e.tag=3,e.payload={element:null};var n=t.value;return e.callback=function(){Nm||(Nm=!0,yv=n),av(i,t)},e}function yE(i,t,e){e=Br(-1,e),e.tag=3;var n=i.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;e.payload=function(){return n(s)},e.callback=function(){av(i,t)}}var r=i.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){av(i,t),typeof n!="function"&&(ra===null?ra=new Set([this]):ra.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),e}function gb(i,t,e){var n=i.pingCache;if(n===null){n=i.pingCache=new BP;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(e)||(s.add(e),i=JP.bind(null,i,t,e),t.then(i,i))}function mb(i){do{var t;if((t=i.tag===13)&&(t=i.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return i;i=i.return}while(i!==null);return null}function yb(i,t,e,n,s){return i.mode&1?(i.flags|=65536,i.lanes=s,i):(i===t?i.flags|=65536:(i.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=Br(-1,1),t.tag=2,sa(e,t,1))),e.lanes|=1),i)}var jP=qr.ReactCurrentOwner,Fn=!1;function wn(i,t,e,n){t.child=i===null?Wx(t,null,e,n):mh(t,i.child,e,n)}function vb(i,t,e,n,s){e=e.render;var r=t.ref;return Fc(t,s),n=L1(i,t,e,n,r,s),e=R1(),i!==null&&!Fn?(t.updateQueue=i.updateQueue,t.flags&=-2053,i.lanes&=~s,Vr(i,t,s)):(Zt&&e&&v1(t),t.flags|=1,wn(i,t,n,s),t.child)}function wb(i,t,e,n,s){if(i===null){var r=e.type;return typeof r=="function"&&!U1(r)&&r.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=r,vE(i,t,r,n,s)):(i=Ig(e.type,null,n,t,t.mode,s),i.ref=t.ref,i.return=t,t.child=i)}if(r=i.child,!(i.lanes&s)){var o=r.memoizedProps;if(e=e.compare,e=e!==null?e:Rd,e(o,n)&&i.ref===t.ref)return Vr(i,t,s)}return t.flags|=1,i=aa(r,n),i.ref=t.ref,i.return=t,t.child=i}function vE(i,t,e,n,s){if(i!==null){var r=i.memoizedProps;if(Rd(r,n)&&i.ref===t.ref)if(Fn=!1,t.pendingProps=n=r,(i.lanes&s)!==0)i.flags&131072&&(Fn=!0);else return t.lanes=i.lanes,Vr(i,t,s)}return lv(i,t,e,n,s)}function wE(i,t,e){var n=t.pendingProps,s=n.children,r=i!==null?i.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$t(Cc,ri),ri|=e;else{if(!(e&1073741824))return i=r!==null?r.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:i,cachePool:null,transitions:null},t.updateQueue=null,$t(Cc,ri),ri|=i,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=r!==null?r.baseLanes:e,$t(Cc,ri),ri|=n}else r!==null?(n=r.baseLanes|e,t.memoizedState=null):n=e,$t(Cc,ri),ri|=n;return wn(i,t,s,e),t.child}function AE(i,t){var e=t.ref;(i===null&&e!==null||i!==null&&i.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function lv(i,t,e,n,s){var r=Bn(e)?Xl:hn.current;return r=ph(t,r),Fc(t,s),e=L1(i,t,e,n,r,s),n=R1(),i!==null&&!Fn?(t.updateQueue=i.updateQueue,t.flags&=-2053,i.lanes&=~s,Vr(i,t,s)):(Zt&&n&&v1(t),t.flags|=1,wn(i,t,e,s),t.child)}function Ab(i,t,e,n,s){if(Bn(e)){var r=!0;Em(t)}else r=!1;if(Fc(t,s),t.stateNode===null)Mg(i,t),gE(t,e,n),ov(t,e,n,s),n=!0;else if(i===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=e.contextType;typeof u=="object"&&u!==null?u=Ii(u):(u=Bn(e)?Xl:hn.current,u=ph(t,u));var h=e.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&pb(t,o,n,u),to=!1;var f=t.memoizedState;o.state=f,Pm(t,n,o,s),c=t.memoizedState,l!==n||f!==c||On.current||to?(typeof h=="function"&&(rv(t,e,h,n),c=t.memoizedState),(l=to||fb(t,e,l,n,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Yx(i,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ui(t.type,l),o.props=u,d=t.pendingProps,f=o.context,c=e.contextType,typeof c=="object"&&c!==null?c=Ii(c):(c=Bn(e)?Xl:hn.current,c=ph(t,c));var p=e.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==c)&&pb(t,o,n,c),to=!1,f=t.memoizedState,o.state=f,Pm(t,n,o,s);var y=t.memoizedState;l!==d||f!==y||On.current||to?(typeof p=="function"&&(rv(t,e,p,n),y=t.memoizedState),(u=to||fb(t,e,u,n,f,y,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===i.memoizedProps&&f===i.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===i.memoizedProps&&f===i.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===i.memoizedProps&&f===i.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===i.memoizedProps&&f===i.memoizedState||(t.flags|=1024),n=!1)}return cv(i,t,e,n,r,s)}function cv(i,t,e,n,s,r){AE(i,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&rb(t,e,!1),Vr(i,t,r);n=t.stateNode,jP.current=t;var l=o&&typeof e.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,i!==null&&o?(t.child=mh(t,i.child,null,r),t.child=mh(t,null,l,r)):wn(i,t,l,r),t.memoizedState=n.state,s&&rb(t,e,!0),t.child}function bE(i){var t=i.stateNode;t.pendingContext?sb(i,t.pendingContext,t.pendingContext!==t.context):t.context&&sb(i,t.context,!1),C1(i,t.containerInfo)}function bb(i,t,e,n,s){return gh(),A1(s),t.flags|=256,wn(i,t,e,n),t.child}var uv={dehydrated:null,treeContext:null,retryLane:0};function hv(i){return{baseLanes:i,cachePool:null,transitions:null}}function SE(i,t,e){var n=t.pendingProps,s=ne.current,r=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=i!==null&&i.memoizedState===null?!1:(s&2)!==0),l?(r=!0,t.flags&=-129):(i===null||i.memoizedState!==null)&&(s|=1),$t(ne,s&1),i===null)return iv(t),i=t.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(t.mode&1?i.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,i=n.fallback,r?(n=t.mode,r=t.child,o={mode:"hidden",children:o},!(n&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=ky(o,n,0,null),i=Wl(i,n,e,null),r.return=t,i.return=t,r.sibling=i,t.child=r,t.child.memoizedState=hv(e),t.memoizedState=uv,i):N1(t,o));if(s=i.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return zP(i,t,o,n,l,s,e);if(r){r=n.fallback,o=t.mode,s=i.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=aa(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?r=aa(l,r):(r=Wl(r,o,e,null),r.flags|=2),r.return=t,n.return=t,n.sibling=r,t.child=n,n=r,r=t.child,o=i.child.memoizedState,o=o===null?hv(e):{baseLanes:o.baseLanes|e,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=i.childLanes&~e,t.memoizedState=uv,n}return r=i.child,i=r.sibling,n=aa(r,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=e),n.return=t,n.sibling=null,i!==null&&(e=t.deletions,e===null?(t.deletions=[i],t.flags|=16):e.push(i)),t.child=n,t.memoizedState=null,n}function N1(i,t){return t=ky({mode:"visible",children:t},i.mode,0,null),t.return=i,i.child=t}function ug(i,t,e,n){return n!==null&&A1(n),mh(t,i.child,null,e),i=N1(t,t.pendingProps.children),i.flags|=2,t.memoizedState=null,i}function zP(i,t,e,n,s,r,o){if(e)return t.flags&256?(t.flags&=-257,n=m0(Error(z(422))),ug(i,t,o,n)):t.memoizedState!==null?(t.child=i.child,t.flags|=128,null):(r=n.fallback,s=t.mode,n=ky({mode:"visible",children:n.children},s,0,null),r=Wl(r,s,o,null),r.flags|=2,n.return=t,r.return=t,n.sibling=r,t.child=n,t.mode&1&&mh(t,i.child,null,o),t.child.memoizedState=hv(o),t.memoizedState=uv,r);if(!(t.mode&1))return ug(i,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,r=Error(z(419)),n=m0(r,n,void 0),ug(i,t,o,n)}if(l=(o&i.childLanes)!==0,Fn||l){if(n=Be,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,$r(i,s),rs(n,i,s,-1))}return z1(),n=m0(Error(z(421))),ug(i,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=i.child,t=ZP.bind(null,i),s._reactRetry=t,null):(i=r.treeContext,li=ia(s.nextSibling),ci=t,Zt=!0,es=null,i!==null&&(ki[Pi++]=Fr,ki[Pi++]=Or,ki[Pi++]=Yl,Fr=i.id,Or=i.overflow,Yl=t),t=N1(t,n.children),t.flags|=4096,t)}function Sb(i,t,e){i.lanes|=t;var n=i.alternate;n!==null&&(n.lanes|=t),sv(i.return,t,e)}function y0(i,t,e,n,s){var r=i.memoizedState;r===null?i.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:e,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=e,r.tailMode=s)}function xE(i,t,e){var n=t.pendingProps,s=n.revealOrder,r=n.tail;if(wn(i,t,n.children,e),n=ne.current,n&2)n=n&1|2,t.flags|=128;else{if(i!==null&&i.flags&128)t:for(i=t.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Sb(i,e,t);else if(i.tag===19)Sb(i,e,t);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break t;for(;i.sibling===null;){if(i.return===null||i.return===t)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}n&=1}if($t(ne,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(e=t.child,s=null;e!==null;)i=e.alternate,i!==null&&Lm(i)===null&&(s=e),e=e.sibling;e=s,e===null?(s=t.child,t.child=null):(s=e.sibling,e.sibling=null),y0(t,!1,s,e,r);break;case"backwards":for(e=null,s=t.child,t.child=null;s!==null;){if(i=s.alternate,i!==null&&Lm(i)===null){t.child=s;break}i=s.sibling,s.sibling=e,e=s,s=i}y0(t,!0,e,null,r);break;case"together":y0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mg(i,t){!(t.mode&1)&&i!==null&&(i.alternate=null,t.alternate=null,t.flags|=2)}function Vr(i,t,e){if(i!==null&&(t.dependencies=i.dependencies),Kl|=t.lanes,!(e&t.childLanes))return null;if(i!==null&&t.child!==i.child)throw Error(z(153));if(t.child!==null){for(i=t.child,e=aa(i,i.pendingProps),t.child=e,e.return=t;i.sibling!==null;)i=i.sibling,e=e.sibling=aa(i,i.pendingProps),e.return=t;e.sibling=null}return t.child}function UP(i,t,e){switch(t.tag){case 3:bE(t),gh();break;case 5:qx(t);break;case 1:Bn(t.type)&&Em(t);break;case 4:C1(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;$t(Tm,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?($t(ne,ne.current&1),t.flags|=128,null):e&t.child.childLanes?SE(i,t,e):($t(ne,ne.current&1),i=Vr(i,t,e),i!==null?i.sibling:null);$t(ne,ne.current&1);break;case 19:if(n=(e&t.childLanes)!==0,i.flags&128){if(n)return xE(i,t,e);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$t(ne,ne.current),n)break;return null;case 22:case 23:return t.lanes=0,wE(i,t,e)}return Vr(i,t,e)}var EE,dv,_E,CE;EE=function(i,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)i.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};dv=function(){};_E=function(i,t,e,n){var s=i.memoizedProps;if(s!==n){i=t.stateNode,Ra(Ws.current);var r=null;switch(e){case"input":s=N0(i,s),n=N0(i,n),r=[];break;case"select":s=ae({},s,{value:void 0}),n=ae({},n,{value:void 0}),r=[];break;case"textarea":s=O0(i,s),n=O0(i,n),r=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(i.onclick=Sm)}j0(e,n);var o;e=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(e||(e={}),e[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ed.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(e||(e={}),e[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(e||(e={}),e[o]=c[o])}else e||(r||(r=[]),r.push(u,e)),e=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ed.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Xt("scroll",i),r||l===c||(r=[])):(r=r||[]).push(u,c))}e&&(r=r||[]).push("style",e);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};CE=function(i,t,e,n){e!==n&&(t.flags|=4)};function Ih(i,t){if(!Zt)switch(i.tailMode){case"hidden":t=i.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?i.tail=null:e.sibling=null;break;case"collapsed":e=i.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t||i.tail===null?i.tail=null:i.tail.sibling=null:n.sibling=null}}function Ze(i){var t=i.alternate!==null&&i.alternate.child===i.child,e=0,n=0;if(t)for(var s=i.child;s!==null;)e|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=i,s=s.sibling;else for(s=i.child;s!==null;)e|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=i,s=s.sibling;return i.subtreeFlags|=n,i.childLanes=e,t}function HP(i,t,e){var n=t.pendingProps;switch(w1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return Bn(t.type)&&xm(),Ze(t),null;case 3:return n=t.stateNode,yh(),qt(On),qt(hn),k1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(i===null||i.child===null)&&(lg(t)?t.flags|=4:i===null||i.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,es!==null&&(Av(es),es=null))),dv(i,t),Ze(t),null;case 5:T1(t);var s=Ra(Fd.current);if(e=t.type,i!==null&&t.stateNode!=null)_E(i,t,e,n,s),i.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(z(166));return Ze(t),null}if(i=Ra(Ws.current),lg(t)){n=t.stateNode,e=t.type;var r=t.memoizedProps;switch(n[Us]=t,n[Nd]=r,i=(t.mode&1)!==0,e){case"dialog":Xt("cancel",n),Xt("close",n);break;case"iframe":case"object":case"embed":Xt("load",n);break;case"video":case"audio":for(s=0;s<Vh.length;s++)Xt(Vh[s],n);break;case"source":Xt("error",n);break;case"img":case"image":case"link":Xt("error",n),Xt("load",n);break;case"details":Xt("toggle",n);break;case"input":RA(n,r),Xt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!r.multiple},Xt("invalid",n);break;case"textarea":DA(n,r),Xt("invalid",n)}j0(e,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];o==="children"?typeof l=="string"?n.textContent!==l&&(r.suppressHydrationWarning!==!0&&ag(n.textContent,l,i),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&ag(n.textContent,l,i),s=["children",""+l]):Ed.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Xt("scroll",n)}switch(e){case"input":Zp(n),MA(n,r,!0);break;case"textarea":Zp(n),NA(n);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(n.onclick=Sm)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=tx(e)),i==="http://www.w3.org/1999/xhtml"?e==="script"?(i=o.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof n.is=="string"?i=o.createElement(e,{is:n.is}):(i=o.createElement(e),e==="select"&&(o=i,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):i=o.createElementNS(i,e),i[Us]=t,i[Nd]=n,EE(i,t,!1,!1),t.stateNode=i;t:{switch(o=z0(e,n),e){case"dialog":Xt("cancel",i),Xt("close",i),s=n;break;case"iframe":case"object":case"embed":Xt("load",i),s=n;break;case"video":case"audio":for(s=0;s<Vh.length;s++)Xt(Vh[s],i);s=n;break;case"source":Xt("error",i),s=n;break;case"img":case"image":case"link":Xt("error",i),Xt("load",i),s=n;break;case"details":Xt("toggle",i),s=n;break;case"input":RA(i,n),s=N0(i,n),Xt("invalid",i);break;case"option":s=n;break;case"select":i._wrapperState={wasMultiple:!!n.multiple},s=ae({},n,{value:void 0}),Xt("invalid",i);break;case"textarea":DA(i,n),s=O0(i,n),Xt("invalid",i);break;default:s=n}j0(e,s),l=s;for(r in l)if(l.hasOwnProperty(r)){var c=l[r];r==="style"?ix(i,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ex(i,c)):r==="children"?typeof c=="string"?(e!=="textarea"||c!=="")&&_d(i,c):typeof c=="number"&&_d(i,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Ed.hasOwnProperty(r)?c!=null&&r==="onScroll"&&Xt("scroll",i):c!=null&&s1(i,r,c,o))}switch(e){case"input":Zp(i),MA(i,n,!1);break;case"textarea":Zp(i),NA(i);break;case"option":n.value!=null&&i.setAttribute("value",""+ca(n.value));break;case"select":i.multiple=!!n.multiple,r=n.value,r!=null?Mc(i,!!n.multiple,r,!1):n.defaultValue!=null&&Mc(i,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(i.onclick=Sm)}switch(e){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ze(t),null;case 6:if(i&&t.stateNode!=null)CE(i,t,i.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(z(166));if(e=Ra(Fd.current),Ra(Ws.current),lg(t)){if(n=t.stateNode,e=t.memoizedProps,n[Us]=t,(r=n.nodeValue!==e)&&(i=ci,i!==null))switch(i.tag){case 3:ag(n.nodeValue,e,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ag(n.nodeValue,e,(i.mode&1)!==0)}r&&(t.flags|=4)}else n=(e.nodeType===9?e:e.ownerDocument).createTextNode(n),n[Us]=t,t.stateNode=n}return Ze(t),null;case 13:if(qt(ne),n=t.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Zt&&li!==null&&t.mode&1&&!(t.flags&128))Vx(),gh(),t.flags|=98560,r=!1;else if(r=lg(t),n!==null&&n.dehydrated!==null){if(i===null){if(!r)throw Error(z(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(z(317));r[Us]=t}else gh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ze(t),r=!1}else es!==null&&(Av(es),es=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(n=n!==null,n!==(i!==null&&i.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(i===null||ne.current&1?ke===0&&(ke=3):z1())),t.updateQueue!==null&&(t.flags|=4),Ze(t),null);case 4:return yh(),dv(i,t),i===null&&Md(t.stateNode.containerInfo),Ze(t),null;case 10:return x1(t.type._context),Ze(t),null;case 17:return Bn(t.type)&&xm(),Ze(t),null;case 19:if(qt(ne),r=t.memoizedState,r===null)return Ze(t),null;if(n=(t.flags&128)!==0,o=r.rendering,o===null)if(n)Ih(r,!1);else{if(ke!==0||i!==null&&i.flags&128)for(i=t.child;i!==null;){if(o=Lm(i),o!==null){for(t.flags|=128,Ih(r,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=e,e=t.child;e!==null;)r=e,i=n,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e=e.sibling;return $t(ne,ne.current&1|2),t.child}i=i.sibling}r.tail!==null&&ye()>wh&&(t.flags|=128,n=!0,Ih(r,!1),t.lanes=4194304)}else{if(!n)if(i=Lm(o),i!==null){if(t.flags|=128,n=!0,e=i.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),Ih(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Zt)return Ze(t),null}else 2*ye()-r.renderingStartTime>wh&&e!==1073741824&&(t.flags|=128,n=!0,Ih(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e!==null?e.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=ye(),t.sibling=null,e=ne.current,$t(ne,n?e&1|2:e&1),t):(Ze(t),null);case 22:case 23:return j1(),n=t.memoizedState!==null,i!==null&&i.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ri&1073741824&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function $P(i,t){switch(w1(t),t.tag){case 1:return Bn(t.type)&&xm(),i=t.flags,i&65536?(t.flags=i&-65537|128,t):null;case 3:return yh(),qt(On),qt(hn),k1(),i=t.flags,i&65536&&!(i&128)?(t.flags=i&-65537|128,t):null;case 5:return T1(t),null;case 13:if(qt(ne),i=t.memoizedState,i!==null&&i.dehydrated!==null){if(t.alternate===null)throw Error(z(340));gh()}return i=t.flags,i&65536?(t.flags=i&-65537|128,t):null;case 19:return qt(ne),null;case 4:return yh(),null;case 10:return x1(t.type._context),null;case 22:case 23:return j1(),null;case 24:return null;default:return null}}var hg=!1,cn=!1,VP=typeof WeakSet=="function"?WeakSet:Set,Q=null;function _c(i,t){var e=i.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){fe(i,t,n)}else e.current=null}function fv(i,t,e){try{e()}catch(n){fe(i,t,n)}}var xb=!1;function GP(i,t){if(K0=wm,i=Rx(),y1(i)){if("selectionStart"in i)var e={start:i.selectionStart,end:i.selectionEnd};else t:{e=(e=i.ownerDocument)&&e.defaultView||window;var n=e.getSelection&&e.getSelection();if(n&&n.rangeCount!==0){e=n.anchorNode;var s=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{e.nodeType,r.nodeType}catch{e=null;break t}var o=0,l=-1,c=-1,u=0,h=0,d=i,f=null;e:for(;;){for(var p;d!==e||s!==0&&d.nodeType!==3||(l=o+s),d!==r||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===i)break e;if(f===e&&++u===s&&(l=o),f===r&&++h===n&&(c=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}e=l===-1||c===-1?null:{start:l,end:c}}else e=null}e=e||{start:0,end:0}}else e=null;for(Q0={focusedElem:i,selectionRange:e},wm=!1,Q=t;Q!==null;)if(t=Q,i=t.child,(t.subtreeFlags&1028)!==0&&i!==null)i.return=t,Q=i;else for(;Q!==null;){t=Q;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,x=y.memoizedState,g=t.stateNode,v=g.getSnapshotBeforeUpdate(t.elementType===t.type?w:Ui(t.type,w),x);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(E){fe(t,t.return,E)}if(i=t.sibling,i!==null){i.return=t.return,Q=i;break}Q=t.return}return y=xb,xb=!1,y}function wd(i,t,e){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&i)===i){var r=s.destroy;s.destroy=void 0,r!==void 0&&fv(t,e,r)}s=s.next}while(s!==n)}}function Cy(i,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&i)===i){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}}function pv(i){var t=i.ref;if(t!==null){var e=i.stateNode;switch(i.tag){case 5:i=e;break;default:i=e}typeof t=="function"?t(i):t.current=i}}function TE(i){var t=i.alternate;t!==null&&(i.alternate=null,TE(t)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(t=i.stateNode,t!==null&&(delete t[Us],delete t[Nd],delete t[tv],delete t[TP],delete t[kP])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function kE(i){return i.tag===5||i.tag===3||i.tag===4}function Eb(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||kE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function gv(i,t,e){var n=i.tag;if(n===5||n===6)i=i.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(i,t):e.insertBefore(i,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(i,e)):(t=e,t.appendChild(i)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=Sm));else if(n!==4&&(i=i.child,i!==null))for(gv(i,t,e),i=i.sibling;i!==null;)gv(i,t,e),i=i.sibling}function mv(i,t,e){var n=i.tag;if(n===5||n===6)i=i.stateNode,t?e.insertBefore(i,t):e.appendChild(i);else if(n!==4&&(i=i.child,i!==null))for(mv(i,t,e),i=i.sibling;i!==null;)mv(i,t,e),i=i.sibling}var We=null,ts=!1;function Qr(i,t,e){for(e=e.child;e!==null;)PE(i,t,e),e=e.sibling}function PE(i,t,e){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(vy,e)}catch{}switch(e.tag){case 5:cn||_c(e,t);case 6:var n=We,s=ts;We=null,Qr(i,t,e),We=n,ts=s,We!==null&&(ts?(i=We,e=e.stateNode,i.nodeType===8?i.parentNode.removeChild(e):i.removeChild(e)):We.removeChild(e.stateNode));break;case 18:We!==null&&(ts?(i=We,e=e.stateNode,i.nodeType===8?u0(i.parentNode,e):i.nodeType===1&&u0(i,e),Pd(i)):u0(We,e.stateNode));break;case 4:n=We,s=ts,We=e.stateNode.containerInfo,ts=!0,Qr(i,t,e),We=n,ts=s;break;case 0:case 11:case 14:case 15:if(!cn&&(n=e.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&fv(e,t,o),s=s.next}while(s!==n)}Qr(i,t,e);break;case 1:if(!cn&&(_c(e,t),n=e.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(l){fe(e,t,l)}Qr(i,t,e);break;case 21:Qr(i,t,e);break;case 22:e.mode&1?(cn=(n=cn)||e.memoizedState!==null,Qr(i,t,e),cn=n):Qr(i,t,e);break;default:Qr(i,t,e)}}function _b(i){var t=i.updateQueue;if(t!==null){i.updateQueue=null;var e=i.stateNode;e===null&&(e=i.stateNode=new VP),t.forEach(function(n){var s=tL.bind(null,i,n);e.has(n)||(e.add(n),n.then(s,s))})}}function Bi(i,t){var e=t.deletions;if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];try{var r=i,o=t,l=o;t:for(;l!==null;){switch(l.tag){case 5:We=l.stateNode,ts=!1;break t;case 3:We=l.stateNode.containerInfo,ts=!0;break t;case 4:We=l.stateNode.containerInfo,ts=!0;break t}l=l.return}if(We===null)throw Error(z(160));PE(r,o,s),We=null,ts=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){fe(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)LE(t,i),t=t.sibling}function LE(i,t){var e=i.alternate,n=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Bi(t,i),fs(i),n&4){try{wd(3,i,i.return),Cy(3,i)}catch(w){fe(i,i.return,w)}try{wd(5,i,i.return)}catch(w){fe(i,i.return,w)}}break;case 1:Bi(t,i),fs(i),n&512&&e!==null&&_c(e,e.return);break;case 5:if(Bi(t,i),fs(i),n&512&&e!==null&&_c(e,e.return),i.flags&32){var s=i.stateNode;try{_d(s,"")}catch(w){fe(i,i.return,w)}}if(n&4&&(s=i.stateNode,s!=null)){var r=i.memoizedProps,o=e!==null?e.memoizedProps:r,l=i.type,c=i.updateQueue;if(i.updateQueue=null,c!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&JS(s,r),z0(l,o);var u=z0(l,r);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?ix(s,d):h==="dangerouslySetInnerHTML"?ex(s,d):h==="children"?_d(s,d):s1(s,h,d,u)}switch(l){case"input":I0(s,r);break;case"textarea":ZS(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?Mc(s,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?Mc(s,!!r.multiple,r.defaultValue,!0):Mc(s,!!r.multiple,r.multiple?[]:"",!1))}s[Nd]=r}catch(w){fe(i,i.return,w)}}break;case 6:if(Bi(t,i),fs(i),n&4){if(i.stateNode===null)throw Error(z(162));s=i.stateNode,r=i.memoizedProps;try{s.nodeValue=r}catch(w){fe(i,i.return,w)}}break;case 3:if(Bi(t,i),fs(i),n&4&&e!==null&&e.memoizedState.isDehydrated)try{Pd(t.containerInfo)}catch(w){fe(i,i.return,w)}break;case 4:Bi(t,i),fs(i);break;case 13:Bi(t,i),fs(i),s=i.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(O1=ye())),n&4&&_b(i);break;case 22:if(h=e!==null&&e.memoizedState!==null,i.mode&1?(cn=(u=cn)||h,Bi(t,i),cn=u):Bi(t,i),fs(i),n&8192){if(u=i.memoizedState!==null,(i.stateNode.isHidden=u)&&!h&&i.mode&1)for(Q=i,h=i.child;h!==null;){for(d=Q=h;Q!==null;){switch(f=Q,p=f.child,f.tag){case 0:case 11:case 14:case 15:wd(4,f,f.return);break;case 1:_c(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,e=f.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(w){fe(n,e,w)}}break;case 5:_c(f,f.return);break;case 22:if(f.memoizedState!==null){Tb(d);continue}}p!==null?(p.return=f,Q=p):Tb(d)}h=h.sibling}t:for(h=null,d=i;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=nx("display",o))}catch(w){fe(i,i.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){fe(i,i.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===i)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break t;for(;d.sibling===null;){if(d.return===null||d.return===i)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Bi(t,i),fs(i),n&4&&_b(i);break;case 21:break;default:Bi(t,i),fs(i)}}function fs(i){var t=i.flags;if(t&2){try{t:{for(var e=i.return;e!==null;){if(kE(e)){var n=e;break t}e=e.return}throw Error(z(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(_d(s,""),n.flags&=-33);var r=Eb(i);mv(i,r,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Eb(i);gv(i,l,o);break;default:throw Error(z(161))}}catch(c){fe(i,i.return,c)}i.flags&=-3}t&4096&&(i.flags&=-4097)}function WP(i,t,e){Q=i,RE(i)}function RE(i,t,e){for(var n=(i.mode&1)!==0;Q!==null;){var s=Q,r=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||hg;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||cn;l=hg;var u=cn;if(hg=o,(cn=c)&&!u)for(Q=s;Q!==null;)o=Q,c=o.child,o.tag===22&&o.memoizedState!==null?kb(s):c!==null?(c.return=o,Q=c):kb(s);for(;r!==null;)Q=r,RE(r),r=r.sibling;Q=s,hg=l,cn=u}Cb(i)}else s.subtreeFlags&8772&&r!==null?(r.return=s,Q=r):Cb(i)}}function Cb(i){for(;Q!==null;){var t=Q;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:cn||Cy(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!cn)if(e===null)n.componentDidMount();else{var s=t.elementType===t.type?e.memoizedProps:Ui(t.type,e.memoizedProps);n.componentDidUpdate(s,e.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&ub(t,r,n);break;case 3:var o=t.updateQueue;if(o!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}ub(t,o,e)}break;case 5:var l=t.stateNode;if(e===null&&t.flags&4){e=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&e.focus();break;case"img":c.src&&(e.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Pd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}cn||t.flags&512&&pv(t)}catch(f){fe(t,t.return,f)}}if(t===i){Q=null;break}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}}function Tb(i){for(;Q!==null;){var t=Q;if(t===i){Q=null;break}var e=t.sibling;if(e!==null){e.return=t.return,Q=e;break}Q=t.return}}function kb(i){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{Cy(4,t)}catch(c){fe(t,e,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){fe(t,s,c)}}var r=t.return;try{pv(t)}catch(c){fe(t,r,c)}break;case 5:var o=t.return;try{pv(t)}catch(c){fe(t,o,c)}}}catch(c){fe(t,t.return,c)}if(t===i){Q=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Q=l;break}Q=t.return}}var XP=Math.ceil,Dm=qr.ReactCurrentDispatcher,I1=qr.ReactCurrentOwner,Di=qr.ReactCurrentBatchConfig,At=0,Be=null,Ae=null,Ke=0,ri=0,Cc=ma(0),ke=0,zd=null,Kl=0,Ty=0,F1=0,Ad=null,In=null,O1=0,wh=1/0,Js=null,Nm=!1,yv=null,ra=null,dg=!1,Zo=null,Im=0,bd=0,vv=null,Dg=-1,Ng=0;function bn(){return At&6?ye():Dg!==-1?Dg:Dg=ye()}function oa(i){return i.mode&1?At&2&&Ke!==0?Ke&-Ke:LP.transition!==null?(Ng===0&&(Ng=gx()),Ng):(i=kt,i!==0||(i=window.event,i=i===void 0?16:Sx(i.type)),i):1}function rs(i,t,e,n){if(50<bd)throw bd=0,vv=null,Error(z(185));Np(i,e,n),(!(At&2)||i!==Be)&&(i===Be&&(!(At&2)&&(Ty|=e),ke===4&&no(i,Ke)),jn(i,n),e===1&&At===0&&!(t.mode&1)&&(wh=ye()+500,xy&&ya()))}function jn(i,t){var e=i.callbackNode;Lk(i,t);var n=vm(i,i===Be?Ke:0);if(n===0)e!==null&&OA(e),i.callbackNode=null,i.callbackPriority=0;else if(t=n&-n,i.callbackPriority!==t){if(e!=null&&OA(e),t===1)i.tag===0?PP(Pb.bind(null,i)):Ux(Pb.bind(null,i)),_P(function(){!(At&6)&&ya()}),e=null;else{switch(mx(n)){case 1:e=c1;break;case 4:e=fx;break;case 16:e=ym;break;case 536870912:e=px;break;default:e=ym}e=jE(e,ME.bind(null,i))}i.callbackPriority=t,i.callbackNode=e}}function ME(i,t){if(Dg=-1,Ng=0,At&6)throw Error(z(327));var e=i.callbackNode;if(Oc()&&i.callbackNode!==e)return null;var n=vm(i,i===Be?Ke:0);if(n===0)return null;if(n&30||n&i.expiredLanes||t)t=Fm(i,n);else{t=n;var s=At;At|=2;var r=NE();(Be!==i||Ke!==t)&&(Js=null,wh=ye()+500,Gl(i,t));do try{KP();break}catch(l){DE(i,l)}while(!0);S1(),Dm.current=r,At=s,Ae!==null?t=0:(Be=null,Ke=0,t=ke)}if(t!==0){if(t===2&&(s=G0(i),s!==0&&(n=s,t=wv(i,s))),t===1)throw e=zd,Gl(i,0),no(i,n),jn(i,ye()),e;if(t===6)no(i,n);else{if(s=i.current.alternate,!(n&30)&&!YP(s)&&(t=Fm(i,n),t===2&&(r=G0(i),r!==0&&(n=r,t=wv(i,r))),t===1))throw e=zd,Gl(i,0),no(i,n),jn(i,ye()),e;switch(i.finishedWork=s,i.finishedLanes=n,t){case 0:case 1:throw Error(z(345));case 2:Sa(i,In,Js);break;case 3:if(no(i,n),(n&130023424)===n&&(t=O1+500-ye(),10<t)){if(vm(i,0)!==0)break;if(s=i.suspendedLanes,(s&n)!==n){bn(),i.pingedLanes|=i.suspendedLanes&s;break}i.timeoutHandle=Z0(Sa.bind(null,i,In,Js),t);break}Sa(i,In,Js);break;case 4:if(no(i,n),(n&4194240)===n)break;for(t=i.eventTimes,s=-1;0<n;){var o=31-ss(n);r=1<<o,o=t[o],o>s&&(s=o),n&=~r}if(n=s,n=ye()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*XP(n/1960))-n,10<n){i.timeoutHandle=Z0(Sa.bind(null,i,In,Js),n);break}Sa(i,In,Js);break;case 5:Sa(i,In,Js);break;default:throw Error(z(329))}}}return jn(i,ye()),i.callbackNode===e?ME.bind(null,i):null}function wv(i,t){var e=Ad;return i.current.memoizedState.isDehydrated&&(Gl(i,t).flags|=256),i=Fm(i,t),i!==2&&(t=In,In=e,t!==null&&Av(t)),i}function Av(i){In===null?In=i:In.push.apply(In,i)}function YP(i){for(var t=i;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var n=0;n<e.length;n++){var s=e[n],r=s.getSnapshot;s=s.value;try{if(!as(r(),s))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===i)break;for(;t.sibling===null;){if(t.return===null||t.return===i)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function no(i,t){for(t&=~F1,t&=~Ty,i.suspendedLanes|=t,i.pingedLanes&=~t,i=i.expirationTimes;0<t;){var e=31-ss(t),n=1<<e;i[e]=-1,t&=~n}}function Pb(i){if(At&6)throw Error(z(327));Oc();var t=vm(i,0);if(!(t&1))return jn(i,ye()),null;var e=Fm(i,t);if(i.tag!==0&&e===2){var n=G0(i);n!==0&&(t=n,e=wv(i,n))}if(e===1)throw e=zd,Gl(i,0),no(i,t),jn(i,ye()),e;if(e===6)throw Error(z(345));return i.finishedWork=i.current.alternate,i.finishedLanes=t,Sa(i,In,Js),jn(i,ye()),null}function B1(i,t){var e=At;At|=1;try{return i(t)}finally{At=e,At===0&&(wh=ye()+500,xy&&ya())}}function Ql(i){Zo!==null&&Zo.tag===0&&!(At&6)&&Oc();var t=At;At|=1;var e=Di.transition,n=kt;try{if(Di.transition=null,kt=1,i)return i()}finally{kt=n,Di.transition=e,At=t,!(At&6)&&ya()}}function j1(){ri=Cc.current,qt(Cc)}function Gl(i,t){i.finishedWork=null,i.finishedLanes=0;var e=i.timeoutHandle;if(e!==-1&&(i.timeoutHandle=-1,EP(e)),Ae!==null)for(e=Ae.return;e!==null;){var n=e;switch(w1(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&xm();break;case 3:yh(),qt(On),qt(hn),k1();break;case 5:T1(n);break;case 4:yh();break;case 13:qt(ne);break;case 19:qt(ne);break;case 10:x1(n.type._context);break;case 22:case 23:j1()}e=e.return}if(Be=i,Ae=i=aa(i.current,null),Ke=ri=t,ke=0,zd=null,F1=Ty=Kl=0,In=Ad=null,La!==null){for(t=0;t<La.length;t++)if(e=La[t],n=e.interleaved,n!==null){e.interleaved=null;var s=n.next,r=e.pending;if(r!==null){var o=r.next;r.next=s,n.next=o}e.pending=n}La=null}return i}function DE(i,t){do{var e=Ae;try{if(S1(),Lg.current=Mm,Rm){for(var n=re.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Rm=!1}if(ql=0,Oe=Te=re=null,vd=!1,Od=0,I1.current=null,e===null||e.return===null){ke=1,zd=t,Ae=null;break}t:{var r=i,o=e.return,l=e,c=t;if(t=Ke,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=mb(o);if(p!==null){p.flags&=-257,yb(p,o,l,r,t),p.mode&1&&gb(r,u,t),t=p,c=u;var y=t.updateQueue;if(y===null){var w=new Set;w.add(c),t.updateQueue=w}else y.add(c);break t}else{if(!(t&1)){gb(r,u,t),z1();break t}c=Error(z(426))}}else if(Zt&&l.mode&1){var x=mb(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),yb(x,o,l,r,t),A1(vh(c,l));break t}}r=c=vh(c,l),ke!==4&&(ke=2),Ad===null?Ad=[r]:Ad.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var g=mE(r,c,t);cb(r,g);break t;case 1:l=c;var v=r.type,b=r.stateNode;if(!(r.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ra===null||!ra.has(b)))){r.flags|=65536,t&=-t,r.lanes|=t;var E=yE(r,l,t);cb(r,E);break t}}r=r.return}while(r!==null)}FE(e)}catch(_){t=_,Ae===e&&e!==null&&(Ae=e=e.return);continue}break}while(!0)}function NE(){var i=Dm.current;return Dm.current=Mm,i===null?Mm:i}function z1(){(ke===0||ke===3||ke===2)&&(ke=4),Be===null||!(Kl&268435455)&&!(Ty&268435455)||no(Be,Ke)}function Fm(i,t){var e=At;At|=2;var n=NE();(Be!==i||Ke!==t)&&(Js=null,Gl(i,t));do try{qP();break}catch(s){DE(i,s)}while(!0);if(S1(),At=e,Dm.current=n,Ae!==null)throw Error(z(261));return Be=null,Ke=0,ke}function qP(){for(;Ae!==null;)IE(Ae)}function KP(){for(;Ae!==null&&!bk();)IE(Ae)}function IE(i){var t=BE(i.alternate,i,ri);i.memoizedProps=i.pendingProps,t===null?FE(i):Ae=t,I1.current=null}function FE(i){var t=i;do{var e=t.alternate;if(i=t.return,t.flags&32768){if(e=$P(e,t),e!==null){e.flags&=32767,Ae=e;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{ke=6,Ae=null;return}}else if(e=HP(e,t,ri),e!==null){Ae=e;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=i}while(t!==null);ke===0&&(ke=5)}function Sa(i,t,e){var n=kt,s=Di.transition;try{Di.transition=null,kt=1,QP(i,t,e,n)}finally{Di.transition=s,kt=n}return null}function QP(i,t,e,n){do Oc();while(Zo!==null);if(At&6)throw Error(z(327));e=i.finishedWork;var s=i.finishedLanes;if(e===null)return null;if(i.finishedWork=null,i.finishedLanes=0,e===i.current)throw Error(z(177));i.callbackNode=null,i.callbackPriority=0;var r=e.lanes|e.childLanes;if(Rk(i,r),i===Be&&(Ae=Be=null,Ke=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||dg||(dg=!0,jE(ym,function(){return Oc(),null})),r=(e.flags&15990)!==0,e.subtreeFlags&15990||r){r=Di.transition,Di.transition=null;var o=kt;kt=1;var l=At;At|=4,I1.current=null,GP(i,e),LE(e,i),yP(Q0),wm=!!K0,Q0=K0=null,i.current=e,WP(e),Sk(),At=l,kt=o,Di.transition=r}else i.current=e;if(dg&&(dg=!1,Zo=i,Im=s),r=i.pendingLanes,r===0&&(ra=null),_k(e.stateNode),jn(i,ye()),t!==null)for(n=i.onRecoverableError,e=0;e<t.length;e++)s=t[e],n(s.value,{componentStack:s.stack,digest:s.digest});if(Nm)throw Nm=!1,i=yv,yv=null,i;return Im&1&&i.tag!==0&&Oc(),r=i.pendingLanes,r&1?i===vv?bd++:(bd=0,vv=i):bd=0,ya(),null}function Oc(){if(Zo!==null){var i=mx(Im),t=Di.transition,e=kt;try{if(Di.transition=null,kt=16>i?16:i,Zo===null)var n=!1;else{if(i=Zo,Zo=null,Im=0,At&6)throw Error(z(331));var s=At;for(At|=4,Q=i.current;Q!==null;){var r=Q,o=r.child;if(Q.flags&16){var l=r.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Q=u;Q!==null;){var h=Q;switch(h.tag){case 0:case 11:case 15:wd(8,h,r)}var d=h.child;if(d!==null)d.return=h,Q=d;else for(;Q!==null;){h=Q;var f=h.sibling,p=h.return;if(TE(h),h===u){Q=null;break}if(f!==null){f.return=p,Q=f;break}Q=p}}}var y=r.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}Q=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,Q=o;else t:for(;Q!==null;){if(r=Q,r.flags&2048)switch(r.tag){case 0:case 11:case 15:wd(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,Q=g;break t}Q=r.return}}var v=i.current;for(Q=v;Q!==null;){o=Q;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Q=b;else t:for(o=v;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Cy(9,l)}}catch(_){fe(l,l.return,_)}if(l===o){Q=null;break t}var E=l.sibling;if(E!==null){E.return=l.return,Q=E;break t}Q=l.return}}if(At=s,ya(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(vy,i)}catch{}n=!0}return n}finally{kt=e,Di.transition=t}}return!1}function Lb(i,t,e){t=vh(e,t),t=mE(i,t,1),i=sa(i,t,1),t=bn(),i!==null&&(Np(i,1,t),jn(i,t))}function fe(i,t,e){if(i.tag===3)Lb(i,i,e);else for(;t!==null;){if(t.tag===3){Lb(t,i,e);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ra===null||!ra.has(n))){i=vh(e,i),i=yE(t,i,1),t=sa(t,i,1),i=bn(),t!==null&&(Np(t,1,i),jn(t,i));break}}t=t.return}}function JP(i,t,e){var n=i.pingCache;n!==null&&n.delete(t),t=bn(),i.pingedLanes|=i.suspendedLanes&e,Be===i&&(Ke&e)===e&&(ke===4||ke===3&&(Ke&130023424)===Ke&&500>ye()-O1?Gl(i,0):F1|=e),jn(i,t)}function OE(i,t){t===0&&(i.mode&1?(t=ng,ng<<=1,!(ng&130023424)&&(ng=4194304)):t=1);var e=bn();i=$r(i,t),i!==null&&(Np(i,t,e),jn(i,e))}function ZP(i){var t=i.memoizedState,e=0;t!==null&&(e=t.retryLane),OE(i,e)}function tL(i,t){var e=0;switch(i.tag){case 13:var n=i.stateNode,s=i.memoizedState;s!==null&&(e=s.retryLane);break;case 19:n=i.stateNode;break;default:throw Error(z(314))}n!==null&&n.delete(t),OE(i,e)}var BE;BE=function(i,t,e){if(i!==null)if(i.memoizedProps!==t.pendingProps||On.current)Fn=!0;else{if(!(i.lanes&e)&&!(t.flags&128))return Fn=!1,UP(i,t,e);Fn=!!(i.flags&131072)}else Fn=!1,Zt&&t.flags&1048576&&Hx(t,Cm,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Mg(i,t),i=t.pendingProps;var s=ph(t,hn.current);Fc(t,e),s=L1(null,t,n,i,s,e);var r=R1();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bn(n)?(r=!0,Em(t)):r=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_1(t),s.updater=_y,t.stateNode=s,s._reactInternals=t,ov(t,n,i,e),t=cv(null,t,n,!0,r,e)):(t.tag=0,Zt&&r&&v1(t),wn(null,t,s,e),t=t.child),t;case 16:n=t.elementType;t:{switch(Mg(i,t),i=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=nL(n),i=Ui(n,i),s){case 0:t=lv(null,t,n,i,e);break t;case 1:t=Ab(null,t,n,i,e);break t;case 11:t=vb(null,t,n,i,e);break t;case 14:t=wb(null,t,n,Ui(n.type,i),e);break t}throw Error(z(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ui(n,s),lv(i,t,n,s,e);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ui(n,s),Ab(i,t,n,s,e);case 3:t:{if(bE(t),i===null)throw Error(z(387));n=t.pendingProps,r=t.memoizedState,s=r.element,Yx(i,t),Pm(t,n,null,e);var o=t.memoizedState;if(n=o.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){s=vh(Error(z(423)),t),t=bb(i,t,n,e,s);break t}else if(n!==s){s=vh(Error(z(424)),t),t=bb(i,t,n,e,s);break t}else for(li=ia(t.stateNode.containerInfo.firstChild),ci=t,Zt=!0,es=null,e=Wx(t,null,n,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(gh(),n===s){t=Vr(i,t,e);break t}wn(i,t,n,e)}t=t.child}return t;case 5:return qx(t),i===null&&iv(t),n=t.type,s=t.pendingProps,r=i!==null?i.memoizedProps:null,o=s.children,J0(n,s)?o=null:r!==null&&J0(n,r)&&(t.flags|=32),AE(i,t),wn(i,t,o,e),t.child;case 6:return i===null&&iv(t),null;case 13:return SE(i,t,e);case 4:return C1(t,t.stateNode.containerInfo),n=t.pendingProps,i===null?t.child=mh(t,null,n,e):wn(i,t,n,e),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ui(n,s),vb(i,t,n,s,e);case 7:return wn(i,t,t.pendingProps,e),t.child;case 8:return wn(i,t,t.pendingProps.children,e),t.child;case 12:return wn(i,t,t.pendingProps.children,e),t.child;case 10:t:{if(n=t.type._context,s=t.pendingProps,r=t.memoizedProps,o=s.value,$t(Tm,n._currentValue),n._currentValue=o,r!==null)if(as(r.value,o)){if(r.children===s.children&&!On.current){t=Vr(i,t,e);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var l=r.dependencies;if(l!==null){o=r.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(r.tag===1){c=Br(-1,e&-e),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=e,c=r.alternate,c!==null&&(c.lanes|=e),sv(r.return,e,t),l.lanes|=e;break}c=c.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(z(341));o.lanes|=e,l=o.alternate,l!==null&&(l.lanes|=e),sv(o,e,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}wn(i,t,s.children,e),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Fc(t,e),s=Ii(s),n=n(s),t.flags|=1,wn(i,t,n,e),t.child;case 14:return n=t.type,s=Ui(n,t.pendingProps),s=Ui(n.type,s),wb(i,t,n,s,e);case 15:return vE(i,t,t.type,t.pendingProps,e);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ui(n,s),Mg(i,t),t.tag=1,Bn(n)?(i=!0,Em(t)):i=!1,Fc(t,e),gE(t,n,s),ov(t,n,s,e),cv(null,t,n,!0,i,e);case 19:return xE(i,t,e);case 22:return wE(i,t,e)}throw Error(z(156,t.tag))};function jE(i,t){return dx(i,t)}function eL(i,t,e,n){this.tag=i,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(i,t,e,n){return new eL(i,t,e,n)}function U1(i){return i=i.prototype,!(!i||!i.isReactComponent)}function nL(i){if(typeof i=="function")return U1(i)?1:0;if(i!=null){if(i=i.$$typeof,i===o1)return 11;if(i===a1)return 14}return 2}function aa(i,t){var e=i.alternate;return e===null?(e=Mi(i.tag,t,i.key,i.mode),e.elementType=i.elementType,e.type=i.type,e.stateNode=i.stateNode,e.alternate=i,i.alternate=e):(e.pendingProps=t,e.type=i.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=i.flags&14680064,e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=i.sibling,e.index=i.index,e.ref=i.ref,e}function Ig(i,t,e,n,s,r){var o=2;if(n=i,typeof i=="function")U1(i)&&(o=1);else if(typeof i=="string")o=5;else t:switch(i){case mc:return Wl(e.children,s,r,t);case r1:o=8,s|=8;break;case L0:return i=Mi(12,e,t,s|2),i.elementType=L0,i.lanes=r,i;case R0:return i=Mi(13,e,t,s),i.elementType=R0,i.lanes=r,i;case M0:return i=Mi(19,e,t,s),i.elementType=M0,i.lanes=r,i;case qS:return ky(e,s,r,t);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case XS:o=10;break t;case YS:o=9;break t;case o1:o=11;break t;case a1:o=14;break t;case Zr:o=16,n=null;break t}throw Error(z(130,i==null?i:typeof i,""))}return t=Mi(o,e,t,s),t.elementType=i,t.type=n,t.lanes=r,t}function Wl(i,t,e,n){return i=Mi(7,i,n,t),i.lanes=e,i}function ky(i,t,e,n){return i=Mi(22,i,n,t),i.elementType=qS,i.lanes=e,i.stateNode={isHidden:!1},i}function v0(i,t,e){return i=Mi(6,i,null,t),i.lanes=e,i}function w0(i,t,e){return t=Mi(4,i.children!==null?i.children:[],i.key,t),t.lanes=e,t.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},t}function iL(i,t,e,n,s){this.tag=t,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zy(0),this.expirationTimes=Zy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zy(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function H1(i,t,e,n,s,r,o,l,c){return i=new iL(i,t,e,l,c),t===1?(t=1,r===!0&&(t|=8)):t=0,r=Mi(3,null,null,t),i.current=r,r.stateNode=i,r.memoizedState={element:n,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},_1(r),i}function sL(i,t,e){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gc,key:n==null?null:""+n,children:i,containerInfo:t,implementation:e}}function zE(i){if(!i)return ua;i=i._reactInternals;t:{if(nc(i)!==i||i.tag!==1)throw Error(z(170));var t=i;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(Bn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(z(171))}if(i.tag===1){var e=i.type;if(Bn(e))return zx(i,e,t)}return t}function UE(i,t,e,n,s,r,o,l,c){return i=H1(e,n,!0,i,s,r,o,l,c),i.context=zE(null),e=i.current,n=bn(),s=oa(e),r=Br(n,s),r.callback=t??null,sa(e,r,s),i.current.lanes=s,Np(i,s,n),jn(i,n),i}function Py(i,t,e,n){var s=t.current,r=bn(),o=oa(s);return e=zE(e),t.context===null?t.context=e:t.pendingContext=e,t=Br(r,o),t.payload={element:i},n=n===void 0?null:n,n!==null&&(t.callback=n),i=sa(s,t,o),i!==null&&(rs(i,s,o,r),Pg(i,s,o)),o}function Om(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Rb(i,t){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var e=i.retryLane;i.retryLane=e!==0&&e<t?e:t}}function $1(i,t){Rb(i,t),(i=i.alternate)&&Rb(i,t)}function rL(){return null}var HE=typeof reportError=="function"?reportError:function(i){console.error(i)};function V1(i){this._internalRoot=i}Ly.prototype.render=V1.prototype.render=function(i){var t=this._internalRoot;if(t===null)throw Error(z(409));Py(i,t,null,null)};Ly.prototype.unmount=V1.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var t=i.containerInfo;Ql(function(){Py(null,i,null,null)}),t[Hr]=null}};function Ly(i){this._internalRoot=i}Ly.prototype.unstable_scheduleHydration=function(i){if(i){var t=wx();i={blockedOn:null,target:i,priority:t};for(var e=0;e<eo.length&&t!==0&&t<eo[e].priority;e++);eo.splice(e,0,i),e===0&&bx(i)}};function G1(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Ry(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Mb(){}function oL(i,t,e,n,s){if(s){if(typeof n=="function"){var r=n;n=function(){var u=Om(o);r.call(u)}}var o=UE(t,n,i,0,null,!1,!1,"",Mb);return i._reactRootContainer=o,i[Hr]=o.current,Md(i.nodeType===8?i.parentNode:i),Ql(),o}for(;s=i.lastChild;)i.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Om(c);l.call(u)}}var c=H1(i,0,!1,null,null,!1,!1,"",Mb);return i._reactRootContainer=c,i[Hr]=c.current,Md(i.nodeType===8?i.parentNode:i),Ql(function(){Py(t,c,e,n)}),c}function My(i,t,e,n,s){var r=e._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var l=s;s=function(){var c=Om(o);l.call(c)}}Py(t,o,i,s)}else o=oL(e,t,i,s,n);return Om(o)}yx=function(i){switch(i.tag){case 3:var t=i.stateNode;if(t.current.memoizedState.isDehydrated){var e=$h(t.pendingLanes);e!==0&&(u1(t,e|1),jn(t,ye()),!(At&6)&&(wh=ye()+500,ya()))}break;case 13:Ql(function(){var n=$r(i,1);if(n!==null){var s=bn();rs(n,i,1,s)}}),$1(i,1)}};h1=function(i){if(i.tag===13){var t=$r(i,134217728);if(t!==null){var e=bn();rs(t,i,134217728,e)}$1(i,134217728)}};vx=function(i){if(i.tag===13){var t=oa(i),e=$r(i,t);if(e!==null){var n=bn();rs(e,i,t,n)}$1(i,t)}};wx=function(){return kt};Ax=function(i,t){var e=kt;try{return kt=i,t()}finally{kt=e}};H0=function(i,t,e){switch(t){case"input":if(I0(i,e),t=e.name,e.type==="radio"&&t!=null){for(e=i;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var n=e[t];if(n!==i&&n.form===i.form){var s=Sy(n);if(!s)throw Error(z(90));QS(n),I0(n,s)}}}break;case"textarea":ZS(i,e);break;case"select":t=e.value,t!=null&&Mc(i,!!e.multiple,t,!1)}};ox=B1;ax=Ql;var aL={usingClientEntryPoint:!1,Events:[Fp,Ac,Sy,sx,rx,B1]},Fh={findFiberByHostInstance:Pa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lL={bundleType:Fh.bundleType,version:Fh.version,rendererPackageName:Fh.rendererPackageName,rendererConfig:Fh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=ux(i),i===null?null:i.stateNode},findFiberByHostInstance:Fh.findFiberByHostInstance||rL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fg.isDisabled&&fg.supportsFiber)try{vy=fg.inject(lL),Gs=fg}catch{}}fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aL;fi.createPortal=function(i,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!G1(t))throw Error(z(200));return sL(i,t,null,e)};fi.createRoot=function(i,t){if(!G1(i))throw Error(z(299));var e=!1,n="",s=HE;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=H1(i,1,!1,null,null,e,!1,n,s),i[Hr]=t.current,Md(i.nodeType===8?i.parentNode:i),new V1(t)};fi.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var t=i._reactInternals;if(t===void 0)throw typeof i.render=="function"?Error(z(188)):(i=Object.keys(i).join(","),Error(z(268,i)));return i=ux(t),i=i===null?null:i.stateNode,i};fi.flushSync=function(i){return Ql(i)};fi.hydrate=function(i,t,e){if(!Ry(t))throw Error(z(200));return My(null,i,t,!0,e)};fi.hydrateRoot=function(i,t,e){if(!G1(i))throw Error(z(405));var n=e!=null&&e.hydratedSources||null,s=!1,r="",o=HE;if(e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),t=UE(t,null,i,1,e??null,s,!1,r,o),i[Hr]=t.current,Md(i),n)for(i=0;i<n.length;i++)e=n[i],s=e._getVersion,s=s(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,s]:t.mutableSourceEagerHydrationData.push(e,s);return new Ly(t)};fi.render=function(i,t,e){if(!Ry(t))throw Error(z(200));return My(null,i,t,!1,e)};fi.unmountComponentAtNode=function(i){if(!Ry(i))throw Error(z(40));return i._reactRootContainer?(Ql(function(){My(null,null,i,!1,function(){i._reactRootContainer=null,i[Hr]=null})}),!0):!1};fi.unstable_batchedUpdates=B1;fi.unstable_renderSubtreeIntoContainer=function(i,t,e,n){if(!Ry(e))throw Error(z(200));if(i==null||i._reactInternals===void 0)throw Error(z(38));return My(i,t,e,!1,n)};fi.version="18.3.1-next-f1338f8080-20240426";function $E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($E)}catch(i){console.error(i)}}$E(),$S.exports=fi;var cL=$S.exports,VE,Db=cL;VE=Db.createRoot,Db.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bm(){return Bm=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Bm.apply(this,arguments)}var Ma;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Ma||(Ma={}));const Nb="popstate";function uL(i){i===void 0&&(i={});function t(n,s){let{pathname:r,search:o,hash:l}=n.location;return bv("",{pathname:r,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(n,s){return typeof s=="string"?s:WE(s)}return dL(t,e,null,i)}function GE(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function hL(){return Math.random().toString(36).substr(2,8)}function Ib(i,t){return{usr:i.state,key:i.key,idx:t}}function bv(i,t,e,n){return e===void 0&&(e=null),Bm({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof t=="string"?XE(t):t,{state:e,key:t&&t.key||n||hL()})}function WE(i){let{pathname:t="/",search:e="",hash:n=""}=i;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function XE(i){let t={};if(i){let e=i.indexOf("#");e>=0&&(t.hash=i.substr(e),i=i.substr(0,e));let n=i.indexOf("?");n>=0&&(t.search=i.substr(n),i=i.substr(0,n)),i&&(t.pathname=i)}return t}function dL(i,t,e,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:r=!1}=n,o=s.history,l=Ma.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(Bm({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){l=Ma.Pop;let x=h(),g=x==null?null:x-u;u=x,c&&c({action:l,location:w.location,delta:g})}function f(x,g){l=Ma.Push;let v=bv(w.location,x,g);u=h()+1;let b=Ib(v,u),E=w.createHref(v);try{o.pushState(b,"",E)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(E)}r&&c&&c({action:l,location:w.location,delta:1})}function p(x,g){l=Ma.Replace;let v=bv(w.location,x,g);u=h();let b=Ib(v,u),E=w.createHref(v);o.replaceState(b,"",E),r&&c&&c({action:l,location:w.location,delta:0})}function y(x){let g=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof x=="string"?x:WE(x);return v=v.replace(/ $/,"%20"),GE(g,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,g)}let w={get action(){return l},get location(){return i(s,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Nb,d),c=x,()=>{s.removeEventListener(Nb,d),c=null}},createHref(x){return t(s,x)},createURL:y,encodeLocation(x){let g=y(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:p,go(x){return o.go(x)}};return w}var Fb;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(Fb||(Fb={}));function fL(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=i.charAt(e);return n&&n!=="/"?null:i.slice(e)||"/"}const YE=["post","put","patch","delete"];new Set(YE);const pL=["get",...YE];new Set(pL);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sv(){return Sv=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Sv.apply(this,arguments)}const gL=F.createContext(null),qE=F.createContext(null);function mL(){return F.useContext(qE)!=null}const Ob={};function yL(i,t){Ob[t]||(Ob[t]=!0,console.warn(t))}const Bb=(i,t,e)=>yL(i," React Router Future Flag Warning: "+t+". "+("You can use the `"+i+"` future flag to opt-in early. ")+("For more information, see "+e+"."));function vL(i,t){i!=null&&i.v7_startTransition||Bb("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(i!=null&&i.v7_relativeSplatPath)&&!t&&Bb("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function wL(i){let{basename:t="/",children:e=null,location:n,navigationType:s=Ma.Pop,navigator:r,static:o=!1,future:l}=i;mL()&&GE(!1);let c=t.replace(/^\/*/,"/"),u=F.useMemo(()=>({basename:c,navigator:r,static:o,future:Sv({v7_relativeSplatPath:!1},l)}),[c,l,r,o]);typeof n=="string"&&(n=XE(n));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:y="default"}=n,w=F.useMemo(()=>{let x=fL(h,c);return x==null?null:{location:{pathname:x,search:d,hash:f,state:p,key:y},navigationType:s}},[c,h,d,f,p,y,s]);return w==null?null:F.createElement(gL.Provider,{value:u},F.createElement(qE.Provider,{children:e,value:w}))}new Promise(()=>{});/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const AL="6";try{window.__reactRouterVersion=AL}catch{}const bL="startTransition",jb=JT[bL];function SL(i){let{basename:t,children:e,future:n,window:s}=i,r=F.useRef();r.current==null&&(r.current=uL({window:s,v5Compat:!0}));let o=r.current,[l,c]=F.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},h=F.useCallback(d=>{u&&jb?jb(()=>c(d)):c(d)},[c,u]);return F.useLayoutEffect(()=>o.listen(h),[o,h]),F.useEffect(()=>vL(n),[n]),F.createElement(wL,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:o,future:n})}var zb;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(zb||(zb={}));var Ub;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(Ub||(Ub={}));function Dy(i,t,e,n){return new(e||(e=Promise))(function(s,r){function o(u){try{c(n.next(u))}catch(h){r(h)}}function l(u){try{c(n.throw(u))}catch(h){r(h)}}function c(u){var h;u.done?s(u.value):(h=u.value,h instanceof e?h:new e(function(d){d(h)})).then(o,l)}c((n=n.apply(i,[])).next())})}function la(i,t){var e,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function l(c){return function(u){return function(h){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(s=2&h[0]?n.return:h[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,h[1])).done)return s;switch(n=0,s&&(h=[2&h[0],s.value]),h[0]){case 0:case 1:s=h;break;case 4:return o.label++,{value:h[1],done:!1};case 5:o.label++,n=h[1],h=[0];continue;case 7:h=o.ops.pop(),o.trys.pop();continue;default:if(s=o.trys,!((s=s.length>0&&s[s.length-1])||h[0]!==6&&h[0]!==2)){o=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){o.label=h[1];break}if(h[0]===6&&o.label<s[1]){o.label=s[1],s=h;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(h);break}s[2]&&o.ops.pop(),o.trys.pop();continue}h=t.call(i,o)}catch(d){h=[6,d],n=0}finally{e=s=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([c,u])}}}function xv(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ns(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var n,s,r=e.call(i),o=[];try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(l){s={error:l}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return o}function Hs(i,t,e){if(arguments.length===2)for(var n,s=0,r=t.length;s<r;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return i.concat(n||Array.prototype.slice.call(t))}function Hb(i,t,e,n,s){for(var r=[],o=5;o<arguments.length;o++)r[o-5]=arguments[o];return Dy(this,void 0,void 0,function(){var l,c,u,h,d,f;return la(this,function(p){switch(p.label){case 0:p.trys.push([0,12,13,14]),l=xv(r),c=l.next(),p.label=1;case 1:if(c.done)return[3,11];switch(u=c.value,typeof u){case"string":return[3,2];case"number":return[3,4];case"function":return[3,6]}return[3,8];case 2:return[4,xL(i,t,u,e,n,s)];case 3:return p.sent(),[3,10];case 4:return[4,KE(u)];case 5:return p.sent(),[3,10];case 6:return[4,u.apply(void 0,Hs([i,t,e,n,s],ns(r),!1))];case 7:return p.sent(),[3,10];case 8:return[4,u];case 9:p.sent(),p.label=10;case 10:return c=l.next(),[3,1];case 11:return[3,14];case 12:return h=p.sent(),d={error:h},[3,14];case 13:try{c&&!c.done&&(f=l.return)&&f.call(l)}finally{if(d)throw d.error}return[7];case 14:return[2]}})})}function xL(i,t,e,n,s,r){return Dy(this,void 0,void 0,function(){var o,l;return la(this,function(c){switch(c.label){case 0:return o=i.textContent||"",l=function(u,h){var d=ns(h).slice(0);return Hs(Hs([],ns(u),!1),[NaN],!1).findIndex(function(f,p){return d[p]!==f})}(o,e),[4,EL(i,Hs(Hs([],ns(CL(o,t,l)),!1),ns(_L(e,t,l)),!1),n,s,r)];case 1:return c.sent(),[2]}})})}function KE(i){return Dy(this,void 0,void 0,function(){return la(this,function(t){switch(t.label){case 0:return[4,new Promise(function(e){return setTimeout(e,i)})];case 1:return t.sent(),[2]}})})}function EL(i,t,e,n,s){return Dy(this,void 0,void 0,function(){var r,o,l,c,u,h,d,f,p,y,w,x,g;return la(this,function(v){switch(v.label){case 0:if(r=t,s){for(o=0,l=1;l<t.length;l++)if(c=ns([t[l-1],t[l]],2),u=c[0],(h=c[1]).length>u.length||h===""){o=l;break}r=t.slice(o,t.length)}v.label=1;case 1:v.trys.push([1,6,7,8]),d=xv(function(b){var E,_,C,T,k,P,L;return la(this,function(M){switch(M.label){case 0:E=function(I){return la(this,function($){switch($.label){case 0:return[4,{op:function(N){return requestAnimationFrame(function(){return N.textContent=I})},opCode:function(N){var W=N.textContent||"";return I===""||W.length>I.length?"DELETE":"WRITING"}}];case 1:return $.sent(),[2]}})},M.label=1;case 1:M.trys.push([1,6,7,8]),_=xv(b),C=_.next(),M.label=2;case 2:return C.done?[3,5]:(T=C.value,[5,E(T)]);case 3:M.sent(),M.label=4;case 4:return C=_.next(),[3,2];case 5:return[3,8];case 6:return k=M.sent(),P={error:k},[3,8];case 7:try{C&&!C.done&&(L=_.return)&&L.call(_)}finally{if(P)throw P.error}return[7];case 8:return[2]}})}(r)),f=d.next(),v.label=2;case 2:return f.done?[3,5]:(p=f.value,y=p.opCode(i)==="WRITING"?e+e*(Math.random()-.5):n+n*(Math.random()-.5),p.op(i),[4,KE(y)]);case 3:v.sent(),v.label=4;case 4:return f=d.next(),[3,2];case 5:return[3,8];case 6:return w=v.sent(),x={error:w},[3,8];case 7:try{f&&!f.done&&(g=d.return)&&g.call(d)}finally{if(x)throw x.error}return[7];case 8:return[2]}})})}function _L(i,t,e){var n,s;return e===void 0&&(e=0),la(this,function(r){switch(r.label){case 0:n=t(i),s=n.length,r.label=1;case 1:return e<s?[4,n.slice(0,++e).join("")]:[3,3];case 2:return r.sent(),[3,1];case 3:return[2]}})}function CL(i,t,e){var n,s;return e===void 0&&(e=0),la(this,function(r){switch(r.label){case 0:n=t(i),s=n.length,r.label=1;case 1:return s>e?[4,n.slice(0,--s).join("")]:[3,3];case 2:return r.sent(),[3,1];case 3:return[2]}})}var TL="index-module_type__E-SaG";(function(i,t){t===void 0&&(t={});var e=t.insertAt;if(typeof document<"u"){var n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s),s.styleSheet?s.styleSheet.cssText=i:s.appendChild(document.createTextNode(i))}})(`.index-module_type__E-SaG::after {
  content: '|';
  animation: index-module_cursor__PQg0P 1.1s infinite step-start;
}

@keyframes index-module_cursor__PQg0P {
  50% {
    opacity: 0;
  }
}
`);F.memo(F.forwardRef(function(i,t){var e=i.sequence,n=i.repeat,s=i.className,r=i.speed,o=r===void 0?40:r,l=i.deletionSpeed,c=i.omitDeletionAnimation,u=c!==void 0&&c,h=i.preRenderFirstString,d=h!==void 0&&h,f=i.wrapper,p=f===void 0?"span":f,y=i.splitter,w=y===void 0?function(B){return Hs([],ns(B),!1)}:y,x=i.cursor,g=x===void 0||x,v=i.style,b=function(B,Z){var G={};for(var tt in B)Object.prototype.hasOwnProperty.call(B,tt)&&Z.indexOf(tt)<0&&(G[tt]=B[tt]);if(B!=null&&typeof Object.getOwnPropertySymbols=="function"){var ct=0;for(tt=Object.getOwnPropertySymbols(B);ct<tt.length;ct++)Z.indexOf(tt[ct])<0&&Object.prototype.propertyIsEnumerable.call(B,tt[ct])&&(G[tt[ct]]=B[tt[ct]])}return G}(i,["sequence","repeat","className","speed","deletionSpeed","omitDeletionAnimation","preRenderFirstString","wrapper","splitter","cursor","style"]),E=b["aria-label"],_=b["aria-hidden"],C=b.role;l||(l=o);var T=new Array(2).fill(40);[o,l].forEach(function(B,Z){switch(typeof B){case"number":T[Z]=Math.abs(B-100);break;case"object":var G=B.type,tt=B.value;if(typeof tt!="number")break;G==="keyStrokeDelayInMs"&&(T[Z]=tt)}});var k,P,L,M,I,$,N=T[0],W=T[1],j=function(B,Z){Z===void 0&&(Z=null);var G=F.useRef(Z);return F.useEffect(function(){B&&(typeof B=="function"?B(G.current):B.current=G.current)},[B]),G}(t),U=TL;k=s?"".concat(g?U+" ":"").concat(s):g?U:"",P=F.useRef(function(){var B,Z=e;n===1/0?B=Hb:typeof n=="number"&&(Z=Array(1+n).fill(e).flat());var G=B?Hs(Hs([],ns(Z),!1),[B],!1):Hs([],ns(Z),!1);return Hb.apply(void 0,Hs([j.current,w,N,W,u],ns(G),!1)),function(){j.current}}),L=F.useRef(),M=F.useRef(!1),I=F.useRef(!1),$=ns(F.useState(0),2)[1],M.current&&(I.current=!0),F.useEffect(function(){return M.current||(L.current=P.current(),M.current=!0),$(function(B){return B+1}),function(){I.current&&L.current&&L.current()}},[]);var D=p,H=d?e.find(function(B){return typeof B=="string"})||"":null;return k0.createElement(D,{"aria-hidden":_,"aria-label":E,role:C,style:v,className:k,children:E?k0.createElement("span",{"aria-hidden":"true",ref:j,children:H}):H,ref:E?void 0:j})}),function(i,t){return!0});const kL="/NurArdiansah/assets/cvardi1-B81T03UX.pdf",PL="/NurArdiansah/assets/ardi-C6mvvLTi.png";function LL(i){return Object.prototype.toString.call(i)==="[object Object]"}function $b(i){return LL(i)||Array.isArray(i)}function RL(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function W1(i,t){const e=Object.keys(i),n=Object.keys(t);if(e.length!==n.length)return!1;const s=JSON.stringify(Object.keys(i.breakpoints||{})),r=JSON.stringify(Object.keys(t.breakpoints||{}));return s!==r?!1:e.every(o=>{const l=i[o],c=t[o];return typeof l=="function"?`${l}`==`${c}`:!$b(l)||!$b(c)?l===c:W1(l,c)})}function Vb(i){return i.concat().sort((t,e)=>t.name>e.name?1:-1).map(t=>t.options)}function ML(i,t){if(i.length!==t.length)return!1;const e=Vb(i),n=Vb(t);return e.every((s,r)=>{const o=n[r];return W1(s,o)})}function X1(i){return typeof i=="number"}function Ev(i){return typeof i=="string"}function Ny(i){return typeof i=="boolean"}function Gb(i){return Object.prototype.toString.call(i)==="[object Object]"}function se(i){return Math.abs(i)}function Y1(i){return Math.sign(i)}function Sd(i,t){return se(i-t)}function DL(i,t){if(i===0||t===0||se(i)<=se(t))return 0;const e=Sd(se(i),se(t));return se(e/i)}function NL(i){return Math.round(i*100)/100}function Ud(i){return Hd(i).map(Number)}function os(i){return i[Bp(i)]}function Bp(i){return Math.max(0,i.length-1)}function q1(i,t){return t===Bp(i)}function Wb(i,t=0){return Array.from(Array(i),(e,n)=>t+n)}function Hd(i){return Object.keys(i)}function QE(i,t){return[i,t].reduce((e,n)=>(Hd(n).forEach(s=>{const r=e[s],o=n[s],l=Gb(r)&&Gb(o);e[s]=l?QE(r,o):o}),e),{})}function _v(i,t){return typeof t.MouseEvent<"u"&&i instanceof t.MouseEvent}function IL(i,t){const e={start:n,center:s,end:r};function n(){return 0}function s(c){return r(c)/2}function r(c){return t-c}function o(c,u){return Ev(i)?e[i](c):i(t,c,u)}return{measure:o}}function $d(){let i=[];function t(s,r,o,l={passive:!0}){let c;if("addEventListener"in s)s.addEventListener(r,o,l),c=()=>s.removeEventListener(r,o,l);else{const u=s;u.addListener(o),c=()=>u.removeListener(o)}return i.push(c),n}function e(){i=i.filter(s=>s())}const n={add:t,clear:e};return n}function FL(i,t,e,n){const s=$d(),r=1e3/60;let o=null,l=0,c=0;function u(){s.add(i,"visibilitychange",()=>{i.hidden&&y()})}function h(){p(),s.clear()}function d(x){if(!c)return;o||(o=x,e(),e());const g=x-o;for(o=x,l+=g;l>=r;)e(),l-=r;const v=l/r;n(v),c&&(c=t.requestAnimationFrame(d))}function f(){c||(c=t.requestAnimationFrame(d))}function p(){t.cancelAnimationFrame(c),o=null,l=0,c=0}function y(){o=null,l=0}return{init:u,destroy:h,start:f,stop:p,update:e,render:n}}function OL(i,t){const e=t==="rtl",n=i==="y",s=n?"y":"x",r=n?"x":"y",o=!n&&e?-1:1,l=h(),c=d();function u(y){const{height:w,width:x}=y;return n?w:x}function h(){return n?"top":e?"right":"left"}function d(){return n?"bottom":e?"left":"right"}function f(y){return y*o}return{scroll:s,cross:r,startEdge:l,endEdge:c,measureSize:u,direction:f}}function Jl(i=0,t=0){const e=se(i-t);function n(u){return u<i}function s(u){return u>t}function r(u){return n(u)||s(u)}function o(u){return r(u)?n(u)?i:t:u}function l(u){return e?u-e*Math.ceil((u-t)/e):u}return{length:e,max:t,min:i,constrain:o,reachedAny:r,reachedMax:s,reachedMin:n,removeOffset:l}}function JE(i,t,e){const{constrain:n}=Jl(0,i),s=i+1;let r=o(t);function o(f){return e?se((s+f)%s):n(f)}function l(){return r}function c(f){return r=o(f),d}function u(f){return h().set(l()+f)}function h(){return JE(i,l(),e)}const d={get:l,set:c,add:u,clone:h};return d}function BL(i,t,e,n,s,r,o,l,c,u,h,d,f,p,y,w,x,g,v){const{cross:b,direction:E}=i,_=["INPUT","SELECT","TEXTAREA"],C={passive:!1},T=$d(),k=$d(),P=Jl(50,225).constrain(p.measure(20)),L={mouse:300,touch:400},M={mouse:500,touch:600},I=y?43:25;let $=!1,N=0,W=0,j=!1,U=!1,D=!1,H=!1;function B(K){if(!v)return;function it(mt){(Ny(v)||v(K,mt))&&_t(mt)}const ot=t;T.add(ot,"dragstart",mt=>mt.preventDefault(),C).add(ot,"touchmove",()=>{},C).add(ot,"touchend",()=>{}).add(ot,"touchstart",it).add(ot,"mousedown",it).add(ot,"touchcancel",Gt).add(ot,"contextmenu",Gt).add(ot,"click",Se,!0)}function Z(){T.clear(),k.clear()}function G(){const K=H?e:t;k.add(K,"touchmove",rt,C).add(K,"touchend",Gt).add(K,"mousemove",rt,C).add(K,"mouseup",Gt)}function tt(K){const it=K.nodeName||"";return _.includes(it)}function ct(){return(y?M:L)[H?"mouse":"touch"]}function Pt(K,it){const ot=d.add(Y1(K)*-1),mt=h.byDistance(K,!y).distance;return y||se(K)<P?mt:x&&it?mt*.5:h.byIndex(ot.get(),0).distance}function _t(K){const it=_v(K,n);H=it,D=y&&it&&!K.buttons&&$,$=Sd(s.get(),o.get())>=2,!(it&&K.button!==0)&&(tt(K.target)||(j=!0,r.pointerDown(K),u.useFriction(0).useDuration(0),s.set(o),G(),N=r.readPoint(K),W=r.readPoint(K,b),f.emit("pointerDown")))}function rt(K){if(!_v(K,n)&&K.touches.length>=2)return Gt(K);const ot=r.readPoint(K),mt=r.readPoint(K,b),Wt=Sd(ot,N),Lt=Sd(mt,W);if(!U&&!H&&(!K.cancelable||(U=Wt>Lt,!U)))return Gt(K);const Ys=r.pointerMove(K);Wt>w&&(D=!0),u.useFriction(.3).useDuration(.75),l.start(),s.add(E(Ys)),K.preventDefault()}function Gt(K){const ot=h.byDistance(0,!1).index!==d.get(),mt=r.pointerUp(K)*ct(),Wt=Pt(E(mt),ot),Lt=DL(mt,Wt),Ys=I-10*Lt,us=g+Lt/50;U=!1,j=!1,k.clear(),u.useDuration(Ys).useFriction(us),c.distance(Wt,!y),H=!1,f.emit("pointerUp")}function Se(K){D&&(K.stopPropagation(),K.preventDefault(),D=!1)}function Ut(){return j}return{init:B,destroy:Z,pointerDown:Ut}}function jL(i,t){let n,s;function r(d){return d.timeStamp}function o(d,f){const y=`client${(f||i.scroll)==="x"?"X":"Y"}`;return(_v(d,t)?d:d.touches[0])[y]}function l(d){return n=d,s=d,o(d)}function c(d){const f=o(d)-o(s),p=r(d)-r(n)>170;return s=d,p&&(n=d),f}function u(d){if(!n||!s)return 0;const f=o(s)-o(n),p=r(d)-r(n),y=r(d)-r(s)>170,w=f/p;return p&&!y&&se(w)>.1?w:0}return{pointerDown:l,pointerMove:c,pointerUp:u,readPoint:o}}function zL(){function i(e){const{offsetTop:n,offsetLeft:s,offsetWidth:r,offsetHeight:o}=e;return{top:n,right:s+r,bottom:n+o,left:s,width:r,height:o}}return{measure:i}}function UL(i){function t(n){return i*(n/100)}return{measure:t}}function HL(i,t,e,n,s,r,o){const l=[i].concat(n);let c,u,h=[],d=!1;function f(x){return s.measureSize(o.measure(x))}function p(x){if(!r)return;u=f(i),h=n.map(f);function g(v){for(const b of v){if(d)return;const E=b.target===i,_=n.indexOf(b.target),C=E?u:h[_],T=f(E?i:n[_]);if(se(T-C)>=.5){x.reInit(),t.emit("resize");break}}}c=new ResizeObserver(v=>{(Ny(r)||r(x,v))&&g(v)}),e.requestAnimationFrame(()=>{l.forEach(v=>c.observe(v))})}function y(){d=!0,c&&c.disconnect()}return{init:p,destroy:y}}function $L(i,t,e,n,s,r){let o=0,l=0,c=s,u=r,h=i.get(),d=0;function f(){const C=n.get()-i.get(),T=!c;let k=0;return T?(o=0,e.set(n),i.set(n),k=C):(e.set(i),o+=C/c,o*=u,h+=o,i.add(o),k=h-d),l=Y1(k),d=h,_}function p(){const C=n.get()-t.get();return se(C)<.001}function y(){return c}function w(){return l}function x(){return o}function g(){return b(s)}function v(){return E(r)}function b(C){return c=C,_}function E(C){return u=C,_}const _={direction:w,duration:y,velocity:x,seek:f,settled:p,useBaseFriction:v,useBaseDuration:g,useFriction:E,useDuration:b};return _}function VL(i,t,e,n,s){const r=s.measure(10),o=s.measure(50),l=Jl(.1,.99);let c=!1;function u(){return!(c||!i.reachedAny(e.get())||!i.reachedAny(t.get()))}function h(p){if(!u())return;const y=i.reachedMin(t.get())?"min":"max",w=se(i[y]-t.get()),x=e.get()-t.get(),g=l.constrain(w/o);e.subtract(x*g),!p&&se(x)<r&&(e.set(i.constrain(e.get())),n.useDuration(25).useBaseFriction())}function d(p){c=!p}return{shouldConstrain:u,constrain:h,toggleActive:d}}function GL(i,t,e,n,s){const r=Jl(-t+i,0),o=d(),l=h(),c=f();function u(y,w){return Sd(y,w)<=1}function h(){const y=o[0],w=os(o),x=o.lastIndexOf(y),g=o.indexOf(w)+1;return Jl(x,g)}function d(){return e.map((y,w)=>{const{min:x,max:g}=r,v=r.constrain(y),b=!w,E=q1(e,w);return b?g:E||u(x,v)?x:u(g,v)?g:v}).map(y=>parseFloat(y.toFixed(3)))}function f(){if(t<=i+s)return[r.max];if(n==="keepSnaps")return o;const{min:y,max:w}=l;return o.slice(y,w)}return{snapsContained:c,scrollContainLimit:l}}function WL(i,t,e){const n=t[0],s=e?n-i:os(t);return{limit:Jl(s,n)}}function XL(i,t,e,n){const r=t.min+.1,o=t.max+.1,{reachedMin:l,reachedMax:c}=Jl(r,o);function u(f){return f===1?c(e.get()):f===-1?l(e.get()):!1}function h(f){if(!u(f))return;const p=i*(f*-1);n.forEach(y=>y.add(p))}return{loop:h}}function YL(i){const{max:t,length:e}=i;function n(r){const o=r-t;return e?o/-e:0}return{get:n}}function qL(i,t,e,n,s){const{startEdge:r,endEdge:o}=i,{groupSlides:l}=s,c=d().map(t.measure),u=f(),h=p();function d(){return l(n).map(w=>os(w)[o]-w[0][r]).map(se)}function f(){return n.map(w=>e[r]-w[r]).map(w=>-se(w))}function p(){return l(u).map(w=>w[0]).map((w,x)=>w+c[x])}return{snaps:u,snapsAligned:h}}function KL(i,t,e,n,s,r){const{groupSlides:o}=s,{min:l,max:c}=n,u=h();function h(){const f=o(r),p=!i||t==="keepSnaps";return e.length===1?[r]:p?f:f.slice(l,c).map((y,w,x)=>{const g=!w,v=q1(x,w);if(g){const b=os(x[0])+1;return Wb(b)}if(v){const b=Bp(r)-os(x)[0]+1;return Wb(b,os(x)[0])}return y})}return{slideRegistry:u}}function QL(i,t,e,n,s){const{reachedAny:r,removeOffset:o,constrain:l}=n;function c(y){return y.concat().sort((w,x)=>se(w)-se(x))[0]}function u(y){const w=i?o(y):l(y),x=t.map((v,b)=>({diff:h(v-w,0),index:b})).sort((v,b)=>se(v.diff)-se(b.diff)),{index:g}=x[0];return{index:g,distance:w}}function h(y,w){const x=[y,y+e,y-e];if(!i)return y;if(!w)return c(x);const g=x.filter(v=>Y1(v)===w);return g.length?c(g):os(x)-e}function d(y,w){const x=t[y]-s.get(),g=h(x,w);return{index:y,distance:g}}function f(y,w){const x=s.get()+y,{index:g,distance:v}=u(x),b=!i&&r(x);if(!w||b)return{index:g,distance:y};const E=t[g]-v,_=y+h(E,0);return{index:g,distance:_}}return{byDistance:f,byIndex:d,shortcut:h}}function JL(i,t,e,n,s,r,o){function l(d){const f=d.distance,p=d.index!==t.get();r.add(f),f&&(n.duration()?i.start():(i.update(),i.render(1),i.update())),p&&(e.set(t.get()),t.set(d.index),o.emit("select"))}function c(d,f){const p=s.byDistance(d,f);l(p)}function u(d,f){const p=t.clone().set(d),y=s.byIndex(p.get(),f);l(y)}return{distance:c,index:u}}function ZL(i,t,e,n,s,r,o,l){const c={passive:!0,capture:!0};let u=0;function h(p){if(!l)return;function y(w){if(new Date().getTime()-u>10)return;o.emit("slideFocusStart"),i.scrollLeft=0;const v=e.findIndex(b=>b.includes(w));X1(v)&&(s.useDuration(0),n.index(v,0),o.emit("slideFocus"))}r.add(document,"keydown",d,!1),t.forEach((w,x)=>{r.add(w,"focus",g=>{(Ny(l)||l(p,g))&&y(x)},c)})}function d(p){p.code==="Tab"&&(u=new Date().getTime())}return{init:h}}function Gh(i){let t=i;function e(){return t}function n(c){t=o(c)}function s(c){t+=o(c)}function r(c){t-=o(c)}function o(c){return X1(c)?c:c.get()}return{get:e,set:n,add:s,subtract:r}}function ZE(i,t){const e=i.scroll==="x"?o:l,n=t.style;let s=null,r=!1;function o(f){return`translate3d(${f}px,0px,0px)`}function l(f){return`translate3d(0px,${f}px,0px)`}function c(f){if(r)return;const p=NL(i.direction(f));p!==s&&(n.transform=e(p),s=p)}function u(f){r=!f}function h(){r||(n.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:h,to:c,toggleActive:u}}function tR(i,t,e,n,s,r,o,l,c){const h=Ud(s),d=Ud(s).reverse(),f=g().concat(v());function p(T,k){return T.reduce((P,L)=>P-s[L],k)}function y(T,k){return T.reduce((P,L)=>p(P,k)>0?P.concat([L]):P,[])}function w(T){return r.map((k,P)=>({start:k-n[P]+.5+T,end:k+t-.5+T}))}function x(T,k,P){const L=w(k);return T.map(M=>{const I=P?0:-e,$=P?e:0,N=P?"end":"start",W=L[M][N];return{index:M,loopPoint:W,slideLocation:Gh(-1),translate:ZE(i,c[M]),target:()=>l.get()>W?I:$}})}function g(){const T=o[0],k=y(d,T);return x(k,e,!1)}function v(){const T=t-o[0]-1,k=y(h,T);return x(k,-e,!0)}function b(){return f.every(({index:T})=>{const k=h.filter(P=>P!==T);return p(k,t)<=.1})}function E(){f.forEach(T=>{const{target:k,translate:P,slideLocation:L}=T,M=k();M!==L.get()&&(P.to(M),L.set(M))})}function _(){f.forEach(T=>T.translate.clear())}return{canLoop:b,clear:_,loop:E,loopPoints:f}}function eR(i,t,e){let n,s=!1;function r(c){if(!e)return;function u(h){for(const d of h)if(d.type==="childList"){c.reInit(),t.emit("slidesChanged");break}}n=new MutationObserver(h=>{s||(Ny(e)||e(c,h))&&u(h)}),n.observe(i,{childList:!0})}function o(){n&&n.disconnect(),s=!0}return{init:r,destroy:o}}function nR(i,t,e,n){const s={};let r=null,o=null,l,c=!1;function u(){l=new IntersectionObserver(y=>{c||(y.forEach(w=>{const x=t.indexOf(w.target);s[x]=w}),r=null,o=null,e.emit("slidesInView"))},{root:i.parentElement,threshold:n}),t.forEach(y=>l.observe(y))}function h(){l&&l.disconnect(),c=!0}function d(y){return Hd(s).reduce((w,x)=>{const g=parseInt(x),{isIntersecting:v}=s[g];return(y&&v||!y&&!v)&&w.push(g),w},[])}function f(y=!0){if(y&&r)return r;if(!y&&o)return o;const w=d(y);return y&&(r=w),y||(o=w),w}return{init:u,destroy:h,get:f}}function iR(i,t,e,n,s,r){const{measureSize:o,startEdge:l,endEdge:c}=i,u=e[0]&&s,h=y(),d=w(),f=e.map(o),p=x();function y(){if(!u)return 0;const v=e[0];return se(t[l]-v[l])}function w(){if(!u)return 0;const v=r.getComputedStyle(os(n));return parseFloat(v.getPropertyValue(`margin-${c}`))}function x(){return e.map((v,b,E)=>{const _=!b,C=q1(E,b);return _?f[b]+h:C?f[b]+d:E[b+1][l]-v[l]}).map(se)}return{slideSizes:f,slideSizesWithGaps:p,startGap:h,endGap:d}}function sR(i,t,e,n,s,r,o,l,c){const{startEdge:u,endEdge:h,direction:d}=i,f=X1(e);function p(g,v){return Ud(g).filter(b=>b%v===0).map(b=>g.slice(b,b+v))}function y(g){return g.length?Ud(g).reduce((v,b,E)=>{const _=os(v)||0,C=_===0,T=b===Bp(g),k=s[u]-r[_][u],P=s[u]-r[b][h],L=!n&&C?d(o):0,M=!n&&T?d(l):0,I=se(P-M-(k+L));return E&&I>t+c&&v.push(b),T&&v.push(g.length),v},[]).map((v,b,E)=>{const _=Math.max(E[b-1]||0);return g.slice(_,v)}):[]}function w(g){return f?p(g,e):y(g)}return{groupSlides:w}}function rR(i,t,e,n,s,r,o){const{align:l,axis:c,direction:u,startIndex:h,loop:d,duration:f,dragFree:p,dragThreshold:y,inViewThreshold:w,slidesToScroll:x,skipSnaps:g,containScroll:v,watchResize:b,watchSlides:E,watchDrag:_,watchFocus:C}=r,T=2,k=zL(),P=k.measure(t),L=e.map(k.measure),M=OL(c,u),I=M.measureSize(P),$=UL(I),N=IL(l,I),W=!d&&!!v,j=d||!!v,{slideSizes:U,slideSizesWithGaps:D,startGap:H,endGap:B}=iR(M,P,L,e,j,s),Z=sR(M,I,x,d,P,L,H,B,T),{snaps:G,snapsAligned:tt}=qL(M,N,P,L,Z),ct=-os(G)+os(D),{snapsContained:Pt,scrollContainLimit:_t}=GL(I,ct,tt,v,T),rt=W?Pt:tt,{limit:Gt}=WL(ct,rt,d),Se=JE(Bp(rt),h,d),Ut=Se.clone(),nt=Ud(e),K=({dragHandler:dn,scrollBody:wa,scrollBounds:Wy,options:{loop:Kp}})=>{Kp||Wy.constrain(dn.pointerDown()),wa.seek()},it=({scrollBody:dn,translate:wa,location:Wy,offsetLocation:Kp,previousLocation:CT,scrollLooper:TT,slideLooper:kT,dragHandler:PT,animation:LT,eventHandler:wA,scrollBounds:RT,options:{loop:AA}},bA)=>{const SA=dn.settled(),MT=!RT.shouldConstrain(),xA=AA?SA:SA&&MT;xA&&!PT.pointerDown()&&(LT.stop(),wA.emit("settle")),xA||wA.emit("scroll");const DT=Wy.get()*bA+CT.get()*(1-bA);Kp.set(DT),AA&&(TT.loop(dn.direction()),kT.loop()),wa.to(Kp.get())},ot=FL(n,s,()=>K(ds),dn=>it(ds,dn)),mt=.68,Wt=rt[Se.get()],Lt=Gh(Wt),Ys=Gh(Wt),us=Gh(Wt),Oi=Gh(Wt),va=$L(Lt,us,Ys,Oi,f,mt),Kr=QL(d,rt,ct,Gt,Oi),kh=JL(ot,Se,Ut,va,Kr,Oi,o),Xp=YL(Gt),Yp=$d(),Gy=nR(t,e,o,w),{slideRegistry:qp}=KL(W,v,rt,_t,Z,nt),hs=ZL(i,e,qp,kh,va,Yp,o,C),ds={ownerDocument:n,ownerWindow:s,eventHandler:o,containerRect:P,slideRects:L,animation:ot,axis:M,dragHandler:BL(M,i,n,s,Oi,jL(M,s),Lt,ot,kh,va,Kr,Se,o,$,p,y,g,mt,_),eventStore:Yp,percentOfView:$,index:Se,indexPrevious:Ut,limit:Gt,location:Lt,offsetLocation:us,previousLocation:Ys,options:r,resizeHandler:HL(t,o,s,e,M,b,k),scrollBody:va,scrollBounds:VL(Gt,us,Oi,va,$),scrollLooper:XL(ct,Gt,us,[Lt,us,Ys,Oi]),scrollProgress:Xp,scrollSnapList:rt.map(Xp.get),scrollSnaps:rt,scrollTarget:Kr,scrollTo:kh,slideLooper:tR(M,I,ct,U,D,G,rt,us,e),slideFocus:hs,slidesHandler:eR(t,o,E),slidesInView:Gy,slideIndexes:nt,slideRegistry:qp,slidesToScroll:Z,target:Oi,translate:ZE(M,t)};return ds}function oR(){let i={},t;function e(u){t=u}function n(u){return i[u]||[]}function s(u){return n(u).forEach(h=>h(t,u)),c}function r(u,h){return i[u]=n(u).concat([h]),c}function o(u,h){return i[u]=n(u).filter(d=>d!==h),c}function l(){i={}}const c={init:e,emit:s,off:o,on:r,clear:l};return c}const aR={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function lR(i){function t(r,o){return QE(r,o||{})}function e(r){const o=r.breakpoints||{},l=Hd(o).filter(c=>i.matchMedia(c).matches).map(c=>o[c]).reduce((c,u)=>t(c,u),{});return t(r,l)}function n(r){return r.map(o=>Hd(o.breakpoints||{})).reduce((o,l)=>o.concat(l),[]).map(i.matchMedia)}return{mergeOptions:t,optionsAtMedia:e,optionsMediaQueries:n}}function cR(i){let t=[];function e(r,o){return t=o.filter(({options:l})=>i.optionsAtMedia(l).active!==!1),t.forEach(l=>l.init(r,i)),o.reduce((l,c)=>Object.assign(l,{[c.name]:c}),{})}function n(){t=t.filter(r=>r.destroy())}return{init:e,destroy:n}}function jm(i,t,e){const n=i.ownerDocument,s=n.defaultView,r=lR(s),o=cR(r),l=$d(),c=oR(),{mergeOptions:u,optionsAtMedia:h,optionsMediaQueries:d}=r,{on:f,off:p,emit:y}=c,w=M;let x=!1,g,v=u(aR,jm.globalOptions),b=u(v),E=[],_,C,T;function k(){const{container:nt,slides:K}=b;C=(Ev(nt)?i.querySelector(nt):nt)||i.children[0];const ot=Ev(K)?C.querySelectorAll(K):K;T=[].slice.call(ot||C.children)}function P(nt){const K=rR(i,C,T,n,s,nt,c);if(nt.loop&&!K.slideLooper.canLoop()){const it=Object.assign({},nt,{loop:!1});return P(it)}return K}function L(nt,K){x||(v=u(v,nt),b=h(v),E=K||E,k(),g=P(b),d([v,...E.map(({options:it})=>it)]).forEach(it=>l.add(it,"change",M)),b.active&&(g.translate.to(g.location.get()),g.animation.init(),g.slidesInView.init(),g.slideFocus.init(Ut),g.eventHandler.init(Ut),g.resizeHandler.init(Ut),g.slidesHandler.init(Ut),g.options.loop&&g.slideLooper.loop(),C.offsetParent&&T.length&&g.dragHandler.init(Ut),_=o.init(Ut,E)))}function M(nt,K){const it=Z();I(),L(u({startIndex:it},nt),K),c.emit("reInit")}function I(){g.dragHandler.destroy(),g.eventStore.clear(),g.translate.clear(),g.slideLooper.clear(),g.resizeHandler.destroy(),g.slidesHandler.destroy(),g.slidesInView.destroy(),g.animation.destroy(),o.destroy(),l.clear()}function $(){x||(x=!0,l.clear(),I(),c.emit("destroy"),c.clear())}function N(nt,K,it){!b.active||x||(g.scrollBody.useBaseFriction().useDuration(K===!0?0:b.duration),g.scrollTo.index(nt,it||0))}function W(nt){const K=g.index.add(1).get();N(K,nt,-1)}function j(nt){const K=g.index.add(-1).get();N(K,nt,1)}function U(){return g.index.add(1).get()!==Z()}function D(){return g.index.add(-1).get()!==Z()}function H(){return g.scrollSnapList}function B(){return g.scrollProgress.get(g.location.get())}function Z(){return g.index.get()}function G(){return g.indexPrevious.get()}function tt(){return g.slidesInView.get()}function ct(){return g.slidesInView.get(!1)}function Pt(){return _}function _t(){return g}function rt(){return i}function Gt(){return C}function Se(){return T}const Ut={canScrollNext:U,canScrollPrev:D,containerNode:Gt,internalEngine:_t,destroy:$,off:p,on:f,emit:y,plugins:Pt,previousScrollSnap:G,reInit:w,rootNode:rt,scrollNext:W,scrollPrev:j,scrollProgress:B,scrollSnapList:H,scrollTo:N,selectedScrollSnap:Z,slideNodes:Se,slidesInView:tt,slidesNotInView:ct};return L(t,e),setTimeout(()=>c.emit("init"),0),Ut}jm.globalOptions=void 0;function K1(i={},t=[]){const e=F.useRef(i),n=F.useRef(t),[s,r]=F.useState(),[o,l]=F.useState(),c=F.useCallback(()=>{s&&s.reInit(e.current,n.current)},[s]);return F.useEffect(()=>{W1(e.current,i)||(e.current=i,c())},[i,c]),F.useEffect(()=>{ML(n.current,t)||(n.current=t,c())},[t,c]),F.useEffect(()=>{if(RL()&&o){jm.globalOptions=K1.globalOptions;const u=jm(o,e.current,n.current);return r(u),()=>u.destroy()}else r(void 0)},[o,r]),[l,s]}K1.globalOptions=void 0;const uR={active:!0,breakpoints:{},delay:4e3,jump:!1,playOnInit:!0,stopOnFocusIn:!0,stopOnInteraction:!0,stopOnMouseEnter:!1,stopOnLastSnap:!1,rootNode:null};function hR(i,t){const e=i.scrollSnapList();return typeof t=="number"?e.map(()=>t):t(e,i)}function dR(i,t){const e=i.rootNode();return t&&t(e)||e}function Q1(i={}){let t,e,n,s,r=null,o=0,l=!1,c=!1,u=!1,h=!1;function d(N,W){e=N;const{mergeOptions:j,optionsAtMedia:U}=W,D=j(uR,Q1.globalOptions),H=j(D,i);if(t=U(H),e.scrollSnapList().length<=1)return;h=t.jump,n=!1,s=hR(e,t.delay);const{eventStore:B,ownerDocument:Z}=e.internalEngine(),G=!!e.internalEngine().options.watchDrag,tt=dR(e,t.rootNode);B.add(Z,"visibilitychange",g),G&&e.on("pointerDown",b),G&&!t.stopOnInteraction&&e.on("pointerUp",E),t.stopOnMouseEnter&&B.add(tt,"mouseenter",_),t.stopOnMouseEnter&&!t.stopOnInteraction&&B.add(tt,"mouseleave",C),t.stopOnFocusIn&&e.on("slideFocusStart",x),t.stopOnFocusIn&&!t.stopOnInteraction&&B.add(e.containerNode(),"focusout",w),t.playOnInit&&w()}function f(){e.off("pointerDown",b).off("pointerUp",E).off("slideFocusStart",x),x(),n=!0,l=!1}function p(){const{ownerWindow:N}=e.internalEngine();N.clearTimeout(o),o=N.setTimeout(M,s[e.selectedScrollSnap()]),r=new Date().getTime(),e.emit("autoplay:timerset")}function y(){const{ownerWindow:N}=e.internalEngine();N.clearTimeout(o),o=0,r=null,e.emit("autoplay:timerstopped")}function w(){if(!n){if(v()){u=!0;return}l||e.emit("autoplay:play"),p(),l=!0}}function x(){n||(l&&e.emit("autoplay:stop"),y(),l=!1)}function g(){if(v())return u=l,x();u&&w()}function v(){const{ownerDocument:N}=e.internalEngine();return N.visibilityState==="hidden"}function b(){c||x()}function E(){c||w()}function _(){c=!0,x()}function C(){c=!1,w()}function T(N){typeof N<"u"&&(h=N),w()}function k(){l&&x()}function P(){l&&w()}function L(){return l}function M(){const{index:N}=e.internalEngine(),W=N.clone().add(1).get(),j=e.scrollSnapList().length-1,U=t.stopOnLastSnap&&W===j;if(e.canScrollNext()?e.scrollNext(h):e.scrollTo(0,h),e.emit("autoplay:select"),U)return x();w()}function I(){if(!r)return null;const N=s[e.selectedScrollSnap()],W=new Date().getTime()-r;return N-W}return{name:"autoplay",options:i,init:d,destroy:f,play:T,stop:k,reset:P,isPlaying:L,timeUntilNext:I}}Q1.globalOptions=void 0;const fR="/NurArdiansah/assets/sertif1-5TMPCu_d.pdf",pR="/NurArdiansah/assets/sertif3-BoM77zI6.pdf",gR="/NurArdiansah/assets/sertif4-fEItV2Pc.pdf",Xb="/NurArdiansah/assets/sertif6-Cvb_cIm9.pdf",mR="/NurArdiansah/assets/sertif7-CTas3gaT.pdf",yR="/NurArdiansah/assets/sertif8-CjJPnQx1.pdf",vR="/NurArdiansah/assets/sertif9-Cm9JYQCJ.pdf",wR="/NurArdiansah/assets/porto1-Cb0b8w5K.jpg",AR="/NurArdiansah/assets/porto2-DxnyRiq4.jpg",bR="/NurArdiansah/assets/porto3-B5Ez3Rdo.jpg",SR="/NurArdiansah/assets/porto4-BPrOehNn.jpg",xR="/NurArdiansah/assets/video_profile-BmWJxLfU.mp4",ER=[{name:"SMK Migas Cepu",desc:"Bidang Studi Mesin Perkakas/2005",tahun:"Tahun 2005",image:"https://upload.wikimedia.org/wikipedia/jv/thumb/7/7a/SMK_Migas_Cepu.jpg/200px-SMK_Migas_Cepu.jpg"},{name:"PEM Akamigas - S1",desc:"Bidang Studi Logistik Migas",tahun:"Tahun 2018",image:"https://bic.id/wp-content/uploads/2022/06/21-PEM-Akamigas.webp"},{name:"ITS - Magister",desc:"Bidang Studi Teknik Industri, Logistik Rantai pasok ",tahun:"Tahun 2024",image:"https://www.its.ac.id/wp-content/uploads/2020/07/Lambang-ITS-2-1024x1024.png"}],vn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Cv=[.001,0,0,.001,0,0],A0=1.35,si={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},$s={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Vd="pdfjs_internal_editor_",at={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},vt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},t_={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ze={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},xd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},pe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ac={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},jp={ERRORS:0,WARNINGS:1,INFOS:5},Ah={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},pg={moveTo:0,lineTo:1,curveTo:2,closePath:3},e_={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Iy=jp.WARNINGS;function _R(i){Number.isInteger(i)&&(Iy=i)}function CR(){return Iy}function Fy(i){Iy>=jp.INFOS&&console.info(`Info: ${i}`)}function lt(i){Iy>=jp.WARNINGS&&console.warn(`Warning: ${i}`)}function zt(i){throw new Error(i)}function wt(i,t){i||zt(t)}function TR(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function J1(i,t=null,e=null){if(!i)return null;if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const s=i.match(/\./g);(s==null?void 0:s.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=MR(i)}catch{}}const n=t?URL.parse(i,t):URL.parse(i);return TR(n)?n:null}function Z1(i,t,e=!1){const n=URL.parse(i);return n?(n.hash=t,n.href):e&&J1(i,"http://example.com")?i.split("#",1)[0]+`${t?`#${t}`:""}`:""}function dt(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const ic=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class Yb extends ic{constructor(t,e){super(t,"PasswordException"),this.code=e}}class b0 extends ic{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class zm extends ic{constructor(t){super(t,"InvalidPDFException")}}class Gd extends ic{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class kR extends ic{constructor(t){super(t,"FormatError")}}class Gr extends ic{constructor(t){super(t,"AbortException")}}function n_(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&zt("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const n=[];for(let s=0;s<t;s+=e){const r=Math.min(s+e,t),o=i.subarray(s,r);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function zp(i){typeof i!="string"&&zt("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function PR(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function LR(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function RR(){try{return new Function(""),!0}catch{return!1}}class je{static get isLittleEndian(){return dt(this,"isLittleEndian",LR())}static get isEvalSupported(){return dt(this,"isEvalSupported",RR())}static get isOffscreenCanvasSupported(){return dt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return dt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return dt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return dt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const S0=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var jr,Fg,Tv;class q{static makeHexColor(t,e,n){return`#${S0[t]}${S0[e]}${S0[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const s=t[n],r=t[n+1];t[n]=s*e[0]+r*e[2]+e[4],t[n+1]=s*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const s=e[0],r=e[1],o=e[2],l=e[3],c=e[4],u=e[5];for(let h=0;h<6;h+=2){const d=t[n+h],f=t[n+h+1];t[n+h]=d*s+f*o+c,t[n+h+1]=d*r+f*l+u}}static applyInverseTransform(t,e){const n=t[0],s=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-n*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,n){const s=e[0],r=e[1],o=e[2],l=e[3],c=e[4],u=e[5],h=t[0],d=t[1],f=t[2],p=t[3];let y=s*h+c,w=y,x=s*f+c,g=x,v=l*d+u,b=v,E=l*p+u,_=E;if(r!==0||o!==0){const C=r*h,T=r*f,k=o*d,P=o*p;y+=k,g+=k,x+=P,w+=P,v+=C,_+=C,E+=T,b+=T}n[0]=Math.min(n[0],y,x,w,g),n[1]=Math.min(n[1],v,E,b,_),n[2]=Math.max(n[2],y,x,w,g),n[3]=Math.max(n[3],v,E,b,_)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],s=t[1],r=t[2],o=t[3],l=n**2+s**2,c=n*r+s*o,u=r**2+o**2,h=(l+u)/2,d=Math.sqrt(h**2-(l*u-c**2));e[0]=Math.sqrt(h+d||1),e[1]=Math.sqrt(h-d||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[n,r,s,o]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,s,r){r[0]=Math.min(r[0],t,n),r[1]=Math.min(r[1],e,s),r[2]=Math.max(r[2],t,n),r[3]=Math.max(r[3],e,s)}static bezierBoundingBox(t,e,n,s,r,o,l,c,u){u[0]=Math.min(u[0],t,l),u[1]=Math.min(u[1],e,c),u[2]=Math.max(u[2],t,l),u[3]=Math.max(u[3],e,c),S(this,jr,Tv).call(this,t,n,r,l,e,s,o,c,3*(-t+3*(n-r)+l),6*(t-2*n+r),3*(n-t),u),S(this,jr,Tv).call(this,t,n,r,l,e,s,o,c,3*(-e+3*(s-o)+c),6*(e-2*s+o),3*(s-e),u)}}jr=new WeakSet,Fg=function(t,e,n,s,r,o,l,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,y=d*(d*(d*t+3*u*e)+3*f*n)+p*s,w=d*(d*(d*r+3*u*o)+3*f*l)+p*c;h[0]=Math.min(h[0],y),h[1]=Math.min(h[1],w),h[2]=Math.max(h[2],y),h[3]=Math.max(h[3],w)},Tv=function(t,e,n,s,r,o,l,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&S(this,jr,Fg).call(this,t,e,n,s,r,o,l,c,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const y=Math.sqrt(p),w=2*u;S(this,jr,Fg).call(this,t,e,n,s,r,o,l,c,(-h+y)/w,f),S(this,jr,Fg).call(this,t,e,n,s,r,o,l,c,(-h-y)/w,f)},A(q,jr);function MR(i){return decodeURIComponent(escape(i))}let x0=null,qb=null;function i_(i){return x0||(x0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,qb=new Map([["","t"]])),i.replaceAll(x0,(t,e,n)=>e?e.normalize("NFKC"):qb.get(n))}function tA(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),n_(i)}const eA="pdfjs_internal_id_";function DR(i,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,s,...r]=e;if(!i(n)&&!Number.isInteger(n)||!t(s))return!1;const o=r.length;let l=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function ln(i,t,e){return Math.min(Math.max(i,t),e)}function s_(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(n_(i))}function NR(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):zp(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...t){return new Promise(e=>{e(i(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((t,e)=>t+e,0)});class Wd{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(r){var c;if(!r)return;let o=null;const l=r.name;if(l==="#text")o=r.value;else if(Wd.shouldBuildText(l))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const u of r.children)s(u)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class nA{static setupStorage(t,e,n,s,r){const o=s.getValue(e,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?t.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{s.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const l of n.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const c=l.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:r}){const{attributes:o}=e,l=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&t.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!l||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,u)}l&&r.addLinkAttributes(t,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(t,o.dataId,e,n)}static render(t){var d,f;const e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,r=t.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:n});const l=r!=="richText",c=t.div;if(c.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=p}l&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);o.append(p),l&&Wd.shouldBuildText(s.name)&&u.push(p)}return{textDivs:u}}const h=[[s,-1,o]];for(;h.length>0;){const[p,y,w]=h.at(-1);if(y+1===p.children.length){h.pop();continue}const x=p.children[++h.at(-1)[1]];if(x===null)continue;const{name:g}=x;if(g==="#text"){const b=document.createTextNode(x.value);u.push(b),w.append(b);continue}const v=(d=x==null?void 0:x.attributes)!=null&&d.xmlns?document.createElementNS(x.attributes.xmlns,g):document.createElement(g);if(w.append(v),x.attributes&&this.setAttributes({html:v,element:x,storage:e,intent:r,linkService:n}),((f=x.children)==null?void 0:f.length)>0)h.push([x,-1,v]);else if(x.value){const b=document.createTextNode(x.value);l&&Wd.shouldBuildText(g)&&u.push(b),v.append(b)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const qs="http://www.w3.org/2000/svg",Ca=class Ca{};O(Ca,"CSS",96),O(Ca,"PDF",72),O(Ca,"PDF_TO_CSS_UNITS",Ca.CSS/Ca.PDF);let Wr=Ca;async function Ch(i,t="text"){if(Wh(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class Up{constructor({viewBox:t,userUnit:e,scale:n,rotation:s,offsetX:r=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=s,this.offsetX=r,this.offsetY=o,n*=e;const c=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let h,d,f,p;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,d=0,f=0,p=1;break;case 90:h=0,d=1,f=1,p=0;break;case 270:h=0,d=-1,f=-1,p=0;break;case 0:h=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,p=-p);let y,w,x,g;h===0?(y=Math.abs(u-t[1])*n+r,w=Math.abs(c-t[0])*n+o,x=(t[3]-t[1])*n,g=(t[2]-t[0])*n):(y=Math.abs(c-t[0])*n+r,w=Math.abs(u-t[1])*n+o,x=(t[2]-t[0])*n,g=(t[3]-t[1])*n),this.transform=[h*n,d*n,f*n,p*n,y-h*n*c-f*n*u,w-d*n*c-p*n*u],this.width=x,this.height=g}get rawDims(){const t=this.viewBox;return dt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new Up({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){const n=[t,e];return q.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];q.applyTransform(e,this.transform);const n=[t[2],t[3]];return q.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return q.applyInverseTransform(n,this.transform),n}}class Oy extends ic{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Hp(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function By(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function r_(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function o_(i,t="document.pdf"){if(typeof i!="string")return t;if(Hp(i))return lt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(i);if(!n)return t;const s=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},r=/\.pdf$/i,o=n.pathname.split("/").at(-1);if(r.test(o))return s(o);if(n.searchParams.size>0){const l=Array.from(n.searchParams.values()).reverse();for(const u of l)if(r.test(u))return s(u);const c=Array.from(n.searchParams.keys()).reverse();for(const u of c)if(r.test(u))return s(u)}if(n.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(c)return s(c[0])}return t}class Kb{constructor(){O(this,"started",Object.create(null));O(this,"times",[])}time(t){t in this.started&&lt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||lt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-s}ms
`);return t.join("")}}function Wh(i,t){const e=t?URL.parse(i,t):URL.parse(i);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function di(i){i.preventDefault()}function ie(i){i.preventDefault(),i.stopPropagation()}function IR(i){console.log("Deprecated API usage: "+i)}var Jd;class Xd{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;a(this,Jd)||m(this,Jd,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,Jd).exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const u=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,l+=d):u==="+"&&(o-=h,l-=d),new Date(Date.UTC(n,s,r,o,l,c))}}Jd=new WeakMap,A(Xd,Jd);function a_(i,{scale:t=1,rotation:e=0}){const{width:n,height:s}=i.attributes.style,r=[0,0,parseInt(n),parseInt(s)];return new Up({viewBox:r,userUnit:1,scale:t,rotation:e})}function Th(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(lt(`Not a valid color format: "${i}"`),[0,0,0])}function FR(i){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of i.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;i.set(e,Th(n))}t.remove()}function ee(i){const{a:t,b:e,c:n,d:s,e:r,f:o}=i.getTransform();return[t,e,n,s,r,o]}function ps(i){const{a:t,b:e,c:n,d:s,e:r,f:o}=i.getTransform().invertSelf();return[t,e,n,s,r,o]}function ha(i,t,e=!1,n=!0){if(t instanceof Up){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:o}=i,l=je.isCSSRoundSupported,c=`var(--total-scale-factor) * ${s}px`,u=`var(--total-scale-factor) * ${r}px`,h=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,d=l?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!e||t.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}n&&i.setAttribute("data-main-rotation",t.rotation)}class ls{constructor(){const{pixelRatio:t}=ls;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,s,r=-1){let o=1/0,l=1/0,c=1/0;n=ls.capPixels(n,r),n>0&&(o=Math.sqrt(n/(t*e))),s!==-1&&(l=s/t,c=s/e);const u=Math.min(o,l,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const Um=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class OR{static get isDarkMode(){var t;return dt(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class l_{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),dt(this,"commentForegroundColor",Th(n))}}function c_(i,t,e,n){n=Math.min(Math.max(n??1,0),1);const s=255*(1-n);return i=Math.round(i*n+s),t=Math.round(t*n+s),e=Math.round(e*n+s),[i,t,e]}function Qb(i,t){const e=i[0]/255,n=i[1]/255,s=i[2]/255,r=Math.max(e,n,s),o=Math.min(e,n,s),l=(r+o)/2;if(r===o)t[0]=t[1]=0;else{const c=r-o;switch(t[1]=l<.5?c/(r+o):c/(2-r-o),r){case e:t[0]=((n-s)/c+(n<s?6:0))*60;break;case n:t[0]=((s-e)/c+2)*60;break;case s:t[0]=((e-n)/c+4)*60;break}}t[2]=l}function kv(i,t){const e=i[0],n=i[1],s=i[2],r=(1-Math.abs(2*s-1))*n,o=r*(1-Math.abs(e/60%2-1)),l=s-r/2;switch(Math.floor(e/60)){case 0:t[0]=r+l,t[1]=o+l,t[2]=l;break;case 1:t[0]=o+l,t[1]=r+l,t[2]=l;break;case 2:t[0]=l,t[1]=r+l,t[2]=o+l;break;case 3:t[0]=l,t[1]=o+l,t[2]=r+l;break;case 4:t[0]=o+l,t[1]=l,t[2]=r+l;break;case 5:case 6:t[0]=r+l,t[1]=l,t[2]=o+l;break}}function Jb(i){return i<=.03928?i/12.92:((i+.055)/1.055)**2.4}function Zb(i,t,e){kv(i,e),e.map(Jb);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];kv(t,e),e.map(Jb);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>s?(n+.05)/(s+.05):(s+.05)/(n+.05)}const tS=new Map;function u_(i,t){const e=i[0]+i[1]*256+i[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=tS.get(e);if(n)return n;const s=new Float32Array(9),r=s.subarray(0,3),o=s.subarray(3,6);Qb(i,o);const l=s.subarray(6,9);Qb(t,l);const c=l[2]<.5,u=c?12:4.5;if(o[2]=c?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),Zb(o,l,r)<u){let h,d;c?(h=o[2],d=1):(h=0,d=o[2]);const f=.005;for(;d-h>f;){const p=o[2]=(h+d)/2;c===Zb(o,l,r)<u?h=p:d=p}o[2]=c?d:h}return kv(o,r),n=q.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),tS.set(e,n),n}function iA({html:i,dir:t,className:e},n){const s=document.createDocumentFragment();if(typeof i=="string"){const r=document.createElement("p");r.dir=t||"auto";const o=i.split(/(?:\r\n?|\n)/);for(let l=0,c=o.length;l<c;++l){const u=o[l];r.append(document.createTextNode(u)),l<c-1&&r.append(document.createElement("br"))}s.append(r)}else nA.render({xfaHtml:i,div:s,intent:"richText"});s.firstChild.classList.add("richText",e),n.append(s)}var io,so,yi,vi,Zd,ro,Uc,Hc,tf,Jm,h_,qe,d_,f_,lc,Xh;const Zs=class Zs{constructor(t){A(this,qe);A(this,io,null);A(this,so,null);A(this,yi);A(this,vi,null);A(this,Zd,null);A(this,ro,null);A(this,Uc,null);A(this,Hc,null);m(this,yi,t),a(Zs,tf)||m(Zs,tf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=m(this,io,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,yi)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",di,{signal:e}),t.addEventListener("pointerdown",S(Zs,Jm,h_),{signal:e}));const n=m(this,vi,document.createElement("div"));n.className="buttons",t.append(n);const s=a(this,yi).toolbarPosition;if(s){const{style:r}=t,o=a(this,yi)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return a(this,io)}hide(){var t;a(this,io).classList.add("hidden"),(t=a(this,so))==null||t.hideDropdown()}show(){var t,e;a(this,io).classList.remove("hidden"),(t=a(this,Zd))==null||t.shown(),(e=a(this,ro))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=a(this,yi),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",a(Zs,tf)[t]),S(this,qe,lc).call(this,n)&&n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),a(this,vi).append(n)}async addAltText(t){const e=await t.render();S(this,qe,lc).call(this,e),a(this,vi).append(e,a(this,qe,Xh)),m(this,Zd,t)}addComment(t,e=null){if(a(this,ro))return;const n=t.renderForToolbar();if(!n)return;S(this,qe,lc).call(this,n);const s=m(this,Uc,a(this,qe,Xh));e?(a(this,vi).insertBefore(n,e),a(this,vi).insertBefore(s,e)):a(this,vi).append(n,s),m(this,ro,t),t.toolbar=this}addColorPicker(t){if(a(this,so))return;m(this,so,t);const e=t.renderButton();S(this,qe,lc).call(this,e),a(this,vi).append(e,a(this,qe,Xh))}async addEditSignatureButton(t){const e=m(this,Hc,await t.renderEditButton(a(this,yi)));S(this,qe,lc).call(this,e),a(this,vi).append(e,a(this,qe,Xh))}removeButton(t){var e,n;switch(t){case"comment":(e=a(this,ro))==null||e.removeToolbarCommentButton(),m(this,ro,null),(n=a(this,Uc))==null||n.remove(),m(this,Uc,null);break}}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,n){const s=a(this,vi).querySelector(n);s&&t==="comment"&&this.addComment(e,s)}updateEditSignatureButton(t){a(this,Hc)&&(a(this,Hc).title=t)}remove(){var t;a(this,io).remove(),(t=a(this,so))==null||t.destroy(),m(this,so,null)}};io=new WeakMap,so=new WeakMap,yi=new WeakMap,vi=new WeakMap,Zd=new WeakMap,ro=new WeakMap,Uc=new WeakMap,Hc=new WeakMap,tf=new WeakMap,Jm=new WeakSet,h_=function(t){t.stopPropagation()},qe=new WeakSet,d_=function(t){a(this,yi)._focusEventsAllowed=!1,ie(t)},f_=function(t){a(this,yi)._focusEventsAllowed=!0,ie(t)},lc=function(t){const e=a(this,yi)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",S(this,qe,d_).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",S(this,qe,f_).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",di,{signal:e}),!0)},Xh=function(){const t=document.createElement("div");return t.className="divider",t},A(Zs,Jm),A(Zs,tf,null);let Pv=Zs;var ef,Da,nr,Xr,p_,g_,Lv;class BR{constructor(t){A(this,Xr);A(this,ef,null);A(this,Da,null);A(this,nr);m(this,nr,t)}show(t,e,n){const[s,r]=S(this,Xr,g_).call(this,e,n),{style:o}=a(this,Da)||m(this,Da,S(this,Xr,p_).call(this));t.append(a(this,Da)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,Da).remove()}}ef=new WeakMap,Da=new WeakMap,nr=new WeakMap,Xr=new WeakSet,p_=function(){const t=m(this,Da,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=a(this,nr)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",di,{signal:e});const n=m(this,ef,document.createElement("div"));return n.className="buttons",t.append(n),a(this,nr).hasCommentManager()&&S(this,Xr,Lv).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{a(this,nr).commentSelection("floating_button")}),S(this,Xr,Lv).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{a(this,nr).highlightSelection("floating_button")}),t},g_=function(t,e){let n=0,s=0;for(const r of t){const o=r.y+r.height;if(o<n)continue;const l=r.x+(e?r.width:0);if(o>n){s=l,n=o;continue}e?l>s&&(s=l):l<s&&(s=l)}return[e?1-s:s,n]},Lv=function(t,e,n,s){const r=document.createElement("button");r.classList.add("basic",t),r.tabIndex=0,r.setAttribute("data-l10n-id",e);const o=document.createElement("span");r.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",n);const l=a(this,nr)._signal;l instanceof AbortSignal&&!l.aborted&&(r.addEventListener("contextmenu",di,{signal:l}),r.addEventListener("click",s,{signal:l})),a(this,ef).append(r)};function m_(i,t,e){for(const n of e)t.addEventListener(n,i[n].bind(i))}var Zm;class jR{constructor(){A(this,Zm,0)}get id(){return`${Vd}${xe(this,Zm)._++}`}}Zm=new WeakMap;var $c,nf,en,Vc,Og;const pA=class pA{constructor(){A(this,Vc);A(this,$c,tA());A(this,nf,0);A(this,en,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const r=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return dt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:n,size:s,type:r}=t;return S(this,Vc,Og).call(this,`${e}_${n}_${s}_${r}`,t)}async getFromUrl(t){return S(this,Vc,Og).call(this,t,t)}async getFromBlob(t,e){const n=await e;return S(this,Vc,Og).call(this,t,n)}async getFromId(t){a(this,en)||m(this,en,new Map);const e=a(this,en).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){a(this,en)||m(this,en,new Map);let n=a(this,en).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${a(this,$c)}_${xe(this,nf)._++}`,refCounter:1,isSvg:!1},a(this,en).set(t,n),a(this,en).set(n.id,n),n}getSvgUrl(t){const e=a(this,en).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;a(this,en)||m(this,en,new Map);const e=a(this,en).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}(s=n.close)==null||s.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,$c)}_`)}};$c=new WeakMap,nf=new WeakMap,en=new WeakMap,Vc=new WeakSet,Og=async function(t,e){a(this,en)||m(this,en,new Map);let n=a(this,en).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${a(this,$c)}_${xe(this,nf)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(n.url=e,s=await Ch(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const r=pA._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((u,h)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,u()},o.onload=async()=>{const d=n.svgUrl=o.result;l.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},l.onerror=o.onerror=h});o.readAsDataURL(s),await c}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){lt(s),n=null}return a(this,en).set(t,n),n&&a(this,en).set(n.id,n),n};let Rv=pA;var ge,oo,sf,te;class zR{constructor(t=128){A(this,ge,[]);A(this,oo,!1);A(this,sf);A(this,te,-1);m(this,sf,t)}add({cmd:t,undo:e,post:n,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(s&&t(),a(this,oo))return;const c={cmd:t,undo:e,post:n,type:r};if(a(this,te)===-1){a(this,ge).length>0&&(a(this,ge).length=0),m(this,te,0),a(this,ge).push(c);return}if(o&&a(this,ge)[a(this,te)].type===r){l&&(c.undo=a(this,ge)[a(this,te)].undo),a(this,ge)[a(this,te)]=c;return}const u=a(this,te)+1;u===a(this,sf)?a(this,ge).splice(0,1):(m(this,te,u),u<a(this,ge).length&&a(this,ge).splice(u)),a(this,ge).push(c)}undo(){if(a(this,te)===-1)return;m(this,oo,!0);const{undo:t,post:e}=a(this,ge)[a(this,te)];t(),e==null||e(),m(this,oo,!1),m(this,te,a(this,te)-1)}redo(){if(a(this,te)<a(this,ge).length-1){m(this,te,a(this,te)+1),m(this,oo,!0);const{cmd:t,post:e}=a(this,ge)[a(this,te)];t(),e==null||e(),m(this,oo,!1)}}hasSomethingToUndo(){return a(this,te)!==-1}hasSomethingToRedo(){return a(this,te)<a(this,ge).length-1}cleanType(t){if(a(this,te)!==-1){for(let e=a(this,te);e>=0;e--)if(a(this,ge)[e].type!==t){a(this,ge).splice(e+1,a(this,te)-e),m(this,te,e);return}a(this,ge).length=0,m(this,te,-1)}}destroy(){m(this,ge,null)}}ge=new WeakMap,oo=new WeakMap,sf=new WeakMap,te=new WeakMap;var ty,y_;class $p{constructor(t){A(this,ty);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=je.platform;for(const[n,s,r={}]of t)for(const o of n){const l=o.startsWith("mac+");e&&l?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!l&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(S(this,ty,y_).call(this,e));if(!n)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:l=null}}=n;l&&!l(t,e)||(s.bind(t,...o,e)(),r||ie(e))}}ty=new WeakSet,y_=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const ey=class ey{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return FR(t),dt(this,"_colors",t)}convert(t){const e=Th(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((r,o)=>r===e[o]))return ey._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?q.makeHexColor(...e):t}};O(ey,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Mv=ey;var Gc,Un,Wc,le,_e,Xc,wi,Yc,Ai,nn,ao,lo,qc,co,vs,bi,Na,rf,of,Kc,af,ws,uo,Qc,ho,As,ny,fo,Jc,lf,po,Ia,Zc,go,cf,we,Ct,ir,mo,yo,uf,tu,hf,vo,bs,sr,df,ff,Si,V,Bg,Dv,v_,w_,Yh,A_,b_,S_,Nv,x_,Iv,Fv,E_,fn,Ks,__,C_,Ov,T_,qh,Bv;const kc=class kc{constructor(t,e,n,s,r,o,l,c,u,h,d,f,p,y,w,x){A(this,V);A(this,Gc,new AbortController);A(this,Un,null);A(this,Wc,null);A(this,le,new Map);A(this,_e,new Map);A(this,Xc,null);A(this,wi,null);A(this,Yc,null);A(this,Ai,new zR);A(this,nn,null);A(this,ao,null);A(this,lo,null);A(this,qc,0);A(this,co,new Set);A(this,vs,null);A(this,bi,null);A(this,Na,new Set);O(this,"_editorUndoBar",null);A(this,rf,!1);A(this,of,!1);A(this,Kc,!1);A(this,af,null);A(this,ws,null);A(this,uo,null);A(this,Qc,null);A(this,ho,!1);A(this,As,null);A(this,ny,new jR);A(this,fo,!1);A(this,Jc,!1);A(this,lf,!1);A(this,po,null);A(this,Ia,null);A(this,Zc,null);A(this,go,null);A(this,cf,null);A(this,we,at.NONE);A(this,Ct,new Set);A(this,ir,null);A(this,mo,null);A(this,yo,null);A(this,uf,null);A(this,tu,null);A(this,hf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,vo,[0,0]);A(this,bs,null);A(this,sr,null);A(this,df,null);A(this,ff,null);A(this,Si,null);const g=this._signal=a(this,Gc).signal;m(this,sr,t),m(this,df,e),m(this,ff,n),m(this,Xc,s),m(this,nn,r),m(this,mo,o),m(this,tu,c),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:g}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),l._on("setpreference",this.onSetPreference.bind(this),{signal:g}),l._on("switchannotationeditorparams",v=>this.updateParams(v.type,v.value),{signal:g}),window.addEventListener("pointerdown",()=>{m(this,Jc,!0)},{capture:!0,signal:g}),window.addEventListener("pointerup",()=>{m(this,Jc,!1)},{capture:!0,signal:g}),S(this,V,A_).call(this),S(this,V,E_).call(this),S(this,V,Nv).call(this),m(this,wi,c.annotationStorage),m(this,af,c.filterFactory),m(this,yo,u),m(this,Qc,h||null),m(this,rf,d),m(this,of,f),m(this,Kc,p),m(this,cf,y||null),this.viewParameters={realScale:Wr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=x!==!1,r==null||r.setSidebarUiManager(this)}static get _keyboardManager(){const t=kc.prototype,e=o=>a(o,sr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return dt(this,"_keyboardManager",new $p([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,sr).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,sr).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,n,s,r,o,l,c,u;(t=a(this,Si))==null||t.resolve(),m(this,Si,null),(e=a(this,Gc))==null||e.abort(),m(this,Gc,null),this._signal=null;for(const h of a(this,_e).values())h.destroy();a(this,_e).clear(),a(this,le).clear(),a(this,Na).clear(),(n=a(this,go))==null||n.clear(),m(this,Un,null),a(this,Ct).clear(),a(this,Ai).destroy(),(s=a(this,Xc))==null||s.destroy(),(r=a(this,nn))==null||r.destroy(),(o=a(this,mo))==null||o.destroy(),(l=a(this,As))==null||l.hide(),m(this,As,null),(c=a(this,Zc))==null||c.destroy(),m(this,Zc,null),m(this,Wc,null),a(this,ws)&&(clearTimeout(a(this,ws)),m(this,ws,null)),a(this,bs)&&(clearTimeout(a(this,bs)),m(this,bs,null)),(u=this._editorUndoBar)==null||u.destroy(),m(this,tu,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,cf)}get useNewAltTextFlow(){return a(this,of)}get useNewAltTextWhenAddingImage(){return a(this,Kc)}get hcmFilter(){return dt(this,"hcmFilter",a(this,yo)?a(this,af).addHCMFilter(a(this,yo).foreground,a(this,yo).background):"none")}get direction(){return dt(this,"direction",getComputedStyle(a(this,sr)).direction)}get _highlightColors(){return dt(this,"_highlightColors",a(this,Qc)?new Map(a(this,Qc).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return dt(this,"highlightColors",null);const e=new Map,n=!!a(this,yo);for(const[s,r]of t){const o=s.endsWith("_HCM");if(n&&o){e.set(s.replace("_HCM",""),r);continue}!n&&!o&&e.set(s,r)}return dt(this,"highlightColors",e)}get highlightColorNames(){return dt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),m(this,lo,t)}setMainHighlightColorPicker(t){m(this,Zc,t)}editAltText(t,e=!1){var n;(n=a(this,Xc))==null||n.editAltText(this,t,e)}hasCommentManager(){return!!a(this,nn)}editComment(t,e,n,s){var r;(r=a(this,nn))==null||r.showDialog(this,t,e,n,s)}selectComment(t,e){const n=a(this,_e).get(t),s=n==null?void 0:n.getEditorByUID(e);s==null||s.toggleComment(!0,!0)}updateComment(t){var e;(e=a(this,nn))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=a(this,nn))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=a(this,nn))==null||e.removeComments([t.uid])}toggleComment(t,e,n=void 0){var s;(s=a(this,nn))==null||s.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){var n;return t&&((n=a(this,nn))==null?void 0:n.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=a(this,nn))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(a(this,_e).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),s=r=>{r.pageNumber===t&&(this._eventBus._off("editorsrendered",s),e())};this._eventBus.on("editorsrendered",s),await n}getSignature(t){var e;(e=a(this,mo))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return a(this,mo)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":m(this,Kc,e);break}}onPageChanging({pageNumber:t}){m(this,qc,t-1)}focusMainContainer(){a(this,sr).focus()}findParent(t,e){for(const n of a(this,_e).values()){const{x:s,y:r,width:o,height:l}=n.div.getBoundingClientRect();if(t>=s&&t<=s+o&&e>=r&&e<=r+l)return n}return null}disableUserSelect(t=!1){a(this,df).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,Na).add(t)}removeShouldRescale(t){a(this,Na).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Wr.PDF_TO_CSS_UNITS;for(const n of a(this,Na))n.onScaleChanging();(e=a(this,lo))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:l}=n,c=n.toString(),h=S(this,V,Bg).call(this,n).closest(".textLayer"),d=this.getSelectionBoxes(h);if(!d)return;n.empty();const f=S(this,V,Dv).call(this,h),p=a(this,we)===at.NONE,y=()=>{const w=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:l,text:c});p&&this.showAllEditors("highlight",!0,!0),e&&(w==null||w.editComment())};if(p){this.switchToMode(at.HIGHLIGHT,y);return}y()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!a(this,wi))return null;const e=`${Vd}${t}`,n=a(this,wi).getRawValue(e);return n&&a(this,wi).remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&a(this,wi)&&!a(this,wi).has(t.id)&&a(this,wi).setValue(t.id,t)}a11yAlert(t,e=null){const n=a(this,ff);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,a(this,ho)&&(m(this,ho,!1),S(this,V,Yh).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,Ct))if(e.div.contains(t)){m(this,Ia,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,Ia))return;const[t,e]=a(this,Ia);m(this,Ia,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){S(this,V,Nv).call(this),S(this,V,Iv).call(this)}removeEditListeners(){S(this,V,x_).call(this),S(this,V,Fv).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of a(this,bi))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of a(this,bi))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=a(this,Un))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of a(this,Ct)){const r=s.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of a(this,bi))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){lt(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const c of n){const u=await s.deserialize(c);if(!u)return;r.push(u)}const o=()=>{for(const c of r)S(this,V,Ov).call(this,c);S(this,V,Bv).call(this,r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(r){lt(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,we)!==at.NONE&&!this.isEditorHandlingKeyboard&&kc._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,ho)&&(m(this,ho,!1),S(this,V,Yh).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(S(this,V,b_).call(this),S(this,V,Iv).call(this),S(this,V,fn).call(this,{isEditing:a(this,we)!==at.NONE,isEmpty:S(this,V,qh).call(this),hasSomethingToUndo:a(this,Ai).hasSomethingToUndo(),hasSomethingToRedo:a(this,Ai).hasSomethingToRedo(),hasSelectedEditor:!1})):(S(this,V,S_).call(this),S(this,V,Fv).call(this),S(this,V,fn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,bi)){m(this,bi,t);for(const e of a(this,bi))S(this,V,Ks).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,ny).id}get currentLayer(){return a(this,_e).get(a(this,qc))}getLayer(t){return a(this,_e).get(t)}get currentPageIndex(){return a(this,qc)}addLayer(t){a(this,_e).set(t.pageIndex,t),a(this,fo)?t.enable():t.disable()}removeLayer(t){a(this,_e).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,s=!1,r=!1){var o,l,c,u,h,d;if(a(this,we)!==t&&!(a(this,Si)&&(await a(this,Si).promise,!a(this,Si)))){if(m(this,Si,Promise.withResolvers()),(o=a(this,lo))==null||o.commitOrRemove(),a(this,we)===at.POPUP&&((l=a(this,nn))==null||l.hideSidebar()),(c=a(this,nn))==null||c.destroyPopup(),m(this,we,t),t===at.NONE){this.setEditingState(!1),S(this,V,C_).call(this);for(const f of a(this,le).values())f.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),a(this,Si).resolve();return}for(const f of a(this,le).values())f.addStandaloneCommentButton();t===at.SIGNATURE&&await((h=a(this,mo))==null?void 0:h.loadSignatures()),this.setEditingState(!0),await S(this,V,__).call(this),this.unselectAll();for(const f of a(this,_e).values())f.updateMode(t);if(t===at.POPUP){a(this,Wc)||m(this,Wc,await a(this,tu).getAnnotationsByType(new Set(a(this,bi).map(y=>y._editorType))));const f=new Set,p=[];for(const y of a(this,le).values()){const{annotationElementId:w,hasComment:x,deleted:g}=y;w&&f.add(w),x&&!g&&p.push(y.getData())}for(const y of a(this,Wc)){const{id:w,popupRef:x,contentsObj:g}=y;x&&(g!=null&&g.str)&&!f.has(w)&&!a(this,co).has(w)&&p.push(y)}(d=a(this,nn))==null||d.showSidebar(p)}if(!e){n&&this.addNewEditorFromKeyboard(),a(this,Si).resolve();return}for(const f of a(this,le).values())f.uid===e?(this.setSelected(f),r?f.editComment():s?f.enterInEditMode():f.focus()):f.unselect();a(this,Si).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==a(this,we)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(a(this,bi)){switch(t){case vt.CREATE:this.currentLayer.addNewEditor(e);return;case vt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,uf)||m(this,uf,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of a(this,Ct))n.updateParams(t,e);else for(const n of a(this,bi))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var r;for(const o of a(this,le).values())o.editorType===t&&o.show(e);(((r=a(this,uf))==null?void 0:r.get(vt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&S(this,V,Ks).call(this,[[vt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,lf)!==t){m(this,lf,t);for(const e of a(this,_e).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of a(this,le).values())e.pageIndex===t&&(yield e)}getEditor(t){return a(this,le).get(t)}addEditor(t){a(this,le).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(a(this,ws)&&clearTimeout(a(this,ws)),m(this,ws,setTimeout(()=>{this.focusMainContainer(),m(this,ws,null)},0))),a(this,le).delete(t.id),t.annotationElementId&&((e=a(this,go))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!a(this,co).has(t.annotationElementId))&&((n=a(this,wi))==null||n.remove(t.id))}addDeletedAnnotationElement(t){a(this,co).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,co).has(t)}removeDeletedAnnotationElement(t){a(this,co).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,Un)!==t&&(m(this,Un,t),t&&S(this,V,Ks).call(this,t.propertiesToUpdate))}updateUI(t){a(this,V,T_)===t&&S(this,V,Ks).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){S(this,V,Ks).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(a(this,Ct).has(t)){a(this,Ct).delete(t),t.unselect(),S(this,V,fn).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,Ct).add(t),t.select(),S(this,V,Ks).call(this,t.propertiesToUpdate),S(this,V,fn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.id}),(e=a(this,lo))==null||e.commitOrRemove();for(const n of a(this,Ct))n!==t&&n.unselect();a(this,Ct).clear(),a(this,Ct).add(t),t.select(),S(this,V,Ks).call(this,t.propertiesToUpdate),S(this,V,fn).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,Ct).has(t)}get firstSelectedEditor(){return a(this,Ct).values().next().value}unselect(t){t.unselect(),a(this,Ct).delete(t),S(this,V,fn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,Ct).size!==0}get isEnterHandled(){return a(this,Ct).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;a(this,Ai).undo(),S(this,V,fn).call(this,{hasSomethingToUndo:a(this,Ai).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:S(this,V,qh).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){a(this,Ai).redo(),S(this,V,fn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,Ai).hasSomethingToRedo(),isEmpty:S(this,V,qh).call(this)})}addCommands(t){a(this,Ai).add(t),S(this,V,fn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:S(this,V,qh).call(this)})}cleanUndoStack(t){a(this,Ai).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...a(this,Ct)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},s=()=>{for(const o of e)S(this,V,Ov).call(this,o)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=a(this,Un))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,Un)||this.hasSelection}selectAll(){for(const t of a(this,Ct))t.commit();S(this,V,Bv).call(this,a(this,le).values())}unselectAll(){var t;if(!(a(this,Un)&&(a(this,Un).commitOrRemove(),a(this,we)!==at.NONE))&&!((t=a(this,lo))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of a(this,Ct))e.unselect();a(this,Ct).clear(),S(this,V,fn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;a(this,vo)[0]+=t,a(this,vo)[1]+=e;const[s,r]=a(this,vo),o=[...a(this,Ct)],l=1e3;a(this,bs)&&clearTimeout(a(this,bs)),m(this,bs,setTimeout(()=>{m(this,bs,null),a(this,vo)[0]=a(this,vo)[1]=0,this.addCommands({cmd:()=>{for(const c of o)a(this,le).has(c.id)&&(c.translateInPage(s,r),c.translationDone())},undo:()=>{for(const c of o)a(this,le).has(c.id)&&(c.translateInPage(-s,-r),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),m(this,vs,new Map);for(const t of a(this,Ct))a(this,vs).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,vs))return!1;this.disableUserSelect(!1);const t=a(this,vs);m(this,vs,null);let e=!1;for(const[{x:s,y:r,pageIndex:o},l]of t)l.newX=s,l.newY=r,l.newPageIndex=o,e||(e=s!==l.savedX||r!==l.savedY||o!==l.savedPageIndex);if(!e)return!1;const n=(s,r,o,l)=>{if(a(this,le).has(s.id)){const c=a(this,_e).get(l);c?s._setParentAndPosition(c,r,o):(s.pageIndex=l,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:l}]of t)n(s,r,o,l)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:l}]of t)n(s,r,o,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,vs))for(const n of a(this,vs).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,Ct).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,Un)===t}getActive(){return a(this,Un)}getMode(){return a(this,we)}isEditingMode(){return a(this,we)!==at.NONE}get imageManager(){return dt(this,"imageManager",new Rv)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,h=e.rangeCount;u<h;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:n,y:s,width:r,height:o}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(u,h,d,f)=>({x:(h-s)/o,y:1-(u+d-n)/r,width:f/o,height:d/r});break;case"180":l=(u,h,d,f)=>({x:1-(u+d-n)/r,y:1-(h+f-s)/o,width:d/r,height:f/o});break;case"270":l=(u,h,d,f)=>({x:1-(h+f-s)/o,y:(u-n)/r,width:f/o,height:d/r});break;default:l=(u,h,d,f)=>({x:(u-n)/r,y:(h-s)/o,width:d/r,height:f/o});break}const c=[];for(let u=0,h=e.rangeCount;u<h;u++){const d=e.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:y,height:w}of d.getClientRects())y===0||w===0||c.push(l(f,p,y,w))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,Yc)||m(this,Yc,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,Yc))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=a(this,Yc))==null?void 0:s.get(t.data.id);if(!e)return;const n=a(this,wi).getRawValue(e);n&&(a(this,we)===at.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var r;const s=(r=a(this,go))==null?void 0:r.get(t);s&&(s.setCanvas(e,n),a(this,go).delete(t))}addMissingCanvas(t,e){(a(this,go)||m(this,go,new Map)).set(t,e)}};Gc=new WeakMap,Un=new WeakMap,Wc=new WeakMap,le=new WeakMap,_e=new WeakMap,Xc=new WeakMap,wi=new WeakMap,Yc=new WeakMap,Ai=new WeakMap,nn=new WeakMap,ao=new WeakMap,lo=new WeakMap,qc=new WeakMap,co=new WeakMap,vs=new WeakMap,bi=new WeakMap,Na=new WeakMap,rf=new WeakMap,of=new WeakMap,Kc=new WeakMap,af=new WeakMap,ws=new WeakMap,uo=new WeakMap,Qc=new WeakMap,ho=new WeakMap,As=new WeakMap,ny=new WeakMap,fo=new WeakMap,Jc=new WeakMap,lf=new WeakMap,po=new WeakMap,Ia=new WeakMap,Zc=new WeakMap,go=new WeakMap,cf=new WeakMap,we=new WeakMap,Ct=new WeakMap,ir=new WeakMap,mo=new WeakMap,yo=new WeakMap,uf=new WeakMap,tu=new WeakMap,hf=new WeakMap,vo=new WeakMap,bs=new WeakMap,sr=new WeakMap,df=new WeakMap,ff=new WeakMap,Si=new WeakMap,V=new WeakSet,Bg=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Dv=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of a(this,_e).values())if(n.hasTextLayer(t))return n;return null},v_=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=S(this,V,Bg).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(a(this,As)||m(this,As,new BR(this)),a(this,As).show(n,s,this.direction==="ltr"))},w_=function(){var r,o,l;const t=document.getSelection();if(!t||t.isCollapsed){a(this,ir)&&((r=a(this,As))==null||r.hide(),m(this,ir,null),S(this,V,fn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,ir))return;const s=S(this,V,Bg).call(this,t).closest(".textLayer");if(!s){a(this,ir)&&((o=a(this,As))==null||o.hide(),m(this,ir,null),S(this,V,fn).call(this,{hasSelectedText:!1}));return}if((l=a(this,As))==null||l.hide(),m(this,ir,e),S(this,V,fn).call(this,{hasSelectedText:!0}),!(a(this,we)!==at.HIGHLIGHT&&a(this,we)!==at.NONE)&&(a(this,we)===at.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),m(this,ho,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=a(this,we)===at.HIGHLIGHT?S(this,V,Dv).call(this,s):null;if(c==null||c.toggleDrawing(),a(this,Jc)){const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&S(this,V,Yh).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else c==null||c.toggleDrawing(!0),S(this,V,Yh).call(this,"main_toolbar")}},Yh=function(t=""){a(this,we)===at.HIGHLIGHT?this.highlightSelection(t):a(this,rf)&&S(this,V,v_).call(this)},A_=function(){document.addEventListener("selectionchange",S(this,V,w_).bind(this),{signal:this._signal})},b_=function(){if(a(this,uo))return;m(this,uo,new AbortController);const t=this.combinedSignal(a(this,uo));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},S_=function(){var t;(t=a(this,uo))==null||t.abort(),m(this,uo,null)},Nv=function(){if(a(this,po))return;m(this,po,new AbortController);const t=this.combinedSignal(a(this,po));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},x_=function(){var t;(t=a(this,po))==null||t.abort(),m(this,po,null)},Iv=function(){if(a(this,ao))return;m(this,ao,new AbortController);const t=this.combinedSignal(a(this,ao));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},Fv=function(){var t;(t=a(this,ao))==null||t.abort(),m(this,ao,null)},E_=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},fn=function(t){Object.entries(t).some(([n,s])=>a(this,hf)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,hf),t)}),a(this,we)===at.HIGHLIGHT&&t.hasSelectedEditor===!1&&S(this,V,Ks).call(this,[[vt.HIGHLIGHT_FREE,!0]]))},Ks=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},__=async function(){if(!a(this,fo)){m(this,fo,!0);const t=[];for(const e of a(this,_e).values())t.push(e.enable());await Promise.all(t);for(const e of a(this,le).values())e.enable()}},C_=function(){if(this.unselectAll(),a(this,fo)){m(this,fo,!1);for(const t of a(this,_e).values())t.disable();for(const t of a(this,le).values())t.disable()}},Ov=function(t){const e=a(this,_e).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},T_=function(){let t=null;for(t of a(this,Ct));return t},qh=function(){if(a(this,le).size===0)return!0;if(a(this,le).size===1)for(const t of a(this,le).values())return t.isEmpty();return!1},Bv=function(t){for(const e of a(this,Ct))e.unselect();a(this,Ct).clear();for(const e of t)e.isEmpty()||(a(this,Ct).add(e),e.select());S(this,V,fn).call(this,{hasSelectedEditor:this.hasSelection})},O(kc,"TRANSLATE_SMALL",1),O(kc,"TRANSLATE_BIG",10);let da=kc;var Le,Ss,Hi,eu,xs,Hn,nu,Es,Tn,rr,Fa,_s,wo,is,Kh,jg;const pn=class pn{constructor(t){A(this,is);A(this,Le,null);A(this,Ss,!1);A(this,Hi,null);A(this,eu,null);A(this,xs,null);A(this,Hn,null);A(this,nu,!1);A(this,Es,null);A(this,Tn,null);A(this,rr,null);A(this,Fa,null);A(this,_s,!1);m(this,Tn,t),m(this,_s,t._uiManager.useNewAltTextFlow),a(pn,wo)||m(pn,wo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){pn._l10n??(pn._l10n=t)}async render(){const t=m(this,Hi,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=m(this,eu,document.createElement("span"));t.append(e),a(this,_s)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a(pn,wo).missing),e.setAttribute("data-l10n-id",a(pn,wo)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=a(this,Tn)._uiManager._signal;t.addEventListener("contextmenu",di,{signal:n}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),a(this,Tn)._uiManager.editAltText(a(this,Tn)),a(this,_s)&&a(this,Tn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,is,Kh)}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(m(this,nu,!0),s(r))},{signal:n}),await S(this,is,jg).call(this),t}finish(){a(this,Hi)&&(a(this,Hi).focus({focusVisible:a(this,nu)}),m(this,nu,!1))}isEmpty(){return a(this,_s)?a(this,Le)===null:!a(this,Le)&&!a(this,Ss)}hasData(){return a(this,_s)?a(this,Le)!==null||!!a(this,rr):this.isEmpty()}get guessedText(){return a(this,rr)}async setGuessedText(t){a(this,Le)===null&&(m(this,rr,t),m(this,Fa,await pn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),S(this,is,jg).call(this))}toggleAltTextBadge(t=!1){var e;if(!a(this,_s)||a(this,Le)){(e=a(this,Es))==null||e.remove(),m(this,Es,null);return}if(!a(this,Es)){const n=m(this,Es,document.createElement("div"));n.className="noAltTextBadge",a(this,Tn).div.append(n)}a(this,Es).classList.toggle("hidden",!t)}serialize(t){let e=a(this,Le);return!t&&a(this,rr)===e&&(e=a(this,Fa)),{altText:e,decorative:a(this,Ss),guessedText:a(this,rr),textWithDisclaimer:a(this,Fa)}}get data(){return{altText:a(this,Le),decorative:a(this,Ss)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:r=!1}){n&&(m(this,rr,n),m(this,Fa,s)),!(a(this,Le)===t&&a(this,Ss)===e)&&(r||(m(this,Le,t),m(this,Ss,e)),S(this,is,jg).call(this))}toggle(t=!1){a(this,Hi)&&(!t&&a(this,Hn)&&(clearTimeout(a(this,Hn)),m(this,Hn,null)),a(this,Hi).disabled=!t)}shown(){a(this,Tn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,is,Kh)}})}destroy(){var t,e;(t=a(this,Hi))==null||t.remove(),m(this,Hi,null),m(this,eu,null),m(this,xs,null),(e=a(this,Es))==null||e.remove(),m(this,Es,null)}};Le=new WeakMap,Ss=new WeakMap,Hi=new WeakMap,eu=new WeakMap,xs=new WeakMap,Hn=new WeakMap,nu=new WeakMap,Es=new WeakMap,Tn=new WeakMap,rr=new WeakMap,Fa=new WeakMap,_s=new WeakMap,wo=new WeakMap,is=new WeakSet,Kh=function(){return a(this,Le)&&"added"||a(this,Le)===null&&this.guessedText&&"review"||"missing"},jg=async function(){var s,r,o;const t=a(this,Hi);if(!t)return;if(a(this,_s)){if(t.classList.toggle("done",!!a(this,Le)),t.setAttribute("data-l10n-id",a(pn,wo)[a(this,is,Kh)]),(s=a(this,eu))==null||s.setAttribute("data-l10n-id",a(pn,wo)[`${a(this,is,Kh)}-label`]),!a(this,Le)){(r=a(this,xs))==null||r.remove();return}}else{if(!a(this,Le)&&!a(this,Ss)){t.classList.remove("done"),(o=a(this,xs))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,xs);if(!e){m(this,xs,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,Tn).id}`;const l=100,c=a(this,Tn)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(a(this,Hn)),m(this,Hn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{m(this,Hn,setTimeout(()=>{m(this,Hn,null),a(this,xs).classList.add("show"),a(this,Tn)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),t.addEventListener("mouseleave",()=>{var u;a(this,Hn)&&(clearTimeout(a(this,Hn)),m(this,Hn,null)),(u=a(this,xs))==null||u.classList.remove("show")},{signal:c})}a(this,Ss)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,Le)),e.parentNode||t.append(e);const n=a(this,Tn).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},A(pn,wo,null),O(pn,"_l10n",null);let Hm=pn;var Ue,xi,Oa,Ht,pf,Ba,$i,ja,za,Ua,gf,jv;class gg{constructor(t){A(this,gf);A(this,Ue,null);A(this,xi,null);A(this,Oa,!1);A(this,Ht,null);A(this,pf,null);A(this,Ba,null);A(this,$i,null);A(this,ja,null);A(this,za,!1);A(this,Ua,null);m(this,Ht,t)}renderForToolbar(){const t=m(this,xi,document.createElement("button"));return t.className="comment",S(this,gf,jv).call(this,t,!1)}renderForStandalone(){const t=m(this,Ue,document.createElement("button"));t.className="annotationCommentButton";const e=a(this,Ht).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(a(this,Ht)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const s=a(this,Ht).commentButtonColor;s&&(n.backgroundColor=s)}return S(this,gf,jv).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=a(this,Ue)??a(this,xi))==null||t.focus()},0)}onUpdatedColor(){if(!a(this,Ue))return;const t=a(this,Ht).commentButtonColor;t&&(a(this,Ue).style.backgroundColor=t),a(this,Ht)._uiManager.updatePopupColor(a(this,Ht))}get commentButtonWidth(){var t;return(((t=a(this,Ue))==null?void 0:t.getBoundingClientRect().width)??0)/a(this,Ht).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(a(this,Ua))return a(this,Ua);if(!a(this,Ue))return null;const{x:t,y:e,height:n}=a(this,Ue).getBoundingClientRect(),{x:s,y:r,width:o,height:l}=a(this,Ht).parent.boundingClientRect;return[(t-s)/o,(e+n-r)/l]}set commentPopupPositionInLayer(t){m(this,Ua,t)}hasDefaultPopupPosition(){return a(this,Ua)===null}removeStandaloneCommentButton(){var t;(t=a(this,Ue))==null||t.remove(),m(this,Ue,null)}removeToolbarCommentButton(){var t;(t=a(this,xi))==null||t.remove(),m(this,xi,null)}setCommentButtonStates({selected:t,hasPopup:e}){a(this,Ue)&&(a(this,Ue).classList.toggle("selected",t),a(this,Ue).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let n,s;if(e)[n,s]=e;else{[n,s]=a(this,Ht).commentButtonPosition;const{width:h,height:d,x:f,y:p}=a(this,Ht);n=f+n*h,s=p+s*d}const r=a(this,Ht).parent.boundingClientRect,{x:o,y:l,width:c,height:u}=r;a(this,Ht)._uiManager.editComment(a(this,Ht),o+n*c,l+s*u,{...t,parentDimensions:r})}finish(){a(this,xi)&&(a(this,xi).focus({focusVisible:a(this,Oa)}),m(this,Oa,!1))}isDeleted(){return a(this,za)||a(this,$i)===""}isEmpty(){return a(this,$i)===null}hasBeenEdited(){return this.isDeleted()||a(this,$i)!==a(this,pf)}serialize(){return this.data}get data(){return{text:a(this,$i),richText:a(this,Ba),date:a(this,ja),deleted:this.isDeleted()}}set data(t){if(t!==a(this,$i)&&m(this,Ba,null),t===null){m(this,$i,""),m(this,za,!0);return}m(this,$i,t),m(this,ja,new Date),m(this,za,!1)}setInitialText(t,e=null){m(this,pf,t),this.data=t,m(this,ja,null),m(this,Ba,e)}shown(){}destroy(){var t,e;(t=a(this,xi))==null||t.remove(),m(this,xi,null),(e=a(this,Ue))==null||e.remove(),m(this,Ue,null),m(this,$i,""),m(this,Ba,null),m(this,ja,null),m(this,Ht,null),m(this,Oa,!1),m(this,za,!1)}}Ue=new WeakMap,xi=new WeakMap,Oa=new WeakMap,Ht=new WeakMap,pf=new WeakMap,Ba=new WeakMap,$i=new WeakMap,ja=new WeakMap,za=new WeakMap,Ua=new WeakMap,gf=new WeakSet,jv=function(t,e){if(!a(this,Ht)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[a(this,Ht)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=a(this,Ht)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",di,{signal:n}),e&&(t.addEventListener("focusin",r=>{a(this,Ht)._focusEventsAllowed=!1,ie(r)},{capture:!0,signal:n}),t.addEventListener("focusout",r=>{a(this,Ht)._focusEventsAllowed=!0,ie(r)},{capture:!0,signal:n})),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),t===a(this,xi)?this.edit():a(this,Ht).toggleComment(!0)};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(m(this,Oa,!0),s(r))},{signal:n}),t.addEventListener("pointerenter",()=>{a(this,Ht).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{a(this,Ht).toggleComment(!1,!1)},{signal:n}),t};var iu,Ha,mf,yf,vf,wf,Af,or,$a,ar,Va,lr,fa,k_,P_,L_;const gA=class gA{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:o=null,signal:l}){A(this,fa);A(this,iu);A(this,Ha,!1);A(this,mf,null);A(this,yf);A(this,vf);A(this,wf);A(this,Af);A(this,or,null);A(this,$a);A(this,ar,null);A(this,Va);A(this,lr,null);m(this,iu,t),m(this,mf,n),m(this,yf,e),m(this,vf,s),m(this,wf,r),m(this,Af,o),m(this,Va,new AbortController),m(this,$a,AbortSignal.any([l,a(this,Va).signal])),t.addEventListener("touchstart",S(this,fa,k_).bind(this),{passive:!1,signal:a(this,$a)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ls.pixelRatio}destroy(){var t,e;(t=a(this,Va))==null||t.abort(),m(this,Va,null),(e=a(this,or))==null||e.abort(),m(this,or,null)}};iu=new WeakMap,Ha=new WeakMap,mf=new WeakMap,yf=new WeakMap,vf=new WeakMap,wf=new WeakMap,Af=new WeakMap,or=new WeakMap,$a=new WeakMap,ar=new WeakMap,Va=new WeakMap,lr=new WeakMap,fa=new WeakSet,k_=function(t){var s,r,o;if((s=a(this,yf))!=null&&s.call(this))return;if(t.touches.length===1){if(a(this,or))return;const l=m(this,or,new AbortController),c=AbortSignal.any([a(this,$a),l.signal]),u=a(this,iu),h={capture:!0,signal:c,passive:!1},d=f=>{var p;f.pointerType==="touch"&&((p=a(this,or))==null||p.abort(),m(this,or,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ie(f),d(f))},h),u.addEventListener("pointerup",d,h),u.addEventListener("pointercancel",d,h);return}if(!a(this,lr)){m(this,lr,new AbortController);const l=AbortSignal.any([a(this,$a),a(this,lr).signal]),c=a(this,iu),u={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",S(this,fa,P_).bind(this),u);const h=S(this,fa,L_).bind(this);c.addEventListener("touchend",h,u),c.addEventListener("touchcancel",h,u),u.capture=!0,c.addEventListener("pointerdown",ie,u),c.addEventListener("pointermove",ie,u),c.addEventListener("pointercancel",ie,u),c.addEventListener("pointerup",ie,u),(r=a(this,vf))==null||r.call(this)}if(ie(t),t.touches.length!==2||(o=a(this,mf))!=null&&o.call(this)){m(this,ar,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),m(this,ar,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},P_=function(t){var E;if(!a(this,ar)||t.touches.length!==2)return;ie(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:s,screenY:r}=e,{screenX:o,screenY:l}=n,c=a(this,ar),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=c,p=d-u,y=f-h,w=o-s,x=l-r,g=Math.hypot(w,x)||1,v=Math.hypot(p,y)||1;if(!a(this,Ha)&&Math.abs(v-g)<=gA.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=s,c.touch0Y=r,c.touch1X=o,c.touch1Y=l,!a(this,Ha)){m(this,Ha,!0);return}const b=[(s+o)/2,(r+l)/2];(E=a(this,wf))==null||E.call(this,b,v,g)},L_=function(t){var e;t.touches.length>=2||(a(this,lr)&&(a(this,lr).abort(),m(this,lr,null),(e=a(this,Af))==null||e.call(this)),a(this,ar)&&(ie(t),m(this,ar,null),m(this,Ha,!1)))};let Yd=gA;var Ga,Vi,Qt,Ft,cr,su,Ao,bf,He,Wa,ur,Cs,bo,Sf,Xa,$n,xf,Ya,hr,Ts,ru,ou,Ei,qa,Ef,iy,st,zv,_f,Uv,zg,R_,M_,Hv,Ug,$v,D_,N_,I_,Vv,F_,Gv,O_,B_,j_,Wv,Qh;const ut=class ut{constructor(t){A(this,st);A(this,Ga,null);A(this,Vi,null);A(this,Qt,null);A(this,Ft,null);A(this,cr,null);A(this,su,!1);A(this,Ao,null);A(this,bf,"");A(this,He,null);A(this,Wa,null);A(this,ur,null);A(this,Cs,null);A(this,bo,null);A(this,Sf,"");A(this,Xa,!1);A(this,$n,null);A(this,xf,!1);A(this,Ya,!1);A(this,hr,!1);A(this,Ts,null);A(this,ru,0);A(this,ou,0);A(this,Ei,null);A(this,qa,null);O(this,"isSelected",!1);O(this,"_isCopy",!1);O(this,"_editToolbar",null);O(this,"_initialOptions",Object.create(null));O(this,"_initialData",null);O(this,"_isVisible",!0);O(this,"_uiManager",null);O(this,"_focusEventsAllowed",!0);A(this,Ef,!1);A(this,iy,ut._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[r,o];const[l,c]=this.parentDimensions;this.x=t.x/l,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=ut.prototype._resizeWithKeyboard,e=da.TRANSLATE_SMALL,n=da.TRANSLATE_BIG;return dt(this,"_resizerKeyboardManager",new $p([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],ut.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return dt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new UR({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(ut._l10n??(ut._l10n=t),ut._l10nResizer||(ut._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ut._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);ut._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){zt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,Ef)}set _isDraggable(t){var e;m(this,Ef,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,iy)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(S(this,st,Qh).call(this),(e=a(this,Cs))==null||e.remove(),m(this,Cs,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,Xa)?m(this,Xa,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[r,o]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/r,this.y=(e+s)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,s]=this.parentDimensions;this.setAt(t*n,e*s,this.width*n,this.height*s),this._onTranslated()}translate(t,e){S(this,st,zv).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,$n)||m(this,$n,[this.x,this.y,this.width,this.height]),S(this,st,zv).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){a(this,$n)||m(this,$n,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[s,r]}=this;if(this.x+=t/s,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,u]=this.getBaseTranslation();o+=c,l+=u;const{style:h}=n;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!a(this,$n)&&(a(this,$n)[0]!==this.x||a(this,$n)[1]!==this.y)}get _hasBeenResized(){return!!a(this,$n)&&(a(this,$n)[2]!==this.width||a(this,$n)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=ut,s=n/t,r=n/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,s]}=this;let{x:r,y:o,width:l,height:c}=this;if(l*=n,c*=s,r*=n,o*=s,this._mustFixPosition)switch(t){case 0:r=ln(r,0,n-l),o=ln(o,0,s-c);break;case 90:r=ln(r,0,n-c),o=ln(o,l,s);break;case 180:r=ln(r,l,n),o=ln(o,c,s);break;case 270:r=ln(r,c,n),o=ln(o,0,s-l);break}this.x=r/=n,this.y=o/=s;const[u,h]=this.getBaseTranslation();r+=u,o+=h,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return S(n=ut,_f,Uv).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return S(n=ut,_f,Uv).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=a(this,Qt))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||a(this,Ya))return this._editToolbar;this._editToolbar=new Pv(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=a(this,Qt))==null||e.destroy()}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return a(this,Qt)||(Hm.initialize(ut._l10n),m(this,Qt,new Hm(this)),a(this,Ga)&&(a(this,Qt).data=a(this,Ga),m(this,Ga,null))),a(this,Qt)}get altTextData(){var t;return(t=a(this,Qt))==null?void 0:t.data}set altTextData(t){a(this,Qt)&&(a(this,Qt).data=t)}get guessedAltText(){var t;return(t=a(this,Qt))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=a(this,Qt))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=a(this,Qt))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,Qt)&&!a(this,Qt).isEmpty()}hasAltTextData(){var t;return((t=a(this,Qt))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=a(this,Ft))==null||t.focusButton()}addCommentButton(){return a(this,Ft)||m(this,Ft,new gg(this))}addStandaloneCommentButton(){if(a(this,cr)){this._uiManager.isEditingMode()&&a(this,cr).classList.remove("hidden");return}this.hasComment&&(m(this,cr,a(this,Ft).renderForStandalone()),this.div.append(a(this,cr)))}removeStandaloneCommentButton(){a(this,Ft).removeStandaloneCommentButton(),m(this,cr,null)}hideStandaloneCommentButton(){var t;(t=a(this,cr))==null||t.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:n,deleted:s}}=a(this,Ft);return{text:e,richText:t,date:n,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){a(this,Ft)||m(this,Ft,new gg(this)),a(this,Ft).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(a(this,Ft)||m(this,Ft,new gg(this)),a(this,Ft).setInitialText(t,n),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var t;return(t=a(this,Ft))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=a(this,Ft))==null?void 0:t.isDeleted()}get hasComment(){return!!a(this,Ft)&&!a(this,Ft).isEmpty()&&!a(this,Ft).isDeleted()}async editComment(t){a(this,Ft)||m(this,Ft,new gg(this)),a(this,Ft).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){a(this,Ft).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,s]=t.rect,[r]=this.pageDimensions,[o]=this.pageTranslation,l=o+r+1,c=s-100,u=l+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,c,u,s]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){a(this,Ft).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=a(this,su)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),S(this,st,Gv).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),m_(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,qa)||m(this,qa,new Yd({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:S(this,st,D_).bind(this),onPinching:S(this,st,N_).bind(this),onPinchEnd:S(this,st,I_).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=je.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(m(this,Xa,!0),this._isDraggable){S(this,st,F_).call(this,t);return}S(this,st,Vv).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,Ts)&&clearTimeout(a(this,Ts)),m(this,Ts,setTimeout(()=>{var t;m(this,Ts,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[l,c]=this.pageTranslation,u=t/s,h=e/s,d=this.x*r,f=this.y*o,p=this.width*r,y=this.height*o;switch(n){case 0:return[d+u+l,o-f-h-y+c,d+u+p+l,o-f-h+c];case 90:return[d+h+l,o-f+u+c,d+h+y+l,o-f+u+p+c];case 180:return[d-u-p+l,o-f+h+c,d-u+l,o-f+h+y+c];case 270:return[d-h-y+l,o-f-u-p+c,d-h+l,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,r,o]=t,l=r-n,c=o-s;switch(this.rotation){case 0:return[n,e-o,l,c];case 90:return[n,e-s,c,l];case 180:return[r,e-s,l,c];case 270:return[r,e-o,c,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ut._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=a(this,Ft))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:s,deleted:r,richText:o},uid:l,pageIndex:c,creationDate:u,modificationDate:h}=this;return{id:l,pageIndex:c,rect:this.getPDFRect(),richText:o,contentsObj:{str:t},creationDate:u,modificationDate:n||h,popupRef:!r,color:e,opacity:s}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),m(this,Ya,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),m(this,Ya,!1),!0):!1}isInEditMode(){return a(this,Ya)}shouldGetKeyboardEvents(){return a(this,hr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&s>0&&t<r&&n>0}rebuild(){S(this,st,Gv).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});s.rotation=t.rotation,m(s,Ga,t.accessibilityData),s._isCopy=t.isCopy||!1;const[r,o]=s.pageDimensions,[l,c,u,h]=s.getRectInCurrentCoords(t.rect,o);return s.x=l/r,s.y=c/o,s.width=u/r,s.height=h/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=a(this,bo))==null||t.abort(),m(this,bo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,Ts)&&(clearTimeout(a(this,Ts)),m(this,Ts,null)),S(this,st,Qh).call(this),this.removeEditToolbar(),a(this,Ei)){for(const n of a(this,Ei).values())clearTimeout(n);m(this,Ei,null)}this.parent=null,(e=a(this,qa))==null||e.destroy(),m(this,qa,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(S(this,st,R_).call(this),a(this,He).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,s,r,o]=this.getPDFRect();return[ut._round(n+(r-n)*t),ut._round(s+(o-s)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return a(this,Ft).commentPopupPositionInLayer}set commentPopupPosition(t){a(this,Ft).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return a(this,Ft).hasDefaultPopupPosition()}get commentButtonWidth(){return a(this,Ft).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){a(this,Ft).setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),m(this,ur,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,He).children;if(!a(this,Vi)){m(this,Vi,Array.from(e));const o=S(this,st,O_).bind(this),l=S(this,st,B_).bind(this),c=this._uiManager._signal;for(const u of a(this,Vi)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",l,{signal:c}),u.addEventListener("focus",S(this,st,j_).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",ut._l10nResizer[h])}}const n=a(this,Vi)[0];let s=0;for(const o of e){if(o===n)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(a(this,Vi).length/4);if(r!==s){if(r<s)for(let l=0;l<s-r;l++)a(this,He).append(a(this,He).firstChild);else if(r>s)for(let l=0;l<r-s;l++)a(this,He).firstChild.before(a(this,He).lastChild);let o=0;for(const l of e){const u=a(this,Vi)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",ut._l10nResizer[u])}}S(this,st,Wv).call(this,0),m(this,hr,!0),a(this,He).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,hr)&&S(this,st,$v).call(this,a(this,Sf),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){S(this,st,Qh).call(this),this.div.focus()}select(){var t,e,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(n=a(this,Qt))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,n,s,r;this.isSelected&&(this.isSelected=!1,(t=a(this,He))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=a(this,Qt))==null||r.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return a(this,xf)}set isEditing(t){m(this,xf,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,Ei)||m(this,Ei,new Map);const{action:n}=t;let s=a(this,Ei).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),a(this,Ei).delete(n),a(this,Ei).size===0&&m(this,Ei,null)},ut._telemetryTimeout),a(this,Ei).set(n,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),m(this,su,!1)}disable(){this.div&&(this.div.tabIndex=-1),m(this,su,!0)}updateFakeAnnotationElement(t){if(!a(this,Cs)&&!this.deleted){m(this,Cs,t.addFakeAnnotation(this));return}if(this.deleted){a(this,Cs).remove(),m(this,Cs,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&a(this,Cs).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Ga=new WeakMap,Vi=new WeakMap,Qt=new WeakMap,Ft=new WeakMap,cr=new WeakMap,su=new WeakMap,Ao=new WeakMap,bf=new WeakMap,He=new WeakMap,Wa=new WeakMap,ur=new WeakMap,Cs=new WeakMap,bo=new WeakMap,Sf=new WeakMap,Xa=new WeakMap,$n=new WeakMap,xf=new WeakMap,Ya=new WeakMap,hr=new WeakMap,Ts=new WeakMap,ru=new WeakMap,ou=new WeakMap,Ei=new WeakMap,qa=new WeakMap,Ef=new WeakMap,iy=new WeakMap,st=new WeakSet,zv=function([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},_f=new WeakSet,Uv=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},zg=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},R_=function(){if(a(this,He))return;m(this,He,document.createElement("div")),a(this,He).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const s=document.createElement("div");a(this,He).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",S(this,st,M_).bind(this,n),{signal:e}),s.addEventListener("contextmenu",di,{signal:e}),s.tabIndex=-1}this.div.prepend(a(this,He))},M_=function(t,e){var h;e.preventDefault();const{isMac:n}=je.platform;if(e.button!==0||e.ctrlKey&&n)return;(h=a(this,Qt))==null||h.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,m(this,Wa,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",S(this,st,$v).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",ie,{passive:!1,signal:o}),window.addEventListener("contextmenu",di,{signal:o}),m(this,ur,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=a(this,Qt))==null||d.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=l,this.div.style.cursor=c,S(this,st,Ug).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},Hv=function(t,e,n,s){this.width=n,this.height=s,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},Ug=function(){if(!a(this,ur))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=a(this,ur);m(this,ur,null);const r=this.x,o=this.y,l=this.width,c=this.height;r===t&&o===e&&l===n&&c===s||this.addCommands({cmd:S(this,st,Hv).bind(this,r,o,l,c),undo:S(this,st,Hv).bind(this,t,e,n,s),mustExec:!0})},$v=function(t,e){const[n,s]=this.parentDimensions,r=this.x,o=this.y,l=this.width,c=this.height,u=ut.MIN_SIZE/n,h=ut.MIN_SIZE/s,d=S(this,st,zg).call(this,this.rotation),f=(j,U)=>[d[0]*j+d[2]*U,d[1]*j+d[3]*U],p=S(this,st,zg).call(this,360-this.rotation),y=(j,U)=>[p[0]*j+p[2]*U,p[1]*j+p[3]*U];let w,x,g=!1,v=!1;switch(t){case"topLeft":g=!0,w=(j,U)=>[0,0],x=(j,U)=>[j,U];break;case"topMiddle":w=(j,U)=>[j/2,0],x=(j,U)=>[j/2,U];break;case"topRight":g=!0,w=(j,U)=>[j,0],x=(j,U)=>[0,U];break;case"middleRight":v=!0,w=(j,U)=>[j,U/2],x=(j,U)=>[0,U/2];break;case"bottomRight":g=!0,w=(j,U)=>[j,U],x=(j,U)=>[0,0];break;case"bottomMiddle":w=(j,U)=>[j/2,U],x=(j,U)=>[j/2,0];break;case"bottomLeft":g=!0,w=(j,U)=>[0,U],x=(j,U)=>[j,0];break;case"middleLeft":v=!0,w=(j,U)=>[0,U/2],x=(j,U)=>[j,U/2];break}const b=w(l,c),E=x(l,c);let _=f(...E);const C=ut._round(r+_[0]),T=ut._round(o+_[1]);let k=1,P=1,L,M;if(e.fromKeyboard)({deltaX:L,deltaY:M}=e);else{const{screenX:j,screenY:U}=e,[D,H]=a(this,Wa);[L,M]=this.screenToPageTranslation(j-D,U-H),a(this,Wa)[0]=j,a(this,Wa)[1]=U}if([L,M]=y(L/n,M/s),g){const j=Math.hypot(l,c);k=P=Math.max(Math.min(Math.hypot(E[0]-b[0]-L,E[1]-b[1]-M)/j,1/l,1/c),u/l,h/c)}else v?k=ln(Math.abs(E[0]-b[0]-L),u,1)/l:P=ln(Math.abs(E[1]-b[1]-M),h,1)/c;const I=ut._round(l*k),$=ut._round(c*P);_=f(...x(I,$));const N=C-_[0],W=T-_[1];a(this,$n)||m(this,$n,[this.x,this.y,this.width,this.height]),this.width=I,this.height=$,this.x=N,this.y=W,this.setDims(),this.fixAndSetPosition(),this._onResizing()},D_=function(){var t;m(this,ur,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=a(this,Qt))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},N_=function(t,e,n){let r=.7*(n/e)+1-.7;if(r===1)return;const o=S(this,st,zg).call(this,this.rotation),l=(C,T)=>[o[0]*C+o[2]*T,o[1]*C+o[3]*T],[c,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,p=this.height,y=ut.MIN_SIZE/c,w=ut.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/p),y/f,w/p);const x=ut._round(f*r),g=ut._round(p*r);if(x===f&&g===p)return;a(this,$n)||m(this,$n,[h,d,f,p]);const v=l(f/2,p/2),b=ut._round(h+v[0]),E=ut._round(d+v[1]),_=l(x/2,g/2);this.x=b-_[0],this.y=E-_[1],this.width=x,this.height=g,this.setDims(),this.fixAndSetPosition(),this._onResizing()},I_=function(){var t;(t=a(this,Qt))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),S(this,st,Ug).call(this)},Vv=function(t){const{isMac:e}=je.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},F_=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:r},l=u=>{s.abort(),m(this,Ao,null),m(this,Xa,!1),this._uiManager.endDragSession()||S(this,st,Vv).call(this,u),n&&this._onStopDragging()};e&&(m(this,ru,t.clientX),m(this,ou,t.clientY),m(this,Ao,t.pointerId),m(this,bf,t.pointerType),window.addEventListener("pointermove",u=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==a(this,Ao)){ie(u);return}const[p,y]=this.screenToPageTranslation(h-a(this,ru),d-a(this,ou));m(this,ru,h),m(this,ou,d),this._uiManager.dragSelectedEditors(p,y)},o),window.addEventListener("touchmove",ie,o),window.addEventListener("pointerdown",u=>{u.pointerType===a(this,bf)&&(a(this,qa)||u.isPrimary)&&l(u),ie(u)},o));const c=u=>{if(!a(this,Ao)||a(this,Ao)===u.pointerId){l(u);return}ie(u)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},Gv=function(){if(a(this,bo)||!this.div)return;m(this,bo,new AbortController);const t=this._uiManager.combinedSignal(a(this,bo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},O_=function(t){ut._resizerKeyboardManager.exec(this,t)},B_=function(t){var e;a(this,hr)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,He)&&S(this,st,Qh).call(this)},j_=function(t){m(this,Sf,a(this,hr)?t:"")},Wv=function(t){if(a(this,Vi))for(const e of a(this,Vi))e.tabIndex=t},Qh=function(){m(this,hr,!1),S(this,st,Wv).call(this,-1),S(this,st,Ug).call(this)},A(ut,_f),O(ut,"_l10n",null),O(ut,"_l10nResizer",null),O(ut,"_borderLineWidth",-1),O(ut,"_colorManager",new Mv),O(ut,"_zIndex",1),O(ut,"_telemetryTimeout",1e3);let Vt=ut;class UR extends Vt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const eS=3285377520,gi=4294901760,gs=65535;class z_{constructor(t){this.h1=t?t&4294967295:eS,this.h2=t?t&4294967295:eS}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let w=0,x=t.length;w<x;w++){const g=t.charCodeAt(w);g<=255?e[n++]=g:(e[n++]=g>>>8,e[n++]=g&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,r=n-s*4,o=new Uint32Array(e.buffer,0,s);let l=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&gs,y=f&gs;for(let w=0;w<s;w++)w&1?(l=o[w],l=l*d&gi|l*p&gs,l=l<<15|l>>>17,l=l*f&gi|l*y&gs,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[w],c=c*d&gi|c*p&gs,c=c<<15|c>>>17,c=c*f&gi|c*y&gs,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,r){case 3:l^=e[s*4+2]<<16;case 2:l^=e[s*4+1]<<8;case 1:l^=e[s*4],l=l*d&gi|l*p&gs,l=l<<15|l>>>17,l=l*f&gi|l*y&gs,s&1?u^=l:h^=l}this.h1=u,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&gi|t*36045&gs,e=e*4283543511&gi|((e<<16|t>>>16)*2950163797&gi)>>>16,t^=e>>>1,t=t*444984403&gi|t*60499&gs,e=e*3301882366&gi|((e<<16|t>>>16)*3120437893&gi)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Xv=Object.freeze({map:null,hash:"",transfer:void 0});var Ka,Qa,dr,$e,sy,U_;class sA{constructor(){A(this,sy);A(this,Ka,!1);A(this,Qa,null);A(this,dr,null);A(this,$e,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=a(this,$e).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return a(this,$e).get(t)}remove(t){const e=a(this,$e).get(t);if(e!==void 0&&(e instanceof Vt&&a(this,dr).delete(e.annotationElementId),a(this,$e).delete(t),a(this,$e).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of a(this,$e).values())if(n instanceof Vt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=a(this,$e).get(t);let s=!1;if(n!==void 0)for(const[r,o]of Object.entries(e))n[r]!==o&&(s=!0,n[r]=o);else s=!0,a(this,$e).set(t,e);s&&S(this,sy,U_).call(this),e instanceof Vt&&((a(this,dr)||m(this,dr,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return a(this,$e).has(t)}get size(){return a(this,$e).size}resetModified(){a(this,Ka)&&(m(this,Ka,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new H_(this)}get serializable(){if(a(this,$e).size===0)return Xv;const t=new Map,e=new z_,n=[],s=Object.create(null);let r=!1;for(const[o,l]of a(this,$e)){const c=l instanceof Vt?l.serialize(!1,s):l;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&n.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Xv}get editorStats(){let t=null;const e=new Map;let n=0,s=0;for(const r of a(this,$e).values()){if(!(r instanceof Vt)){r.popup&&(r.popup.deleted?s+=1:n+=1);continue}r.isCommentDeleted?s+=1:r.hasEditedComment&&(n+=1);const o=r.telemetryFinalData;if(!o)continue;const{type:l}=o;e.has(l)||e.set(l,Object.getPrototypeOf(r).constructor),t||(t=Object.create(null));const c=t[l]||(t[l]=new Map);for(const[u,h]of Object.entries(o)){if(u==="type")continue;let d=c.get(u);d||(d=new Map,c.set(u,d));const f=d.get(h)??0;d.set(h,f+1)}}if((s>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:s,edited:n}),!t)return null;for(const[r,o]of e)t[r]=o.computeTelemetryFinalData(t[r]);return t}resetModifiedIds(){m(this,Qa,null)}updateEditor(t,e){var s;const n=(s=a(this,dr))==null?void 0:s.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=a(this,dr))==null?void 0:e.get(t))||null}get modifiedIds(){if(a(this,Qa))return a(this,Qa);const t=[];if(a(this,dr))for(const e of a(this,dr).values())e.serialize()&&t.push(e.annotationElementId);return m(this,Qa,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return a(this,$e).entries()}}Ka=new WeakMap,Qa=new WeakMap,dr=new WeakMap,$e=new WeakMap,sy=new WeakSet,U_=function(){a(this,Ka)||(m(this,Ka,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Cf;class H_ extends sA{constructor(e){super();A(this,Cf);const{map:n,hash:s,transfer:r}=e.serializable,o=structuredClone(n,r?{transfer:r}:null);m(this,Cf,{map:o,hash:s,transfer:r})}get print(){zt("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,Cf)}get modifiedIds(){return dt(this,"modifiedIds",{ids:new Set,hash:""})}}Cf=new WeakMap;var au;class HR{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){A(this,au,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,au).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||a(this,au).has(t.loadedName))){if(wt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:o}=t,l=new FontFace(s,r,o);this.addNativeFontFace(l);try{await l.load(),a(this,au).add(s),n==null||n(t)}catch{lt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}zt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw lt(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return dt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return dt(this,"isSyncFontLoadingSupported",vn||je.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(wt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return dt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(E,_){return E.charCodeAt(_)<<24|E.charCodeAt(_+1)<<16|E.charCodeAt(_+2)<<8|E.charCodeAt(_+3)&255}function s(E,_,C,T){const k=E.substring(0,_),P=E.substring(_+C);return k+T+P}let r,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;function h(E,_){if(++u>30){lt("Load test font never loaded."),_();return}if(c.font="30px "+E,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){_();return}setTimeout(h.bind(null,E,_))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const y=16,w=1482184792;let x=n(f,y);for(r=0,o=d.length-3;r<o;r+=4)x=x-w+n(d,r)|0;r<d.length&&(x=x-w+n(d+"XXX",r)|0),f=s(f,y,4,PR(x));const g=`url(data:font/opentype;base64,${btoa(f)});`,v=`@font-face {font-family:"${d}";src:${g}}`;this.insertRule(v);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const E of[t.loadedName,d]){const _=this._document.createElement("span");_.textContent="Hi",_.style.fontFamily=E,b.append(_)}this._document.body.append(b),h(d,()=>{b.remove(),e.complete()})}}au=new WeakMap;var Rt;class $R{constructor(t,e=null,n,s){A(this,Rt);this.compiledGlyphs=Object.create(null),m(this,Rt,t),this._inspectFont=e,n&&Object.assign(this,n),s&&(this.charProcOperatorList=s)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${s_(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let s;try{s=t.get(n)}catch(o){lt(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(s||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=r}get black(){return a(this,Rt).black}get bold(){return a(this,Rt).bold}get disableFontFace(){return a(this,Rt).disableFontFace??!1}get fontExtraProperties(){return a(this,Rt).fontExtraProperties??!1}get isInvalidPDFjsFont(){return a(this,Rt).isInvalidPDFjsFont}get isType3Font(){return a(this,Rt).isType3Font}get italic(){return a(this,Rt).italic}get missingFile(){return a(this,Rt).missingFile}get remeasure(){return a(this,Rt).remeasure}get vertical(){return a(this,Rt).vertical}get ascent(){return a(this,Rt).ascent}get defaultWidth(){return a(this,Rt).defaultWidth}get descent(){return a(this,Rt).descent}get bbox(){return a(this,Rt).bbox}get fontMatrix(){return a(this,Rt).fontMatrix}get fallbackName(){return a(this,Rt).fallbackName}get loadedName(){return a(this,Rt).loadedName}get mimetype(){return a(this,Rt).mimetype}get name(){return a(this,Rt).name}get data(){return a(this,Rt).data}clearData(){a(this,Rt).clearData()}get cssFontInfo(){return a(this,Rt).cssFontInfo}get systemFontInfo(){return a(this,Rt).systemFontInfo}get defaultVMetrics(){return a(this,Rt).defaultVMetrics}}Rt=new WeakMap;function VR(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(vn)return i;const t=URL.parse(i,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function GR(i){if(vn&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return zp(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function mg(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const Yv=i=>typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0,WR=i=>typeof i=="object"&&typeof(i==null?void 0:i.name)=="string",$_=DR.bind(null,Yv,WR);var fr,ry;class XR{constructor(){A(this,fr,new Map);A(this,ry,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};a(this,ry).then(()=>{for(const[s]of a(this,fr))s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){lt("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);s=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}a(this,fr).set(e,s)}removeEventListener(t,e){const n=a(this,fr).get(e);n==null||n(),a(this,fr).delete(e)}terminate(){for(const[,t]of a(this,fr))t==null||t();a(this,fr).clear()}}fr=new WeakMap,ry=new WeakMap;const yg={DATA:1,ERROR:2},ve={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function nS(){}function _n(i){if(i instanceof Gr||i instanceof zm||i instanceof Yb||i instanceof Gd||i instanceof b0)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||zt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Gr(i.message);case"InvalidPDFException":return new zm(i.message);case"PasswordException":return new Yb(i.message,i.code);case"ResponseException":return new Gd(i.message,i.status,i.missing);case"UnknownErrorException":return new b0(i.message,i.details)}return new b0(i.message,i.toString())}var lu,Ni,V_,G_,W_,Hg;class Jh{constructor(t,e,n){A(this,Ni);A(this,lu,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",S(this,Ni,V_).bind(this),{signal:a(this,lu).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,n,s){const r=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:t,streamId:r,data:e,desiredSize:u.desiredSize},s),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:o,targetName:l,stream:ve.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{wt(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:ve.CANCEL,streamId:r,reason:_n(u)}),h.promise}},n)}destroy(){var t;(t=a(this,lu))==null||t.abort(),m(this,lu,null)}}lu=new WeakMap,Ni=new WeakSet,V_=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){S(this,Ni,W_).call(this,t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===yg.DATA)s.resolve(t.data);else if(t.callback===yg.ERROR)s.reject(_n(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:n,targetName:s,callback:yg.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:n,targetName:s,callback:yg.ERROR,callbackId:t.callbackId,reason:_n(o)})});return}if(t.streamId){S(this,Ni,G_).call(this,t);return}e(t.data)},G_=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,r=this.comObj,o=this,l=this.actionHandler[t.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:s,stream:ve.ENQUEUE,streamId:e,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:ve.CLOSE,streamId:e}),delete o.streamSinks[e])},error(u){wt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:ve.ERROR,streamId:e,reason:_n(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(l,t.data,c).then(function(){r.postMessage({sourceName:n,targetName:s,stream:ve.START_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:s,stream:ve.START_COMPLETE,streamId:e,reason:_n(u)})})},W_=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,r=this.comObj,o=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case ve.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(_n(t.reason));break;case ve.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(_n(t.reason));break;case ve.PULL:if(!l){r.postMessage({sourceName:n,targetName:s,stream:ve.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,Promise.try(l.onPull||nS).then(function(){r.postMessage({sourceName:n,targetName:s,stream:ve.PULL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:s,stream:ve.PULL_COMPLETE,streamId:e,reason:_n(u)})});break;case ve.ENQUEUE:if(wt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case ve.CLOSE:if(wt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),S(this,Ni,Hg).call(this,o,e);break;case ve.ERROR:wt(o,"error should have stream controller"),o.controller.error(_n(t.reason)),S(this,Ni,Hg).call(this,o,e);break;case ve.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(_n(t.reason)),S(this,Ni,Hg).call(this,o,e);break;case ve.CANCEL:if(!l)break;const c=_n(t.reason);Promise.try(l.onCancel||nS,c).then(function(){r.postMessage({sourceName:n,targetName:s,stream:ve.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:s,stream:ve.CANCEL_COMPLETE,streamId:e,reason:_n(u)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Hg=async function(t,e){var n,s,r;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(s=t.pullCall)==null?void 0:s.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var Tf;class X_{constructor({enableHWA:t=!1}){A(this,Tf,!1);m(this,Tf,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!a(this,Tf)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){zt("Abstract method `_createCanvas` called.")}}Tf=new WeakMap;class YR extends X_{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class Y_{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){zt("Abstract method `_fetch` called.")}}class iS extends Y_{async _fetch(t){const e=await Ch(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):zp(e)}}class q_{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,r){return"none"}destroy(t=!1){}}var Ja,cu,pr,gr,sn,Za,tl,X,tn,Zh,cc,$g,uc,K_,qv,hc,td,ed,Kv,nd;class qR extends q_{constructor({docId:e,ownerDocument:n=globalThis.document}){super();A(this,X);A(this,Ja);A(this,cu);A(this,pr);A(this,gr);A(this,sn);A(this,Za);A(this,tl,0);m(this,gr,e),m(this,sn,n)}addFilter(e){if(!e)return"none";let n=a(this,X,tn).get(e);if(n)return n;const[s,r,o]=S(this,X,$g).call(this,e),l=e.length===1?s:`${s}${r}${o}`;if(n=a(this,X,tn).get(l),n)return a(this,X,tn).set(e,n),n;const c=`g_${a(this,gr)}_transfer_map_${xe(this,tl)._++}`,u=S(this,X,uc).call(this,c);a(this,X,tn).set(e,u),a(this,X,tn).set(l,u);const h=S(this,X,hc).call(this,c);return S(this,X,ed).call(this,s,r,o,h),u}addHCMFilter(e,n){var y;const s=`${e}-${n}`,r="base";let o=a(this,X,Zh).get(r);if((o==null?void 0:o.key)===s||(o?((y=o.filter)==null||y.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},a(this,X,Zh).set(r,o)),!e||!n))return o.url;const l=S(this,X,nd).call(this,e);e=q.makeHexColor(...l);const c=S(this,X,nd).call(this,n);if(n=q.makeHexColor(...c),a(this,X,cc).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return o.url;const u=new Array(256);for(let w=0;w<=255;w++){const x=w/255;u[w]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const h=u.join(","),d=`g_${a(this,gr)}_hcm_filter`,f=o.filter=S(this,X,hc).call(this,d);S(this,X,ed).call(this,h,h,h,f),S(this,X,qv).call(this,f);const p=(w,x)=>{const g=l[w]/255,v=c[w]/255,b=new Array(x+1);for(let E=0;E<=x;E++)b[E]=g+E/x*(v-g);return b.join(",")};return S(this,X,ed).call(this,p(0,5),p(1,5),p(2,5),f),o.url=S(this,X,uc).call(this,d),o.url}addAlphaFilter(e){let n=a(this,X,tn).get(e);if(n)return n;const[s]=S(this,X,$g).call(this,[e]),r=`alpha_${s}`;if(n=a(this,X,tn).get(r),n)return a(this,X,tn).set(e,n),n;const o=`g_${a(this,gr)}_alpha_map_${xe(this,tl)._++}`,l=S(this,X,uc).call(this,o);a(this,X,tn).set(e,l),a(this,X,tn).set(r,l);const c=S(this,X,hc).call(this,o);return S(this,X,Kv).call(this,s,c),l}addLuminosityFilter(e){let n=a(this,X,tn).get(e||"luminosity");if(n)return n;let s,r;if(e?([s]=S(this,X,$g).call(this,[e]),r=`luminosity_${s}`):r="luminosity",n=a(this,X,tn).get(r),n)return a(this,X,tn).set(e,n),n;const o=`g_${a(this,gr)}_luminosity_map_${xe(this,tl)._++}`,l=S(this,X,uc).call(this,o);a(this,X,tn).set(e,l),a(this,X,tn).set(r,l);const c=S(this,X,hc).call(this,o);return S(this,X,K_).call(this,c),e&&S(this,X,Kv).call(this,s,c),l}addHighlightHCMFilter(e,n,s,r,o){var v;const l=`${n}-${s}-${r}-${o}`;let c=a(this,X,Zh).get(e);if((c==null?void 0:c.key)===l||(c?((v=c.filter)==null||v.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},a(this,X,Zh).set(e,c)),!n||!s))return c.url;const[u,h]=[n,s].map(S(this,X,nd).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,y]=[r,o].map(S(this,X,nd).bind(this));f<d&&([d,f,p,y]=[f,d,y,p]),a(this,X,cc).style.color="";const w=(b,E,_)=>{const C=new Array(256),T=(f-d)/_,k=b/255,P=(E-b)/(255*_);let L=0;for(let M=0;M<=_;M++){const I=Math.round(d+M*T),$=k+M*P;for(let N=L;N<=I;N++)C[N]=$;L=I+1}for(let M=L;M<256;M++)C[M]=C[L-1];return C.join(",")},x=`g_${a(this,gr)}_hcm_${e}_filter`,g=c.filter=S(this,X,hc).call(this,x);return S(this,X,qv).call(this,g),S(this,X,ed).call(this,w(p[0],y[0],5),w(p[1],y[1],5),w(p[2],y[2],5),g),c.url=S(this,X,uc).call(this,x),c.url}destroy(e=!1){var n,s,r,o;e&&((n=a(this,Za))!=null&&n.size)||((s=a(this,pr))==null||s.parentNode.parentNode.remove(),m(this,pr,null),(r=a(this,cu))==null||r.clear(),m(this,cu,null),(o=a(this,Za))==null||o.clear(),m(this,Za,null),m(this,tl,0))}}Ja=new WeakMap,cu=new WeakMap,pr=new WeakMap,gr=new WeakMap,sn=new WeakMap,Za=new WeakMap,tl=new WeakMap,X=new WeakSet,tn=function(){return a(this,cu)||m(this,cu,new Map)},Zh=function(){return a(this,Za)||m(this,Za,new Map)},cc=function(){if(!a(this,pr)){const e=a(this,sn).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=a(this,sn).createElementNS(qs,"svg");s.setAttribute("width",0),s.setAttribute("height",0),m(this,pr,a(this,sn).createElementNS(qs,"defs")),e.append(s),s.append(a(this,pr)),a(this,sn).body.append(e)}return a(this,pr)},$g=function(e){if(e.length===1){const u=e[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[n,s,r]=e,o=new Array(256),l=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=n[u]/255,l[u]=s[u]/255,c[u]=r[u]/255;return[o.join(","),l.join(","),c.join(",")]},uc=function(e){if(a(this,Ja)===void 0){m(this,Ja,"");const n=a(this,sn).URL;n!==a(this,sn).baseURI&&(Hp(n)?lt('#createUrl: ignore "data:"-URL for performance reasons.'):m(this,Ja,Z1(n,"")))}return`url(${a(this,Ja)}#${e})`},K_=function(e){const n=a(this,sn).createElementNS(qs,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},qv=function(e){const n=a(this,sn).createElementNS(qs,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},hc=function(e){const n=a(this,sn).createElementNS(qs,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),a(this,X,cc).append(n),n},td=function(e,n,s){const r=a(this,sn).createElementNS(qs,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)},ed=function(e,n,s,r){const o=a(this,sn).createElementNS(qs,"feComponentTransfer");r.append(o),S(this,X,td).call(this,o,"feFuncR",e),S(this,X,td).call(this,o,"feFuncG",n),S(this,X,td).call(this,o,"feFuncB",s)},Kv=function(e,n){const s=a(this,sn).createElementNS(qs,"feComponentTransfer");n.append(s),S(this,X,td).call(this,s,"feFuncA",e)},nd=function(e){return a(this,X,cc).style.color=e,Th(getComputedStyle(a(this,X,cc)).getPropertyValue("color"))};class Q_{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){zt("Abstract method `_fetch` called.")}}class sS extends Q_{async _fetch(t){const e=await Ch(t,"arraybuffer");return new Uint8Array(e)}}class J_{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){zt("Abstract method `_fetch` called.")}}class rS extends J_{async _fetch(t){const e=await Ch(t,"arraybuffer");return new Uint8Array(e)}}vn&&lt("Please use the `legacy` build in Node.js environments.");async function rA(i){const e=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(e)}class KR extends q_{}class QR extends X_{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class JR extends Y_{async _fetch(t){return rA(t)}}class ZR extends Q_{async _fetch(t){return rA(t)}}class tM extends J_{async _fetch(t){return rA(t)}}const oc="__forcedDependency",{floor:oS,ceil:aS}=Math;function vg(i,t,e,n,s,r){i[t*4+0]=Math.min(i[t*4+0],e),i[t*4+1]=Math.min(i[t*4+1],n),i[t*4+2]=Math.max(i[t*4+2],s),i[t*4+3]=Math.max(i[t*4+3],r)}const Qv=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var uu,So;class eM{constructor(t,e){A(this,uu);A(this,So);m(this,uu,t),m(this,So,e)}get length(){return a(this,uu).length}isEmpty(t){return a(this,uu)[t]===Qv}minX(t){return a(this,So)[t*4+0]/256}minY(t){return a(this,So)[t*4+1]/256}maxX(t){return(a(this,So)[t*4+2]+1)/256}maxY(t){return(a(this,So)[t*4+3]+1)/256}}uu=new WeakMap,So=new WeakMap;const wg=(i,t)=>{if(!i)return;let e=i.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},i.set(t,e)),e};var kn,Pn,el,Gi,nl,mr,Tt,Mt,yr,Ln,kf,hu,il,sl,vr,rn,ks,Pf,Jv;class nM{constructor(t,e,n=!1){A(this,Pf);A(this,kn,{__proto__:null});A(this,Pn,{__proto__:null,transform:[],moveText:[],sameLineText:[],[oc]:[]});A(this,el,new Map);A(this,Gi,[]);A(this,nl,[]);A(this,mr,[[1,0,0,1,0,0]]);A(this,Tt,[-1/0,-1/0,1/0,1/0]);A(this,Mt,new Float64Array([1/0,1/0,-1/0,-1/0]));A(this,yr,-1);A(this,Ln,new Set);A(this,kf,new Map);A(this,hu,new Map);A(this,il);A(this,sl);A(this,vr);A(this,rn);A(this,ks);m(this,il,t.width),m(this,sl,t.height),S(this,Pf,Jv).call(this,e),n&&m(this,ks,new Map)}growOperationsCount(t){t>=a(this,rn).length&&S(this,Pf,Jv).call(this,t,a(this,rn))}save(t){return m(this,kn,{__proto__:a(this,kn)}),m(this,Pn,{__proto__:a(this,Pn),transform:{__proto__:a(this,Pn).transform},moveText:{__proto__:a(this,Pn).moveText},sameLineText:{__proto__:a(this,Pn).sameLineText},[oc]:{__proto__:a(this,Pn)[oc]}}),m(this,Tt,{__proto__:a(this,Tt)}),a(this,Gi).push(t),this}restore(t){var s;const e=Object.getPrototypeOf(a(this,kn));if(e===null)return this;m(this,kn,e),m(this,Pn,Object.getPrototypeOf(a(this,Pn))),m(this,Tt,Object.getPrototypeOf(a(this,Tt)));const n=a(this,Gi).pop();return n!==void 0&&((s=wg(a(this,ks),t))==null||s.dependencies.add(n),a(this,rn)[t]=a(this,rn)[n]),this}recordOpenMarker(t){return a(this,Gi).push(t),this}getOpenMarker(){return a(this,Gi).length===0?null:a(this,Gi).at(-1)}recordCloseMarker(t){var n;const e=a(this,Gi).pop();return e!==void 0&&((n=wg(a(this,ks),t))==null||n.dependencies.add(e),a(this,rn)[t]=a(this,rn)[e]),this}beginMarkedContent(t){return a(this,nl).push(t),this}endMarkedContent(t){var n;const e=a(this,nl).pop();return e!==void 0&&((n=wg(a(this,ks),t))==null||n.dependencies.add(e),a(this,rn)[t]=a(this,rn)[e]),this}pushBaseTransform(t){return a(this,mr).push(q.multiplyByDOMMatrix(a(this,mr).at(-1),t.getTransform())),this}popBaseTransform(){return a(this,mr).length>1&&a(this,mr).pop(),this}recordSimpleData(t,e){return a(this,kn)[t]=e,this}recordIncrementalData(t,e){return a(this,Pn)[t].push(e),this}resetIncrementalData(t,e){return a(this,Pn)[t].length=0,this}recordNamedData(t,e){return a(this,el).set(t,e),this}recordSimpleDataFromNamed(t,e,n){a(this,kn)[t]=a(this,el).get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(oc,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in a(this,kn)&&this.recordFutureForcedDependency(e,a(this,kn)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of a(this,Ln))this.recordFutureForcedDependency(oc,t);return this}resetBBox(t){return a(this,yr)!==t&&(m(this,yr,t),a(this,Mt)[0]=1/0,a(this,Mt)[1]=1/0,a(this,Mt)[2]=-1/0,a(this,Mt)[3]=-1/0),this}recordClipBox(t,e,n,s,r,o){const l=q.multiplyByDOMMatrix(a(this,mr).at(-1),e.getTransform()),c=[1/0,1/0,-1/0,-1/0];q.axialAlignedBoundingBox([n,r,s,o],l,c);const u=q.intersect(a(this,Tt),c);return u?(a(this,Tt)[0]=u[0],a(this,Tt)[1]=u[1],a(this,Tt)[2]=u[2],a(this,Tt)[3]=u[3]):(a(this,Tt)[0]=a(this,Tt)[1]=1/0,a(this,Tt)[2]=a(this,Tt)[3]=-1/0),this}recordBBox(t,e,n,s,r,o){const l=a(this,Tt);if(l[0]===1/0)return this;const c=q.multiplyByDOMMatrix(a(this,mr).at(-1),e.getTransform());if(l[0]===-1/0)return q.axialAlignedBoundingBox([n,r,s,o],c,a(this,Mt)),this;const u=[1/0,1/0,-1/0,-1/0];return q.axialAlignedBoundingBox([n,r,s,o],c,u),a(this,Mt)[0]=Math.min(a(this,Mt)[0],Math.max(u[0],l[0])),a(this,Mt)[1]=Math.min(a(this,Mt)[1],Math.max(u[1],l[1])),a(this,Mt)[2]=Math.max(a(this,Mt)[2],Math.min(u[2],l[2])),a(this,Mt)[3]=Math.max(a(this,Mt)[3],Math.min(u[3],l[3])),this}recordCharacterBBox(t,e,n,s=1,r=0,o=0,l){const c=n.bbox;let u,h;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&a(this,hu).get(n),u!==!1&&(h=[0,0,0,0],q.axialAlignedBoundingBox(c,n.fontMatrix,h),(s!==1||r!==0||o!==0)&&q.scaleMinMax([s,0,0,-s,r,o],h),u)))return this.recordBBox(t,e,h[0],h[2],h[1],h[3]);if(!l)return this.recordFullPageBBox(t);const d=l();return c&&h&&u===void 0&&(u=h[0]<=r-d.actualBoundingBoxLeft&&h[2]>=r+d.actualBoundingBoxRight&&h[1]<=o-d.actualBoundingBoxAscent&&h[3]>=o+d.actualBoundingBoxDescent,a(this,hu).set(n,u),u)?this.recordBBox(t,e,h[0],h[2],h[1],h[3]):this.recordBBox(t,e,r-d.actualBoundingBoxLeft,r+d.actualBoundingBoxRight,o-d.actualBoundingBoxAscent,o+d.actualBoundingBoxDescent)}recordFullPageBBox(t){return a(this,Mt)[0]=Math.max(0,a(this,Tt)[0]),a(this,Mt)[1]=Math.max(0,a(this,Tt)[1]),a(this,Mt)[2]=Math.min(a(this,il),a(this,Tt)[2]),a(this,Mt)[3]=Math.min(a(this,sl),a(this,Tt)[3]),this}getSimpleIndex(t){return a(this,kn)[t]}recordDependencies(t,e){const n=a(this,Ln),s=a(this,kn),r=a(this,Pn);for(const o of e)o in a(this,kn)?n.add(s[o]):o in r&&r[o].forEach(n.add,n);return this}recordNamedDependency(t,e){return a(this,el).has(e)&&a(this,Ln).add(a(this,el).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[oc]),a(this,ks)){const n=wg(a(this,ks),t),{dependencies:s}=n;a(this,Ln).forEach(s.add,s),a(this,Gi).forEach(s.add,s),a(this,nl).forEach(s.add,s),s.delete(t),n.isRenderingOperation=!0}if(a(this,yr)===t){const n=oS(a(this,Mt)[0]*256/a(this,il)),s=oS(a(this,Mt)[1]*256/a(this,sl)),r=aS(a(this,Mt)[2]*256/a(this,il)),o=aS(a(this,Mt)[3]*256/a(this,sl));vg(a(this,vr),t,n,s,r,o);for(const l of a(this,Ln))l!==t&&vg(a(this,vr),l,n,s,r,o);for(const l of a(this,Gi))l!==t&&vg(a(this,vr),l,n,s,r,o);for(const l of a(this,nl))l!==t&&vg(a(this,vr),l,n,s,r,o);e||(a(this,Ln).clear(),m(this,yr,-1))}return this}recordShowTextOperation(t,e=!1){const n=Array.from(a(this,Ln));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const s of n)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(t,e=!1){return a(this,yr)===t&&(m(this,yr,-1),a(this,Tt)[0]=Math.max(a(this,Tt)[0],a(this,Mt)[0]),a(this,Tt)[1]=Math.max(a(this,Tt)[1],a(this,Mt)[1]),a(this,Tt)[2]=Math.min(a(this,Tt)[2],a(this,Mt)[2]),a(this,Tt)[3]=Math.min(a(this,Tt)[3],a(this,Mt)[3]),e||a(this,Ln).clear()),this}_takePendingDependencies(){const t=a(this,Ln);return m(this,Ln,new Set),t}_extractOperation(t){const e=a(this,kf).get(t);return a(this,kf).delete(t),e}_pushPendingDependencies(t){for(const e of t)a(this,Ln).add(e)}take(){return a(this,hu).clear(),new eM(a(this,rn),a(this,vr))}takeDebugMetadata(){return a(this,ks)}}kn=new WeakMap,Pn=new WeakMap,el=new WeakMap,Gi=new WeakMap,nl=new WeakMap,mr=new WeakMap,Tt=new WeakMap,Mt=new WeakMap,yr=new WeakMap,Ln=new WeakMap,kf=new WeakMap,hu=new WeakMap,il=new WeakMap,sl=new WeakMap,vr=new WeakMap,rn=new WeakMap,ks=new WeakMap,Pf=new WeakSet,Jv=function(t,e){const n=new ArrayBuffer(t*4);m(this,vr,new Uint8ClampedArray(n)),m(this,rn,new Uint32Array(n)),e&&e.length>0?(a(this,rn).set(e),a(this,rn).fill(Qv,e.length)):a(this,rn).fill(Qv)};var Ot,ce,Wi,du,fu;const mA=class mA{constructor(t,e,n){A(this,Ot);A(this,ce);A(this,Wi);A(this,du,0);A(this,fu,0);if(t instanceof mA&&a(t,Wi)===!!n)return t;m(this,Ot,t),m(this,ce,e),m(this,Wi,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){return xe(this,fu)._++,a(this,Ot).save(a(this,ce)),this}restore(t){return a(this,fu)>0&&(a(this,Ot).restore(a(this,ce)),xe(this,fu)._--),this}recordOpenMarker(t){return xe(this,du)._++,this}getOpenMarker(){return a(this,du)>0?a(this,ce):a(this,Ot).getOpenMarker()}recordCloseMarker(t){return xe(this,du)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return a(this,Ot).pushBaseTransform(t),this}popBaseTransform(){return a(this,Ot).popBaseTransform(),this}recordSimpleData(t,e){return a(this,Ot).recordSimpleData(t,a(this,ce)),this}recordIncrementalData(t,e){return a(this,Ot).recordIncrementalData(t,a(this,ce)),this}resetIncrementalData(t,e){return a(this,Ot).resetIncrementalData(t,a(this,ce)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return a(this,Ot).recordSimpleDataFromNamed(t,e,a(this,ce)),this}recordFutureForcedDependency(t,e){return a(this,Ot).recordFutureForcedDependency(t,a(this,ce)),this}inheritSimpleDataAsFutureForcedDependencies(t){return a(this,Ot).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return a(this,Ot).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return a(this,Wi)||a(this,Ot).resetBBox(a(this,ce)),this}recordClipBox(t,e,n,s,r,o){return a(this,Wi)||a(this,Ot).recordClipBox(a(this,ce),e,n,s,r,o),this}recordBBox(t,e,n,s,r,o){return a(this,Wi)||a(this,Ot).recordBBox(a(this,ce),e,n,s,r,o),this}recordCharacterBBox(t,e,n,s,r,o,l){return a(this,Wi)||a(this,Ot).recordCharacterBBox(a(this,ce),e,n,s,r,o,l),this}recordFullPageBBox(t){return a(this,Wi)||a(this,Ot).recordFullPageBBox(a(this,ce)),this}getSimpleIndex(t){return a(this,Ot).getSimpleIndex(t)}recordDependencies(t,e){return a(this,Ot).recordDependencies(a(this,ce),e),this}recordNamedDependency(t,e){return a(this,Ot).recordNamedDependency(a(this,ce),e),this}recordOperation(t){return a(this,Ot).recordOperation(a(this,ce),!0),this}recordShowTextOperation(t){return a(this,Ot).recordShowTextOperation(a(this,ce),!0),this}bboxToClipBoxDropOperation(t){return a(this,Wi)||a(this,Ot).bboxToClipBoxDropOperation(a(this,ce),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Ot=new WeakMap,ce=new WeakMap,Wi=new WeakMap,du=new WeakMap,fu=new WeakMap;let $m=mA;const mi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Xe={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Zv(i,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),i.clip(s)}class oA{isModifyingCurrentTransform(){return!1}getPattern(){zt("Abstract method `getPattern` called.")}}class iM extends oA{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,s){let r;if(s===Xe.STROKE||s===Xe.FILL){const o=e.current.getClippedPathBoundingBox(s,ee(t))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=e.cachedCanvases.getCanvas("pattern",l,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),n=q.transform(n,[1,0,0,1,o[0],o[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),Zv(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=t.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(n);r.setTransform(d)}else Zv(t,this._bbox),r=this._createGradient(t);return r}}function E0(i,t,e,n,s,r,o,l){const c=t.coords,u=t.colors,h=i.data,d=i.width*4;let f;c[e+1]>c[n+1]&&(f=e,e=n,n=f,f=r,r=o,o=f),c[n+1]>c[s+1]&&(f=n,n=s,s=f,f=o,o=l,l=f),c[e+1]>c[n+1]&&(f=e,e=n,n=f,f=r,r=o,o=f);const p=(c[e]+t.offsetX)*t.scaleX,y=(c[e+1]+t.offsetY)*t.scaleY,w=(c[n]+t.offsetX)*t.scaleX,x=(c[n+1]+t.offsetY)*t.scaleY,g=(c[s]+t.offsetX)*t.scaleX,v=(c[s+1]+t.offsetY)*t.scaleY;if(y>=v)return;const b=u[r],E=u[r+1],_=u[r+2],C=u[o],T=u[o+1],k=u[o+2],P=u[l],L=u[l+1],M=u[l+2],I=Math.round(y),$=Math.round(v);let N,W,j,U,D,H,B,Z;for(let G=I;G<=$;G++){if(G<x){const rt=G<y?0:(y-G)/(y-x);N=p-(p-w)*rt,W=b-(b-C)*rt,j=E-(E-T)*rt,U=_-(_-k)*rt}else{let rt;G>v?rt=1:x===v?rt=0:rt=(x-G)/(x-v),N=w-(w-g)*rt,W=C-(C-P)*rt,j=T-(T-L)*rt,U=k-(k-M)*rt}let tt;G<y?tt=0:G>v?tt=1:tt=(y-G)/(y-v),D=p-(p-g)*tt,H=b-(b-P)*tt,B=E-(E-L)*tt,Z=_-(_-M)*tt;const ct=Math.round(Math.min(N,D)),Pt=Math.round(Math.max(N,D));let _t=d*G+ct*4;for(let rt=ct;rt<=Pt;rt++)tt=(N-rt)/(N-D),tt<0?tt=0:tt>1&&(tt=1),h[_t++]=W-(W-H)*tt|0,h[_t++]=j-(j-B)*tt|0,h[_t++]=U-(U-Z)*tt|0,h[_t++]=255}}function sM(i,t,e){const n=t.coords,s=t.colors;let r,o;switch(t.type){case"lattice":const l=t.verticesPerRow,c=Math.floor(n.length/l)-1,u=l-1;for(r=0;r<c;r++){let h=r*l;for(let d=0;d<u;d++,h++)E0(i,e,n[h],n[h+1],n[h+l],s[h],s[h+1],s[h+l]),E0(i,e,n[h+l+1],n[h+1],n[h+l],s[h+l+1],s[h+1],s[h+l])}break;case"triangles":for(r=0,o=n.length;r<o;r+=3)E0(i,e,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class rM extends oA{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*t[1]*1.1)),3e3),p=u/d,y=h/f,w={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/p,scaleY:1/y},x=d+2*2,g=f+2*2,v=n.getCanvas("mesh",x,g),b=v.context,E=b.createImageData(d,f);if(e){const C=E.data;for(let T=0,k=C.length;T<k;T+=4)C[T]=e[0],C[T+1]=e[1],C[T+2]=e[2],C[T+3]=255}for(const C of this._figures)sM(E,C,w);return b.putImageData(E,2,2),{canvas:v.canvas,offsetX:l-2*p,offsetY:c-2*y,scaleX:p,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,s){Zv(t,this._bbox);const r=new Float32Array(2);if(s===Xe.SHADING)q.singularValueDecompose2dScale(ee(t),r);else if(this.matrix){q.singularValueDecompose2dScale(this.matrix,r);const[l,c]=r;q.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=l,r[1]*=c}else q.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,s===Xe.SHADING?null:this._background,e.cachedCanvases);return s!==Xe.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class oM extends oA{getPattern(){return"hotpink"}}function aM(i){switch(i[0]){case"RadialAxial":return new iM(i);case"Mesh":return new rM(i);case"Dummy":return new oM}throw new Error(`Unknown IR type: ${i[0]}`)}const lS={COLORED:1,UNCOLORED:2},oy=class oy{constructor(t,e,n,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(t,e){var H,B;const{bbox:n,operatorList:s,paintType:r,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),Fy("TilingType: "+o);const d=n[0],f=n[1],p=n[2],y=n[3],w=p-d,x=y-f,g=new Float32Array(2);q.singularValueDecompose2dScale(this.matrix,g);const[v,b]=g;q.singularValueDecompose2dScale(this.baseTransform,g);const E=v*g[0],_=b*g[1];let C=w,T=x,k=!1,P=!1;const L=Math.ceil(u*E),M=Math.ceil(h*_),I=Math.ceil(w*E),$=Math.ceil(x*_);L>=I?C=u:k=!0,M>=$?T=h:P=!0;const N=this.getSizeAndScale(C,this.ctx.canvas.width,E),W=this.getSizeAndScale(T,this.ctx.canvas.height,_),j=t.cachedCanvases.getCanvas("pattern",N.size,W.size),U=j.context,D=c.createCanvasGraphics(U,e);if(D.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(D,r,l),U.translate(-N.scale*d,-W.scale*f),D.transform(0,N.scale,0,0,W.scale,0,0),U.save(),(H=D.dependencyTracker)==null||H.save(),this.clipBbox(D,d,f,p,y),D.baseTransform=ee(D.ctx),D.executeOperatorList(s),D.endDrawing(),(B=D.dependencyTracker)==null||B.restore(),U.restore(),k||P){const Z=j.canvas;k&&(C=u),P&&(T=h);const G=this.getSizeAndScale(C,this.ctx.canvas.width,E),tt=this.getSizeAndScale(T,this.ctx.canvas.height,_),ct=G.size,Pt=tt.size,_t=t.cachedCanvases.getCanvas("pattern-workaround",ct,Pt),rt=_t.context,Gt=k?Math.floor(w/u):0,Se=P?Math.floor(x/h):0;for(let Ut=0;Ut<=Gt;Ut++)for(let nt=0;nt<=Se;nt++)rt.drawImage(Z,ct*Ut,Pt*nt,ct,Pt,0,0,ct,Pt);return{canvas:_t.canvas,scaleX:G.scale,scaleY:tt.scale,offsetX:d,offsetY:f}}return{canvas:j.canvas,scaleX:N.scale,scaleY:W.scale,offsetX:d,offsetY:f}}getSizeAndScale(t,e,n){const s=Math.max(oy.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=s?r=s:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,s,r){const o=s-e,l=r-n;t.ctx.rect(e,n,o,l),q.axialAlignedBoundingBox([e,n,s,r],ee(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,r=t.current;switch(e){case lS.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;s.fillStyle=r.fillColor=o,s.strokeStyle=r.strokeColor=l;break;case lS.UNCOLORED:s.fillStyle=s.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new kR(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,s,r){let o=n;s!==Xe.SHADING&&(o=q.transform(o,e.baseTransform),this.matrix&&(o=q.transform(o,this.matrix)));const l=this.createPatternCanvas(e,r);let c=new DOMMatrix(o);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const u=t.createPattern(l.canvas,"repeat");return u.setTransform(c),u}};O(oy,"MAX_PATTERN_SIZE",3e3);let tw=oy;function lM({src:i,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const l=je.isLittleEndian?4278190080:255,[c,u]=o?[r,l]:[l,r],h=n>>3,d=n&7,f=i.length;e=new Uint32Array(e.buffer);let p=0;for(let y=0;y<s;y++){for(const x=t+h;t<x;t++){const g=t<f?i[t]:255;e[p++]=g&128?u:c,e[p++]=g&64?u:c,e[p++]=g&32?u:c,e[p++]=g&16?u:c,e[p++]=g&8?u:c,e[p++]=g&4?u:c,e[p++]=g&2?u:c,e[p++]=g&1?u:c}if(d===0)continue;const w=t<f?i[t++]:255;for(let x=0;x<d;x++)e[p++]=w&1<<7-x?u:c}return{srcPos:t,destPos:p}}const cS=16,uS=100,cM=15,hS=10,Nn=16,_0=new DOMMatrix,oi=new Float32Array(2),Tc=new Float32Array([1/0,1/0,-1/0,-1/0]);function uM(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},i.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},i.transform=function(e,n,s,r,o,l){t.transform(e,n,s,r,o,l),this.__originalTransform(e,n,s,r,o,l)},i.setTransform=function(e,n,s,r,o,l){t.setTransform(e,n,s,r,o,l),this.__originalSetTransform(e,n,s,r,o,l)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(e){t.rotate(e),this.__originalRotate(e)},i.clip=function(e){t.clip(e),this.__originalClip(e)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,s,r,o,l){t.bezierCurveTo(e,n,s,r,o,l),this.__originalBezierCurveTo(e,n,s,r,o,l)},i.rect=function(e,n,s,r){t.rect(e,n,s,r),this.__originalRect(e,n,s,r)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class hM{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Ag(i,t,e,n,s,r,o,l,c,u){const[h,d,f,p,y,w]=ee(i);if(d===0&&f===0){const v=o*h+y,b=Math.round(v),E=l*p+w,_=Math.round(E),C=(o+c)*h+y,T=Math.abs(Math.round(C)-b)||1,k=(l+u)*p+w,P=Math.abs(Math.round(k)-_)||1;return i.setTransform(Math.sign(h),0,0,Math.sign(p),b,_),i.drawImage(t,e,n,s,r,0,0,T,P),i.setTransform(h,d,f,p,y,w),[T,P]}if(h===0&&p===0){const v=l*f+y,b=Math.round(v),E=o*d+w,_=Math.round(E),C=(l+u)*f+y,T=Math.abs(Math.round(C)-b)||1,k=(o+c)*d+w,P=Math.abs(Math.round(k)-_)||1;return i.setTransform(0,Math.sign(d),Math.sign(f),0,b,_),i.drawImage(t,e,n,s,r,0,0,P,T),i.setTransform(h,d,f,p,y,w),[P,T]}i.drawImage(t,e,n,s,r,o,l,c,u);const x=Math.hypot(h,d),g=Math.hypot(f,p);return[x*c,g*u]}class dS{constructor(t,e,n){O(this,"alphaIsShape",!1);O(this,"fontSize",0);O(this,"fontSizeScale",1);O(this,"textMatrix",null);O(this,"textMatrixScale",1);O(this,"fontMatrix",Cv);O(this,"leading",0);O(this,"x",0);O(this,"y",0);O(this,"lineX",0);O(this,"lineY",0);O(this,"charSpacing",0);O(this,"wordSpacing",0);O(this,"textHScale",1);O(this,"textRenderingMode",ze.FILL);O(this,"textRise",0);O(this,"fillColor","#000000");O(this,"strokeColor","#000000");O(this,"patternFill",!1);O(this,"patternStroke",!1);O(this,"fillAlpha",1);O(this,"strokeAlpha",1);O(this,"lineWidth",1);O(this,"activeSMask",null);O(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Tc.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Xe.FILL,e=null){const n=this.minMax.slice();if(t===Xe.STROKE){e||zt("Stroke bounding box must include transform."),q.singularValueDecompose2dScale(e,oi);const s=oi[0]*this.lineWidth/2,r=oi[1]*this.lineWidth/2;n[0]-=s,n[1]-=r,n[2]+=s,n[3]+=r}return n}updateClipFromPath(){const t=q.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Tc,0)}getClippedPathBoundingBox(t=Xe.FILL,e=null){return q.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function fS(i,t){if(t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%Nn,r=(e-s)/Nn,o=s===0?r:r+1,l=i.createImageData(n,Nn);let c=0,u;const h=t.data,d=l.data;let f,p,y,w;if(t.kind===xd.GRAYSCALE_1BPP){const x=h.byteLength,g=new Uint32Array(d.buffer,0,d.byteLength>>2),v=g.length,b=n+7>>3,E=4294967295,_=je.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(y=f<r?Nn:s,u=0,p=0;p<y;p++){const C=x-c;let T=0;const k=C>b?n:C*8-7,P=k&-8;let L=0,M=0;for(;T<P;T+=8)M=h[c++],g[u++]=M&128?E:_,g[u++]=M&64?E:_,g[u++]=M&32?E:_,g[u++]=M&16?E:_,g[u++]=M&8?E:_,g[u++]=M&4?E:_,g[u++]=M&2?E:_,g[u++]=M&1?E:_;for(;T<k;T++)L===0&&(M=h[c++],L=128),g[u++]=M&L?E:_,L>>=1}for(;u<v;)g[u++]=0;i.putImageData(l,0,f*Nn)}}else if(t.kind===xd.RGBA_32BPP){for(p=0,w=n*Nn*4,f=0;f<r;f++)d.set(h.subarray(c,c+w)),c+=w,i.putImageData(l,0,p),p+=Nn;f<o&&(w=n*s*4,d.set(h.subarray(c,c+w)),i.putImageData(l,0,p))}else if(t.kind===xd.RGB_24BPP)for(y=Nn,w=n*y,f=0;f<o;f++){for(f>=r&&(y=s,w=n*y),u=0,p=w;p--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;i.putImageData(l,0,f*Nn)}else throw new Error(`bad image kind: ${t.kind}`)}function pS(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%Nn,r=(e-s)/Nn,o=s===0?r:r+1,l=i.createImageData(n,Nn);let c=0;const u=t.data,h=l.data;for(let d=0;d<o;d++){const f=d<r?Nn:s;({srcPos:c}=lM({src:u,srcPos:c,dest:h,width:n,height:f,nonBlackColor:0})),i.putImageData(l,0,d*Nn)}}function Oh(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function bg(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}function gS(i,t){if(t)return!0;q.singularValueDecompose2dScale(i,oi);const e=Math.fround(ls.pixelRatio*Wr.PDF_TO_CSS_UNITS);return oi[0]<=e&&oi[1]<=e}const dM=["butt","round","square"],fM=["miter","round","bevel"],pM={},mS={};var cs,ew,nw,iw;const yA=class yA{constructor(t,e,n,s,r,{optionalContentConfig:o,markedContentStack:l=null},c,u,h){A(this,cs);this.ctx=t,this.current=new dS(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new hM(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(t,e,n=null){var s;return typeof e=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=l,n){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...ee(this.compositeCtx))}this.ctx.save(),bg(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ee(this.ctx)}executeOperatorList(t,e,n,s,r){var g;const o=t.argsArray,l=t.fnArray;let c=e||0;const u=o.length;if(u===c)return c;const h=u-c>hS&&typeof n=="function",d=h?Date.now()+cM:0;let f=0;const p=this.commonObjs,y=this.objs;let w,x;for(;;){if(s!==void 0&&c===s.nextBreakPoint)return s.breakIt(c,n),c;if(!r||r(c))if(w=l[c],x=o[c]??null,w!==Ah.dependency)x===null?this[w](c):this[w](c,...x);else for(const v of x){(g=this.dependencyTracker)==null||g.recordNamedData(v,c);const b=v.startsWith("g_")?p:y;if(!b.has(v))return b.get(v,n),c}if(c++,c===u)return c;if(h&&++f>hS){if(Date.now()>d)return n(),c;f=0}}}endDrawing(){S(this,cs,ew).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),S(this,cs,nw).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=n,c=s,u="prescale1",h,d;for(;r>2&&l>1||o>2&&c>1;){let f=l,p=c;r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(t,0,0,l,c,0,0,f,p),t=h.canvas,l=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t,e){var L,M;const n=this.ctx,{width:s,height:r}=e,o=this.current.fillColor,l=this.current.patternFill,c=ee(n);let u,h,d,f;if((e.bitmap||e.data)&&e.count>1){const I=e.bitmap||e.data.buffer;h=JSON.stringify(l?c:[c.slice(0,4),o]),u=this._cachedBitmapsMap.get(I),u||(u=new Map,this._cachedBitmapsMap.set(I,u));const $=u.get(h);if($&&!l){const N=Math.round(Math.min(c[0],c[2])+c[4]),W=Math.round(Math.min(c[1],c[3])+c[5]);return(L=this.dependencyTracker)==null||L.recordDependencies(t,mi.transformAndFill),{canvas:$,offsetX:N,offsetY:W}}d=$}d||(f=this.cachedCanvases.getCanvas("maskCanvas",s,r),pS(f.context,e));let p=q.transform(c,[1/s,0,0,-1/r,0,0]);p=q.transform(p,[1,0,0,1,0,-r]);const y=Tc.slice();q.axialAlignedBoundingBox([0,0,s,r],p,y);const[w,x,g,v]=y,b=Math.round(g-w)||1,E=Math.round(v-x)||1,_=this.cachedCanvases.getCanvas("fillCanvas",b,E),C=_.context,T=w,k=x;C.translate(-T,-k),C.transform(...p),d||(d=this._scaleImage(f.canvas,ps(C)),d=d.img,u&&l&&u.set(h,d)),C.imageSmoothingEnabled=gS(ee(C),e.interpolate),Ag(C,d,0,0,d.width,d.height,0,0,s,r),C.globalCompositeOperation="source-in";const P=q.transform(ps(C),[1,0,0,1,-T,-k]);return C.fillStyle=l?o.getPattern(n,this,P,Xe.FILL,t):o,C.fillRect(0,0,s,r),u&&!l&&(this.cachedCanvases.delete("fillCanvas"),u.set(h,_.canvas)),(M=this.dependencyTracker)==null||M.recordDependencies(t,mi.transformAndFill),{canvas:_.canvas,offsetX:Math.round(T),offsetY:Math.round(k)}}setLineWidth(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",t),this.ctx.lineCap=dM[e]}setLineJoin(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=fM[e]}setMiterLimit(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("dash",t);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,s,r,o,l;for(const[c,u]of e)switch(c){case"LW":this.setLineWidth(t,u);break;case"LC":this.setLineCap(t,u);break;case"LJ":this.setLineJoin(t,u);break;case"ML":this.setMiterLimit(t,u);break;case"D":this.setDash(t,u[0],u[1]);break;case"RI":this.setRenderingIntent(t,u);break;case"FL":this.setFlatness(t,u);break;case"Font":this.setFont(t,u[0],u[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=u;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(r=this.dependencyTracker)==null||r.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",t),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(l=this.dependencyTracker)==null||l.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,e,n);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),Oh(this.suspendedCtx,o),uM(o,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Oh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const r=s[0],o=s[1],l=s[2]-r,c=s[3]-o;l===0||c===0||(this.genericComposeSMask(e.context,n,l,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,r,o,l,c,u,h,d){let f=t.canvas,p=c-h,y=u-d;if(o)if(p<0||y<0||p+n>f.width||y+s>f.height){const x=this.cachedCanvases.getCanvas("maskExtension",n,s),g=x.context;g.drawImage(f,-p,-y),g.globalCompositeOperation="destination-atop",g.fillStyle=o,g.fillRect(0,0,n,s),g.globalCompositeOperation="source-over",f=x.canvas,p=y=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(p,y,n,s),t.clip(x),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(p,y,n,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const w=new Path2D;w.rect(c,u,n,s),e.clip(w),e.globalCompositeOperation="destination-in",e.drawImage(f,p,y,n,s,c,u,n,s),e.restore()}save(t){var n;this.inSMaskMode&&Oh(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(n=this.dependencyTracker)==null||n.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Oh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,s,r,o,l){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",t),this.ctx.transform(e,n,s,r,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,s){let[r]=n;if(!s){r||(r=n[0]=new Path2D),this[e](t,r);return}if(this.dependencyTracker!==null){const o=e===Ah.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,s[0]-o,s[2]+o,s[1]-o,s[3]+o).recordDependencies(t,["transform"])}if(!(r instanceof Path2D)){const o=n[0]=new Path2D;for(let l=0,c=r.length;l<c;)switch(r[l++]){case pg.moveTo:o.moveTo(r[l++],r[l++]);break;case pg.lineTo:o.lineTo(r[l++],r[l++]);break;case pg.curveTo:o.bezierCurveTo(r[l++],r[l++],r[l++],r[l++],r[l++],r[l++]);break;case pg.closePath:o.closePath();break;default:lt(`Unrecognized drawing path operator: ${r[l-1]}`);break}r=o}q.axialAlignedBoundingBox(s,ee(this.ctx),this.current.minMax),this[e](t,r),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){var o;const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const l=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,ps(s),Xe.STROKE,t),l){const c=new Path2D;c.addPath(e,s.getTransform().invertSelf().multiplySelf(l)),e=c}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);(o=this.dependencyTracker)==null||o.recordDependencies(t,mi.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Xe.STROKE,ee(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){var u,h,d;const s=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let l=!1;if(o){const f=r.isModifyingCurrentTransform()?s.getTransform():null;if((u=this.dependencyTracker)==null||u.save(t),s.save(),s.fillStyle=r.getPattern(s,this,ps(s),Xe.FILL,t),f){const p=new Path2D;p.addPath(e,s.getTransform().invertSelf().multiplySelf(f)),e=p}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),(h=this.dependencyTracker)==null||h.recordDependencies(t,mi.fill),l&&(s.restore(),(d=this.dependencyTracker)==null||d.restore(t)),n&&this.consumePath(t,e,c)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),(n=this.dependencyTracker)==null||n.recordDependencies(t,mi.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=pM}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=mS}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;e!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",t),s.recordCloseMarker(t)}if(e!==void 0){const s=new Path2D,r=n.getTransform().invertSelf();for(const{transform:o,x:l,y:c,fontSize:u,path:h}of e)h&&s.addPath(h,new DOMMatrix(o).preMultiplySelf(r).translate(l,c).scale(u,-u));n.clip(s)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var d,f;(d=this.dependencyTracker)==null||d.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const s=this.commonObjs.get(e),r=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=s.fontMatrix||Cv,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&lt("Invalid font matrix for font "+e),n<0?(n=-n,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const o=s.loadedName||"sans-serif",l=((f=s.systemFontInfo)==null?void 0:f.css)||`"${o}", ${s.fallbackName}`;let c="normal";s.black?c="900":s.bold&&(c="bold");const u=s.italic?"italic":"normal";let h=n;n<cS?h=cS:n>uS&&(h=uS),this.current.fontSizeScale=n/h,this.ctx.font=`${u} ${c} ${h}px ${l}`}setTextRenderingMode(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,s,r,o){var g,v,b,E;const l=this.ctx,c=this.current,u=c.font,h=c.textRenderingMode,d=c.fontSize/c.fontSizeScale,f=h&ze.FILL_STROKE_MASK,p=!!(h&ze.ADD_TO_PATH_FLAG),y=c.patternFill&&!u.missingFile,w=c.patternStroke&&!u.missingFile;let x;if((u.disableFontFace||p||y||w)&&!u.missingFile&&(x=u.getPathGenerator(this.commonObjs,e)),x&&(u.disableFontFace||y||w)){l.save(),l.translate(n,s),l.scale(d,-d),(g=this.dependencyTracker)==null||g.recordCharacterBBox(t,l,u);let _;if(f===ze.FILL||f===ze.FILL_STROKE)if(r){_=l.getTransform(),l.setTransform(...r);const C=S(this,cs,iw).call(this,x,_,r);l.fill(C)}else l.fill(x);if(f===ze.STROKE||f===ze.FILL_STROKE)if(o){_||(_=l.getTransform()),l.setTransform(...o);const{a:C,b:T,c:k,d:P}=_,L=q.inverseTransform(o),M=q.transform([C,T,k,P,0,0],L);q.singularValueDecompose2dScale(M,oi),l.lineWidth*=Math.max(oi[0],oi[1])/d,l.stroke(S(this,cs,iw).call(this,x,_,o))}else l.lineWidth/=d,l.stroke(x);l.restore()}else(f===ze.FILL||f===ze.FILL_STROKE)&&(l.fillText(e,n,s),(v=this.dependencyTracker)==null||v.recordCharacterBBox(t,l,u,d,n,s,()=>l.measureText(e))),(f===ze.STROKE||f===ze.FILL_STROKE)&&(this.dependencyTracker&&((b=this.dependencyTracker)==null||b.recordCharacterBBox(t,l,u,d,n,s,()=>l.measureText(e)).recordDependencies(t,mi.stroke)),l.strokeText(e,n,s));p&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ee(l),x:n,y:s,fontSize:d,path:x}),(E=this.dependencyTracker)==null||E.recordCharacterBBox(t,l,u,d,n,s))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return dt(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var k,P,L,M;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,mi.showText).resetBBox(t),this.current.textRenderingMode&ze.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,s=n.font;if(s.isType3Font){this.showType3Text(t,e),(k=this.dependencyTracker)==null||k.recordShowTextOperation(t);return}const r=n.fontSize;if(r===0){(P=this.dependencyTracker)==null||P.recordOperation(t);return}const o=this.ctx,l=n.fontSizeScale,c=n.charSpacing,u=n.wordSpacing,h=n.fontDirection,d=n.textHScale*h,f=e.length,p=s.vertical,y=p?1:-1,w=s.defaultVMetrics,x=r*n.fontMatrix[0],g=n.textRenderingMode===ze.FILL&&!s.disableFontFace&&!n.patternFill;o.save(),n.textMatrix&&o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),h>0?o.scale(d,-1):o.scale(d,1);let v,b;if(n.patternFill){o.save();const I=n.fillColor.getPattern(o,this,ps(o),Xe.FILL,t);v=ee(o),o.restore(),o.fillStyle=I}if(n.patternStroke){o.save();const I=n.strokeColor.getPattern(o,this,ps(o),Xe.STROKE,t);b=ee(o),o.restore(),o.strokeStyle=I}let E=n.lineWidth;const _=n.textMatrixScale;if(_===0||E===0){const I=n.textRenderingMode&ze.FILL_STROKE_MASK;(I===ze.STROKE||I===ze.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=_;if(l!==1&&(o.scale(l,l),E/=l),o.lineWidth=E,s.isInvalidPDFjsFont){const I=[];let $=0;for(const W of e)I.push(W.unicode),$+=W.width;const N=I.join("");if(o.fillText(N,0,0),this.dependencyTracker!==null){const W=o.measureText(N);this.dependencyTracker.recordBBox(t,this.ctx,-W.actualBoundingBoxLeft,W.actualBoundingBoxRight,-W.actualBoundingBoxAscent,W.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=$*x*d,o.restore(),this.compose();return}let C=0,T;for(T=0;T<f;++T){const I=e[T];if(typeof I=="number"){C+=y*I*r/1e3;continue}let $=!1;const N=(I.isSpace?u:0)+c,W=I.fontChar,j=I.accent;let U,D,H=I.width;if(p){const G=I.vmetric||w,tt=-(I.vmetric?G[1]:H*.5)*x,ct=G[2]*x;H=G?-G[0]:H,U=tt/l,D=(C+ct)/l}else U=C/l,D=0;let B;if(s.remeasure&&H>0){B=o.measureText(W);const G=B.width*1e3/r*l;if(H<G&&this.isFontSubpixelAAEnabled){const tt=H/G;$=!0,o.save(),o.scale(tt,1),U/=tt}else H!==G&&(U+=(H-G)/2e3*r/l)}if(this.contentVisible&&(I.isInFont||s.missingFile)){if(g&&!j)o.fillText(W,U,D),(L=this.dependencyTracker)==null||L.recordCharacterBBox(t,o,B?{bbox:null}:s,r/l,U,D,()=>B??o.measureText(W));else if(this.paintChar(t,W,U,D,v,b),j){const G=U+r*j.offset.x/l,tt=D-r*j.offset.y/l;this.paintChar(t,j.fontChar,G,tt,v,b)}}const Z=p?H*x-N*h:H*x+N*h;C+=Z,$&&o.restore()}p?n.y-=C:n.x+=C*d,o.restore(),this.compose(),(M=this.dependencyTracker)==null||M.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,s=this.current,r=s.font,o=s.fontSize,l=s.fontDirection,c=r.vertical?1:-1,u=s.charSpacing,h=s.wordSpacing,d=s.textHScale*l,f=s.fontMatrix||Cv,p=e.length,y=s.textRenderingMode===ze.INVISIBLE;let w,x,g,v;if(y||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),s.textMatrix&&n.transform(...s.textMatrix),n.translate(s.x,s.y+s.textRise),n.scale(d,l);const b=this.dependencyTracker;for(this.dependencyTracker=b?new $m(b,t):null,w=0;w<p;++w){if(x=e[w],typeof x=="number"){v=c*x*o/1e3,this.ctx.translate(v,0),s.x+=v*d;continue}const E=(x.isSpace?h:0)+u,_=r.charProcOperatorList[x.operatorListId];_?this.contentVisible&&(this.save(),n.scale(o,o),n.transform(...f),this.executeOperatorList(_),this.restore()):lt(`Type3 character "${x.operatorListId}" is not available.`);const C=[x.width,0];q.applyTransform(C,f),g=C[0]*o+E,n.translate(g,0),s.x+=g*d}n.restore(),b&&(this.dependencyTracker=b)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,s,r,o,l){var u;const c=new Path2D;c.rect(s,r,o-s,l-r),this.ctx.clip(c),(u=this.dependencyTracker)==null||u.recordBBox(t,this.ctx,s,o,r,l).recordClipBox(t,this.ctx,s,o,r,l),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const s=this.baseTransform||ee(this.ctx),r={createCanvasGraphics:(o,l)=>new yA(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new $m(this.dependencyTracker,l,!0):null)};n=new tw(e,this.ctx,r,s)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=aM(this.getObject(t,e)),this.cachedPatterns.set(e,s)),n&&(s.matrix=n),s}shadingFill(t,e){var o;if(!this.contentVisible)return;const n=this.ctx;this.save(t);const s=this._getPattern(t,e);n.fillStyle=s.getPattern(n,this,ps(n),Xe.SHADING,t);const r=ps(n);if(r){const{width:l,height:c}=n.canvas,u=Tc.slice();q.axialAlignedBoundingBox([0,0,l,c],r,u);const[h,d,f,p]=u;this.ctx.fillRect(h,d,f-h,p-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,mi.transform).recordDependencies(t,mi.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){zt("Should not call beginInlineImage")}beginImageData(){zt("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){var s;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=ee(this.ctx),n)){q.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[r,o,l,c]=n,u=new Path2D;u.rect(r,o,l-r,c-o),this.ctx.clip(u),(s=this.dependencyTracker)==null||s.recordClipBox(t,this.ctx,r,l,o,c),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var b;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||Fy("TODO: Support non-isolated groups."),e.knockout&&lt("Knockout groups not supported.");const s=ee(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=Tc.slice();q.axialAlignedBoundingBox(e.bbox,ee(n),r);const o=[0,0,n.canvas.width,n.canvas.height];r=q.intersect(r,o)||[0,0,0,0];const l=Math.floor(r[0]),c=Math.floor(r[1]),u=Math.max(Math.ceil(r[2])-l,1),h=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,h]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,u,h),p=f.context;p.translate(-l,-c),p.transform(...s);let y=new Path2D;const[w,x,g,v]=e.bbox;if(y.rect(w,x,g-w,v-x),e.matrix){const E=new Path2D;E.addPath(y,new DOMMatrix(e.matrix)),y=E}p.clip(y),e.smask&&this.smaskStack.push({canvas:f.canvas,context:p,offsetX:l,offsetY:c,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(l,c),n.save()),Oh(n,p),this.ctx=p,(b=this.dependencyTracker)==null||b.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){var r;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(r=this.dependencyTracker)==null||r.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=ee(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=Tc.slice();q.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,n,s,r,o){if(S(this,cs,ew).call(this),bg(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const l=n[2]-n[0],c=n[3]-n[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=l,n[3]=c,q.singularValueDecompose2dScale(ee(this.ctx),oi);const{viewportScale:u}=this,h=Math.ceil(l*this.outputScaleX*u),d=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(h,d);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(oi[0],0,0,-oi[1],0,c*oi[1]),bg(this.ctx)}else{bg(this.ctx),this.endPath(t);const u=new Path2D;u.rect(n[0],n[1],l,c),this.ctx.clip(u)}}this.current=new dS(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...s),this.transform(t,...r)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),S(this,cs,nw).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var l;if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const s=this.ctx,r=this._createMaskCanvas(t,e),o=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,r.offsetX,r.offsetY),(l=this.dependencyTracker)==null||l.resetBBox(t).recordBBox(t,this.ctx,r.offsetX,r.offsetX+o.width,r.offsetY,r.offsetY+o.height).recordOperation(t),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,s=0,r=0,o,l){var d,f,p;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const c=this.ctx;c.save();const u=ee(c);c.transform(n,s,r,o,0,0);const h=this._createMaskCanvas(t,e);c.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]),(d=this.dependencyTracker)==null||d.resetBBox(t);for(let y=0,w=l.length;y<w;y+=2){const x=q.transform(u,[n,s,r,o,l[y],l[y+1]]);c.drawImage(h.canvas,x[4],x[5]),(f=this.dependencyTracker)==null||f.recordBBox(t,this.ctx,x[4],x[4]+h.canvas.width,x[5],x[5]+h.canvas.height)}c.restore(),this.compose(),(p=this.dependencyTracker)==null||p.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var o,l,c;if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,r=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(t).recordDependencies(t,mi.transformAndFill);for(const u of e){const{data:h,width:d,height:f,transform:p}=u,y=this.cachedCanvases.getCanvas("maskCanvas",d,f),w=y.context;w.save();const x=this.getObject(t,h,u);pS(w,x),w.globalCompositeOperation="source-in",w.fillStyle=r?s.getPattern(w,this,ps(n),Xe.FILL,t):s,w.fillRect(0,0,d,f),w.restore(),n.save(),n.transform(...p),n.scale(1,-1),Ag(n,y.canvas,0,0,d,f,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(t,n,0,d,0,f),n.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){lt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,s,r){if(!this.contentVisible)return;const o=this.getObject(t,e);if(!o){lt("Dependent image isn't ready yet");return}const l=o.width,c=o.height,u=[];for(let h=0,d=r.length;h<d;h+=2)u.push({transform:[n,0,0,s,r[h],r[h+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(t,o,u)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t,e){var u;if(!this.contentVisible)return;const n=e.width,s=e.height,r=this.ctx;this.save(t);const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/n,-1/s);let l;if(e.bitmap)l=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)l=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",n,s).context;fS(d,e),l=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(l,ps(r));r.imageSmoothingEnabled=gS(ee(r),e.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(t).recordBBox(t,r,0,n,-s,0).recordDependencies(t,mi.imageXObject).recordOperation(t),Ag(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-s,n,s),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var o,l,c;if(!this.contentVisible)return;const s=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const u=e.width,h=e.height,f=this.cachedCanvases.getCanvas("inlineImage",u,h).context;fS(f,e),r=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(t);for(const u of n)s.save(),s.transform(...u.transform),s.scale(1,-1),Ag(s,r,u.x,u.y,u.w,u.h,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(t,s,0,1,-1,0),s.restore();(c=this.dependencyTracker)==null||c.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,mi.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){var o,l;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const r=this.ctx;this.pendingClip?(s||(this.pendingClip===mS?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(l=this.dependencyTracker)==null||l.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ee(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:r}=this.ctx.getTransform();let o,l;if(n===0&&s===0){const c=Math.abs(e),u=Math.abs(r);if(c===u)if(t===0)o=l=1/c;else{const h=c*t;o=l=h<1?1/h:1}else if(t===0)o=1/c,l=1/u;else{const h=c*t,d=u*t;o=h<1?1/h:1,l=d<1?1/d:1}}else{const c=Math.abs(e*r-n*s),u=Math.hypot(e,n),h=Math.hypot(s,r);if(t===0)o=h/c,l=u/c;else{const d=t*c;o=h>d?h/d:1,l=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:s}}=this,[r,o]=this.getScaleForStroking();if(r===o){n.lineWidth=(s||1)*r,n.stroke(t);return}const l=n.getLineDash();e&&n.save(),n.scale(r,o),_0.a=1/r,_0.d=1/o;const c=new Path2D;if(c.addPath(t,_0),l.length>0){const u=Math.max(r,o);n.setLineDash(l.map(h=>h/u)),n.lineDashOffset/=u}n.lineWidth=s||1,n.stroke(c),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};cs=new WeakSet,ew=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},nw=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},iw=function(t,e,n){const s=new Path2D;return s.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),s};let Bc=yA;for(const i in Ah)Bc.prototype[i]!==void 0&&(Bc.prototype[Ah[i]]=Bc.prototype[i]);var pu,gu,Lf,mu,Vg;const Pc=class Pc{constructor(t){A(this,mu);A(this,pu);A(this,gu);A(this,Lf);m(this,pu,t),m(this,gu,new DataView(a(this,pu))),m(this,Lf,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let s=0;for(const u of Pc.strings){const h=e.encode(t[u]);n[u]=h,s+=4+h.length}const r=new ArrayBuffer(s),o=new Uint8Array(r),l=new DataView(r);let c=0;for(const u of Pc.strings){const h=n[u],d=h.length;l.setUint32(c,d),o.set(h,c+4),c+=4+d}return wt(c===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}get fontFamily(){return S(this,mu,Vg).call(this,0)}get fontWeight(){return S(this,mu,Vg).call(this,1)}get italicAngle(){return S(this,mu,Vg).call(this,2)}};pu=new WeakMap,gu=new WeakMap,Lf=new WeakMap,mu=new WeakSet,Vg=function(t){wt(t<Pc.strings.length,"Invalid string index");let e=0;for(let s=0;s<t;s++)e+=a(this,gu).getUint32(e)+4;const n=a(this,gu).getUint32(e);return a(this,Lf).decode(new Uint8Array(a(this,pu),e+4,n))},O(Pc,"strings",["fontFamily","fontWeight","italicAngle"]);let Vm=Pc;var xo,Ps,rl,ol,id;const Lc=class Lc{constructor(t){A(this,ol);A(this,xo);A(this,Ps);A(this,rl);m(this,xo,t),m(this,Ps,new DataView(a(this,xo))),m(this,rl,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let s=0;for(const f of Lc.strings){const p=e.encode(t[f]);n[f]=p,s+=4+p.length}s+=4;let r,o,l=1+s;t.style&&(r=e.encode(t.style.style),o=e.encode(t.style.weight),l+=4+r.length+4+o.length);const c=new ArrayBuffer(l),u=new Uint8Array(c),h=new DataView(c);let d=0;h.setUint8(d++,t.guessFallback?1:0),h.setUint32(d,0),d+=4,s=0;for(const f of Lc.strings){const p=n[f],y=p.length;s+=4+y,h.setUint32(d,y),u.set(p,d+4),d+=4+y}return h.setUint32(d-s-4,s),t.style&&(h.setUint32(d,r.length),u.set(r,d+4),d+=4+r.length,h.setUint32(d,o.length),u.set(o,d+4),d+=4+o.length),wt(d<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(d)}get guessFallback(){return a(this,Ps).getUint8(0)!==0}get css(){return S(this,ol,id).call(this,0)}get loadedName(){return S(this,ol,id).call(this,1)}get baseFontName(){return S(this,ol,id).call(this,2)}get src(){return S(this,ol,id).call(this,3)}get style(){let t=1;t+=4+a(this,Ps).getUint32(t);const e=a(this,Ps).getUint32(t),n=a(this,rl).decode(new Uint8Array(a(this,xo),t+4,e));t+=4+e;const s=a(this,Ps).getUint32(t),r=a(this,rl).decode(new Uint8Array(a(this,xo),t+4,s));return{style:n,weight:r}}};xo=new WeakMap,Ps=new WeakMap,rl=new WeakMap,ol=new WeakSet,id=function(t){wt(t<Lc.strings.length,"Invalid string index");let e=5;for(let s=0;s<t;s++)e+=a(this,Ps).getUint32(e)+4;const n=a(this,Ps).getUint32(e);return a(this,rl).decode(new Uint8Array(a(this,xo),e+4,n))},O(Lc,"strings",["css","loadedName","baseFontName","src"]);let Gm=Lc;var yu,vu,wu,Au,Vn,Ls,Rf,Dt,de,ji,Gg,sd;const ht=class ht{constructor({data:t,extra:e}){A(this,de);A(this,Ls);A(this,Rf);A(this,Dt);m(this,Ls,t),m(this,Rf,new TextDecoder),m(this,Dt,new DataView(a(this,Ls))),e&&Object.assign(this,e)}get black(){return S(this,de,ji).call(this,0)}get bold(){return S(this,de,ji).call(this,1)}get disableFontFace(){return S(this,de,ji).call(this,2)}get fontExtraProperties(){return S(this,de,ji).call(this,3)}get isInvalidPDFjsFont(){return S(this,de,ji).call(this,4)}get isType3Font(){return S(this,de,ji).call(this,5)}get italic(){return S(this,de,ji).call(this,6)}get missingFile(){return S(this,de,ji).call(this,7)}get remeasure(){return S(this,de,ji).call(this,8)}get vertical(){return S(this,de,ji).call(this,9)}get ascent(){return S(this,de,Gg).call(this,0)}get defaultWidth(){return S(this,de,Gg).call(this,1)}get descent(){return S(this,de,Gg).call(this,2)}get bbox(){let t=a(ht,vu);if(a(this,Dt).getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<4;s++)n.push(a(this,Dt).getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=a(ht,wu);if(a(this,Dt).getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<6;s++)n.push(a(this,Dt).getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=a(ht,Au);if(a(this,Dt).getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<3;s++)n.push(a(this,Dt).getInt16(t,!0)),t+=2;return n}get fallbackName(){return S(this,de,sd).call(this,0)}get loadedName(){return S(this,de,sd).call(this,1)}get mimetype(){return S(this,de,sd).call(this,2)}get name(){return S(this,de,sd).call(this,3)}get data(){let t=a(ht,Vn);const e=a(this,Dt).getUint32(t);t+=4+e;const n=a(this,Dt).getUint32(t);t+=4+n;const s=a(this,Dt).getUint32(t);t+=4+s;const r=a(this,Dt).getUint32(t);if(r!==0)return new Uint8Array(a(this,Ls),t+4,r)}clearData(){let t=a(ht,Vn);const e=a(this,Dt).getUint32(t);t+=4+e;const n=a(this,Dt).getUint32(t);t+=4+n;const s=a(this,Dt).getUint32(t);t+=4+s;const r=a(this,Dt).getUint32(t);new Uint8Array(a(this,Ls),t+4,r).fill(0),a(this,Dt).setUint32(t,0)}get cssFontInfo(){let t=a(ht,Vn);const e=a(this,Dt).getUint32(t);t+=4+e;const n=a(this,Dt).getUint32(t);t+=4+n;const s=a(this,Dt).getUint32(t);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(a(this,Ls),t+4,s)),new Vm(r.buffer)}get systemFontInfo(){let t=a(ht,Vn);const e=a(this,Dt).getUint32(t);t+=4+e;const n=a(this,Dt).getUint32(t);if(n===0)return null;const s=new Uint8Array(n);return s.set(new Uint8Array(a(this,Ls),t+4,n)),new Gm(s.buffer)}static write(t){const e=t.systemFontInfo?Gm.write(t.systemFontInfo):null,n=t.cssFontInfo?Vm.write(t.cssFontInfo):null,s=new TextEncoder,r={};let o=0;for(const w of ht.strings)r[w]=s.encode(t[w]),o+=4+r[w].length;const l=a(ht,Vn)+4+o+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),c=new ArrayBuffer(l),u=new Uint8Array(c),h=new DataView(c);let d=0;const f=ht.bools.length;let p=0,y=0;for(let w=0;w<f;w++){const x=t[ht.bools[w]];p|=(x===void 0?0:x?2:1)<<y,y+=2,(y===8||w===f-1)&&(h.setUint8(d++,p),p=0,y=0)}wt(d===a(ht,yu),"FontInfo.write: Boolean properties offset mismatch");for(const w of ht.numbers)h.setFloat64(d,t[w]),d+=8;if(wt(d===a(ht,vu),"FontInfo.write: Number properties offset mismatch"),t.bbox){h.setUint8(d++,4);for(const w of t.bbox)h.setInt16(d,w,!0),d+=2}else h.setUint8(d++,0),d+=2*4;if(wt(d===a(ht,wu),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){h.setUint8(d++,6);for(const w of t.fontMatrix)h.setFloat64(d,w,!0),d+=8}else h.setUint8(d++,0),d+=8*6;if(wt(d===a(ht,Au),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){h.setUint8(d++,1);for(const w of t.defaultVMetrics)h.setInt16(d,w,!0),d+=2}else h.setUint8(d++,0),d+=3*2;wt(d===a(ht,Vn),"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(a(ht,Vn),0),d+=4;for(const w of ht.strings){const x=r[w],g=x.length;h.setUint32(d,g),u.set(x,d+4),d+=4+g}if(h.setUint32(a(ht,Vn),d-a(ht,Vn)-4),!e)h.setUint32(d,0),d+=4;else{const w=e.byteLength;h.setUint32(d,w),wt(d+4+w<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(e),d+4),d+=4+w}if(!n)h.setUint32(d,0),d+=4;else{const w=n.byteLength;h.setUint32(d,w),wt(d+4+w<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(n),d+4),d+=4+w}return t.data===void 0?(h.setUint32(d,0),d+=4):(h.setUint32(d,t.data.length),u.set(t.data,d+4),d+=4+t.data.length),wt(d<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(d)}};yu=new WeakMap,vu=new WeakMap,wu=new WeakMap,Au=new WeakMap,Vn=new WeakMap,Ls=new WeakMap,Rf=new WeakMap,Dt=new WeakMap,de=new WeakSet,ji=function(t){wt(t<ht.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,s=a(this,Dt).getUint8(e)>>n&3;return s===0?void 0:s===2},Gg=function(t){return wt(t<ht.numbers.length,"Invalid number index"),a(this,Dt).getFloat64(a(ht,yu)+t*8)},sd=function(t){wt(t<ht.strings.length,"Invalid string index");let e=a(ht,Vn)+4;for(let r=0;r<t;r++)e+=a(this,Dt).getUint32(e)+4;const n=a(this,Dt).getUint32(e),s=new Uint8Array(n);return s.set(new Uint8Array(a(this,Ls),e+4,n)),a(this,Rf).decode(s)},O(ht,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),O(ht,"numbers",["ascent","defaultWidth","descent"]),O(ht,"strings",["fallbackName","loadedName","mimetype","name"]),A(ht,yu,Math.ceil(ht.bools.length*2/8)),A(ht,vu,a(ht,yu)+ht.numbers.length*8),A(ht,wu,a(ht,vu)+1+2*4),A(ht,Au,a(ht,wu)+1+8*6),A(ht,Vn,a(ht,Au)+1+2*3);let sw=ht;var Mf,Df;class Li{static get workerPort(){return a(this,Mf)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");m(this,Mf,t)}static get workerSrc(){return a(this,Df)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");m(this,Df,t)}}Mf=new WeakMap,Df=new WeakMap,A(Li,Mf,null),A(Li,Df,"");var bu,Nf;class gM{constructor({parsedData:t,rawData:e}){A(this,bu);A(this,Nf);m(this,bu,t),m(this,Nf,e)}getRaw(){return a(this,Nf)}get(t){return a(this,bu).get(t)??null}[Symbol.iterator](){return a(this,bu).entries()}}bu=new WeakMap,Nf=new WeakMap;const dc=Symbol("INTERNAL");var If,Ff,Of,Su;class mM{constructor(t,{name:e,intent:n,usage:s,rbGroups:r}){A(this,If,!1);A(this,Ff,!1);A(this,Of,!1);A(this,Su,!0);m(this,If,!!(t&si.DISPLAY)),m(this,Ff,!!(t&si.PRINT)),this.name=e,this.intent=n,this.usage=s,this.rbGroups=r}get visible(){if(a(this,Of))return a(this,Su);if(!a(this,Su))return!1;const{print:t,view:e}=this.usage;return a(this,If)?(e==null?void 0:e.viewState)!=="OFF":a(this,Ff)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==dc&&zt("Internal method `_setVisible` called."),m(this,Of,n),m(this,Su,e)}}If=new WeakMap,Ff=new WeakMap,Of=new WeakMap,Su=new WeakMap;var Eo,Nt,xu,Eu,Bf,rw;class yM{constructor(t,e=si.DISPLAY){A(this,Bf);A(this,Eo,null);A(this,Nt,new Map);A(this,xu,null);A(this,Eu,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,m(this,Eu,t.order);for(const n of t.groups)a(this,Nt).set(n.id,new mM(e,n));if(t.baseState==="OFF")for(const n of a(this,Nt).values())n._setVisible(dc,!1);for(const n of t.on)a(this,Nt).get(n)._setVisible(dc,!0);for(const n of t.off)a(this,Nt).get(n)._setVisible(dc,!1);m(this,xu,this.getHash())}}isVisible(t){if(a(this,Nt).size===0)return!0;if(!t)return Fy("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,Nt).has(t.id)?a(this,Nt).get(t.id).visible:(lt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return S(this,Bf,rw).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,Nt).has(e))return lt(`Optional content group not found: ${e}`),!0;if(a(this,Nt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,Nt).has(e))return lt(`Optional content group not found: ${e}`),!0;if(!a(this,Nt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,Nt).has(e))return lt(`Optional content group not found: ${e}`),!0;if(!a(this,Nt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,Nt).has(e))return lt(`Optional content group not found: ${e}`),!0;if(a(this,Nt).get(e).visible)return!1}return!0}return lt(`Unknown optional content policy ${t.policy}.`),!0}return lt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var r;const s=a(this,Nt).get(t);if(!s){lt(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(const o of s.rbGroups)for(const l of o)l!==t&&((r=a(this,Nt).get(l))==null||r._setVisible(dc,!1,!0));s._setVisible(dc,!!e,!0),m(this,Eo,null)}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const r=a(this,Nt).get(s);if(r)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!r.visible,e);break}}m(this,Eo,null)}get hasInitialVisibility(){return a(this,xu)===null||this.getHash()===a(this,xu)}getOrder(){return a(this,Nt).size?a(this,Eu)?a(this,Eu).slice():[...a(this,Nt).keys()]:null}getGroup(t){return a(this,Nt).get(t)||null}getHash(){if(a(this,Eo)!==null)return a(this,Eo);const t=new z_;for(const[e,n]of a(this,Nt))t.update(`${e}:${n.visible}`);return m(this,Eo,t.hexdigest())}[Symbol.iterator](){return a(this,Nt).entries()}}Eo=new WeakMap,Nt=new WeakMap,xu=new WeakMap,Eu=new WeakMap,Bf=new WeakSet,rw=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const r=t[s];let o;if(Array.isArray(r))o=S(this,Bf,rw).call(this,r);else if(a(this,Nt).has(r))o=a(this,Nt).get(r).visible;else return lt(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class vM{constructor(t,{disableRange:e=!1,disableStream:n=!1}){wt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),t.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});wt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,s,r;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){wt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new wM(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new AM(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class wM{constructor(t,e,n=!1,s=null){this._stream=t,this._done=n||!1,this._filename=By(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class AM{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function bM(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let h=l(e);return h=unescape(h),h=c(h),h=u(h),r(h)}if(e=o(i),e){const h=u(e);return r(h)}if(e=n("filename","i").exec(i),e){e=e[1];let h=l(e);return h=u(h),r(h)}function n(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=zp(d);d=f.decode(p),t=!1}catch{}}return d}function r(h){return t&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),t&&(h=s("iso-8859-1",h))),h}function o(h){const d=[];let f;const p=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,w,x,g]=f;if(w=parseInt(w,10),w in d){if(w===0)break;continue}d[w]=[x,g]}const y=[];for(let w=0;w<d.length&&w in d;++w){let[x,g]=d[w];g=l(g),x&&(g=unescape(g),w===0&&(g=c(g))),y.push(g)}return y.join("")}function l(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),y=h.slice(d+1).replace(/^[^']*'/,"");return s(f,y)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,y){if(p==="q"||p==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,x){return String.fromCharCode(parseInt(x,16))}),s(f,y);try{y=atob(y)}catch{}return s(f,y)})}return""}function Z_(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const n in t){const s=t[n];s!==void 0&&e.append(n,s)}return e}function jy(i){var t;return((t=URL.parse(i))==null?void 0:t.origin)??null}function tC({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||n||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function eC(i){const t=i.get("Content-Disposition");if(t){let e=bM(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(By(e))return e}return null}function Vp(i,t){return new Gd(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i,i===404||i===0&&t.startsWith("file:"))}function nC(i){return i===200||i===206}function iC(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function sC(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(lt(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class SM{constructor(t){O(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Z_(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return wt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new xM(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new EM(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class xM{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),s=e.url;fetch(s,iC(n,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=jy(r.url),!nC(r.status))throw Vp(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:l,suggestedLength:c}=tC({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=eC(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Gr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:sC(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class EM{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${n-1}`);const o=s.url;fetch(o,iC(r,this._withCredentials,this._abortController)).then(l=>{const c=jy(l.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!nC(l.status))throw Vp(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:sC(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const C0=200,T0=206;function _M(i){const t=i.response;return typeof t!="string"?t:zp(t).buffer}class CM{constructor({url:t,httpHeaders:e,withCredentials:n}){O(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Z_(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=T0):s.expectedStatus=C0,e.responseType="arraybuffer",wt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var s;const n=this.pendingRequests[t];n&&((s=n.onProgress)==null||s.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){n.onError(s.status);return}const r=s.status||C0;if(!(r===C0&&n.expectedStatus===T0)&&r!==n.expectedStatus){n.onError(s.status);return}const l=_M(s);if(r===T0){const c=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?n.onDone({begin:parseInt(u[1],10),chunk:l}):(lt('Missing or invalid "Content-Range" header.'),n.onError(0))}else l?n.onDone({begin:0,chunk:l}):n.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class TM{constructor(t){this._source=t,this._manager=new CM(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return wt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new kM(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new PM(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class kM{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=jy(e.responseURL);const n=e.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...u]=l.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=tC({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=eC(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Vp(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PM{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=jy((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Vp(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const LM=/^[a-z][a-z0-9\-+.]+:/i;function RM(i){if(LM.test(i))return new URL(i);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(i))}class MM{constructor(t){this.source=t,this.url=RM(t.url),wt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return wt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new DM(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new NM(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class DM{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=Vp(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Gr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class NM{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Bh=Symbol("INITIAL_DATA");var Gn,jf,ow;class rC{constructor(){A(this,jf);A(this,Gn,Object.create(null))}get(t,e=null){if(e){const s=S(this,jf,ow).call(this,t);return s.promise.then(()=>e(s.data)),null}const n=a(this,Gn)[t];if(!n||n.data===Bh)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=a(this,Gn)[t];return!!e&&e.data!==Bh}delete(t){const e=a(this,Gn)[t];return!e||e.data===Bh?!1:(delete a(this,Gn)[t],!0)}resolve(t,e=null){const n=S(this,jf,ow).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in a(this,Gn)){const{data:n}=a(this,Gn)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}m(this,Gn,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,Gn)){const{data:e}=a(this,Gn)[t];e!==Bh&&(yield[t,e])}}}Gn=new WeakMap,jf=new WeakSet,ow=function(t){var e;return(e=a(this,Gn))[t]||(e[t]={...Promise.withResolvers(),data:Bh})};const IM=1e5,yS=30;var PS,_o,Rn,zf,Uf,al,wr,Hf,$f,ll,_u,Cu,Co,Tu,Vf,ku,cl,Gf,Wf,he,Pu,ul,Xf,To,Lu,Yr,oC,aC,aw,ui,Wg,lw,lC,cC;let qd=(he=class{constructor({textContentSource:t,container:e,viewport:n}){A(this,Yr);A(this,_o,Promise.withResolvers());A(this,Rn,null);A(this,zf,!1);A(this,Uf,!!((PS=globalThis.FontInspector)!=null&&PS.enabled));A(this,al,null);A(this,wr,null);A(this,Hf,0);A(this,$f,0);A(this,ll,null);A(this,_u,null);A(this,Cu,0);A(this,Co,0);A(this,Tu,Object.create(null));A(this,Vf,[]);A(this,ku,null);A(this,cl,[]);A(this,Gf,new WeakMap);A(this,Wf,null);var c;if(t instanceof ReadableStream)m(this,ku,t);else if(typeof t=="object")m(this,ku,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');m(this,Rn,m(this,_u,e)),m(this,Co,n.scale*ls.pixelRatio),m(this,Cu,n.rotation),m(this,wr,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:o,pageY:l}=n.rawDims;m(this,Wf,[1,0,0,-1,-o,l+r]),m(this,$f,s),m(this,Hf,r),S(c=he,ui,lC).call(c),ha(e,n),a(this,_o).promise.finally(()=>{a(he,Lu).delete(this),m(this,wr,null),m(this,Tu,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=je.platform;return dt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,ll).read().then(({value:e,done:n})=>{if(n){a(this,_o).resolve();return}a(this,al)??m(this,al,e.lang),Object.assign(a(this,Tu),e.styles),S(this,Yr,oC).call(this,e.items),t()},a(this,_o).reject)};return m(this,ll,a(this,ku).getReader()),a(he,Lu).add(this),t(),a(this,_o).promise}update({viewport:t,onBefore:e=null}){var r;const n=t.scale*ls.pixelRatio,s=t.rotation;if(s!==a(this,Cu)&&(e==null||e(),m(this,Cu,s),ha(a(this,_u),{rotation:s})),n!==a(this,Co)){e==null||e(),m(this,Co,n);const o={div:null,properties:null,ctx:S(r=he,ui,Wg).call(r,a(this,al))};for(const l of a(this,cl))o.properties=a(this,Gf).get(l),o.div=l,S(this,Yr,aw).call(this,o)}}cancel(){var e;const t=new Gr("TextLayer task cancelled.");(e=a(this,ll))==null||e.cancel(t).catch(()=>{}),m(this,ll,null),a(this,_o).reject(t)}get textDivs(){return a(this,cl)}get textContentItemsStr(){return a(this,Vf)}static cleanup(){if(!(a(this,Lu).size>0)){a(this,Pu).clear();for(const{canvas:t}of a(this,ul).values())t.remove();a(this,ul).clear()}}},_o=new WeakMap,Rn=new WeakMap,zf=new WeakMap,Uf=new WeakMap,al=new WeakMap,wr=new WeakMap,Hf=new WeakMap,$f=new WeakMap,ll=new WeakMap,_u=new WeakMap,Cu=new WeakMap,Co=new WeakMap,Tu=new WeakMap,Vf=new WeakMap,ku=new WeakMap,cl=new WeakMap,Gf=new WeakMap,Wf=new WeakMap,Pu=new WeakMap,ul=new WeakMap,Xf=new WeakMap,To=new WeakMap,Lu=new WeakMap,Yr=new WeakSet,oC=function(t){var s,r;if(a(this,zf))return;(r=a(this,wr)).ctx??(r.ctx=S(s=he,ui,Wg).call(s,a(this,al)));const e=a(this,cl),n=a(this,Vf);for(const o of t){if(e.length>IM){lt("Ignoring additional textDivs for performance reasons."),m(this,zf,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=a(this,Rn);m(this,Rn,document.createElement("span")),a(this,Rn).classList.add("markedContent"),o.id&&a(this,Rn).setAttribute("id",`${o.id}`),l.append(a(this,Rn))}else o.type==="endMarkedContent"&&m(this,Rn,a(this,Rn).parentNode);continue}n.push(o.str),S(this,Yr,aC).call(this,o)}},aC=function(t){var w;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,cl).push(e);const s=q.transform(a(this,Wf),t.transform);let r=Math.atan2(s[1],s[0]);const o=a(this,Tu)[t.fontName];o.vertical&&(r+=Math.PI/2);let l=a(this,Uf)&&o.fontSubstitution||o.fontFamily;l=he.fontFamilyMap.get(l)||l;const c=Math.hypot(s[2],s[3]),u=c*S(w=he,ui,cC).call(w,l,o,a(this,al));let h,d;r===0?(h=s[4],d=s[5]-u):(h=s[4]+u*Math.sin(r),d=s[5]-u*Math.cos(r));const f="calc(var(--total-scale-factor) *",p=e.style;a(this,Rn)===a(this,_u)?(p.left=`${(100*h/a(this,$f)).toFixed(2)}%`,p.top=`${(100*d/a(this,Hf)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(a(he,To)*c).toFixed(2)}px)`,p.fontFamily=l,n.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,Uf)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(n.angle=r*(180/Math.PI));let y=!1;if(t.str.length>1)y=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const x=Math.abs(t.transform[0]),g=Math.abs(t.transform[3]);x!==g&&Math.max(x,g)/Math.min(x,g)>1.5&&(y=!0)}if(y&&(n.canvasWidth=o.vertical?t.height:t.width),a(this,Gf).set(e,n),a(this,wr).div=e,a(this,wr).properties=n,S(this,Yr,aw).call(this,a(this,wr)),n.hasText&&a(this,Rn).append(e),n.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),a(this,Rn).append(x)}},aw=function(t){var l;const{div:e,properties:n,ctx:s}=t,{style:r}=e;let o="";if(a(he,To)>1&&(o=`scale(${1/a(he,To)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=n;S(l=he,ui,lw).call(l,s,h*a(this,Co),c);const{width:d}=s.measureText(e.textContent);d>0&&(o=`scaleX(${u*a(this,Co)/d}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(r.transform=o)},ui=new WeakSet,Wg=function(t=null){let e=a(this,ul).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,ul).set(t,e),a(this,Xf).set(e,{size:0,family:""})}return e},lw=function(t,e,n){const s=a(this,Xf).get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)},lC=function(){if(a(this,To)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),m(this,To,t.getBoundingClientRect().height),t.remove()},cC=function(t,e,n){const s=a(this,Pu).get(t);if(s)return s;const r=S(this,ui,Wg).call(this,n);r.canvas.width=r.canvas.height=yS,S(this,ui,lw).call(this,r,yS,t);const o=r.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let u=.8;return l?u=l/(l+c):(je.platform.isFirefox&&lt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?u=e.ascent:e.descent&&(u=1+e.descent)),a(this,Pu).set(t,u),u},A(he,ui),A(he,Pu,new Map),A(he,ul,new Map),A(he,Xf,new WeakMap),A(he,To,null),A(he,Lu,new Set),he);const FM=100;function aA(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new cw,{docId:e}=t,n=i.url?VR(i.url):null,s=i.data?GR(i.data):null,r=i.httpHeaders||null,o=i.withCredentials===!0,l=i.password??null,c=i.range instanceof lA?i.range:null,u=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let h=i.worker instanceof bh?i.worker:null;const d=i.verbosity,f=typeof i.docBaseUrl=="string"&&!Hp(i.docBaseUrl)?i.docBaseUrl:null,p=mg(i.cMapUrl),y=i.cMapPacked!==!1,w=i.CMapReaderFactory||(vn?JR:iS),x=mg(i.iccUrl),g=mg(i.standardFontDataUrl),v=i.StandardFontDataFactory||(vn?ZR:sS),b=mg(i.wasmUrl),E=i.WasmFactory||(vn?tM:rS),_=i.stopAtErrors!==!0,C=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,T=i.isEvalSupported!==!1,k=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!vn,P=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!vn&&(je.platform.isFirefox||!globalThis.chrome),L=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,M=typeof i.disableFontFace=="boolean"?i.disableFontFace:vn,I=i.fontExtraProperties===!0,$=i.enableXfa===!0,N=i.ownerDocument||globalThis.document,W=i.disableRange===!0,j=i.disableStream===!0,U=i.disableAutoFetch===!0,D=i.pdfBug===!0,H=i.CanvasFactory||(vn?QR:YR),B=i.FilterFactory||(vn?KR:qR),Z=i.enableHWA===!0,G=i.useWasm!==!1,tt=c?c.length:i.length??NaN,ct=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!vn&&!M,Pt=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(w===iS&&v===sS&&E===rS&&p&&g&&b&&Wh(p,document.baseURI)&&Wh(g,document.baseURI)&&Wh(b,document.baseURI)),_t=null;_R(d);const rt={canvasFactory:new H({ownerDocument:N,enableHWA:Z}),filterFactory:new B({docId:e,ownerDocument:N}),cMapReaderFactory:Pt?null:new w({baseUrl:p,isCompressed:y}),standardFontDataFactory:Pt?null:new v({baseUrl:g}),wasmFactory:Pt?null:new E({baseUrl:b})};h||(h=bh.create({verbosity:d,port:Li.workerPort}),t._worker=h);const Gt={docId:e,apiVersion:"5.4.296",data:s,password:l,disableAutoFetch:U,rangeChunkSize:u,length:tt,docBaseUrl:f,enableXfa:$,evaluatorOptions:{maxImageSize:C,disableFontFace:M,ignoreErrors:_,isEvalSupported:T,isOffscreenCanvasSupported:k,isImageDecoderSupported:P,canvasMaxAreaInBytes:L,fontExtraProperties:I,useSystemFonts:ct,useWasm:G,useWorkerFetch:Pt,cMapUrl:p,iccUrl:x,standardFontDataUrl:g,wasmUrl:b}},Se={ownerDocument:N,pdfBug:D,styleElement:_t,loadingParams:{disableAutoFetch:U,enableXfa:$}};return h.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ut=h.messageHandler.sendWithPromise("GetDocRequest",Gt,s?[s.buffer]:null);let nt;if(c)nt=new vM(c,{disableRange:W,disableStream:j});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");const K=Wh(n)?SM:vn?MM:TM;nt=new K({url:n,length:tt,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:W,disableStream:j})}return Ut.then(K=>{if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const it=new Jh(e,K,h.port),ot=new jM(it,t,nt,Se,rt,Z);t._transport=ot,it.send("Ready",null)})}).catch(t._capability.reject),t}var ay;const ly=class ly{constructor(){O(this,"_capability",Promise.withResolvers());O(this,"_transport",null);O(this,"_worker",null);O(this,"docId",`d${xe(ly,ay)._++}`);O(this,"destroyed",!1);O(this,"onPassword",null);O(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};ay=new WeakMap,A(ly,ay,0);let cw=ly;var hl,Yf,qf,Kf,Qf,LS;let lA=(LS=class{constructor(t,e,n=!1,s=null){A(this,hl,Promise.withResolvers());A(this,Yf,[]);A(this,qf,[]);A(this,Kf,[]);A(this,Qf,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(t){a(this,Qf).push(t)}addProgressListener(t){a(this,Kf).push(t)}addProgressiveReadListener(t){a(this,qf).push(t)}addProgressiveDoneListener(t){a(this,Yf).push(t)}onDataRange(t,e){for(const n of a(this,Qf))n(t,e)}onDataProgress(t,e){a(this,hl).promise.then(()=>{for(const n of a(this,Kf))n(t,e)})}onDataProgressiveRead(t){a(this,hl).promise.then(()=>{for(const e of a(this,qf))e(t)})}onDataProgressiveDone(){a(this,hl).promise.then(()=>{for(const t of a(this,Yf))t()})}transportReady(){a(this,hl).resolve()}requestDataRange(t,e){zt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},hl=new WeakMap,Yf=new WeakMap,qf=new WeakMap,Kf=new WeakMap,Qf=new WeakMap,LS);class OM{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return dt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ar,dl,rd;class BM{constructor(t,e,n,s=!1){A(this,dl);A(this,Ar,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new Kb:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new rC,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}={}){return new Up({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return dt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:s="display",annotationMode:r=$s.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:h=null,printAnnotationStorage:d=null,isEditing:f=!1,recordOperations:p=!1,operationsFilter:y=null}){var P,L,M;(P=this._stats)==null||P.time("Overall");const w=this._transport.getRenderingIntent(s,r,d,f),{renderingIntent:x,cacheKey:g}=w;m(this,Ar,!1),c||(c=this._transport.getOptionalContentConfig(x));let v=this._intentStates.get(g);v||(v=Object.create(null),this._intentStates.set(g,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const b=!!(x&si.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(L=this._stats)==null||L.time("Page Request"),this._pumpOperatorList(w));const E=!!(this._pdfBug&&((M=globalThis.StepperManager)!=null&&M.enabled)),_=!this.recordedBBoxes&&(p||E),C=I=>{var $,N;if(v.renderTasks.delete(T),_){const W=($=T.gfx)==null?void 0:$.dependencyTracker.take();W&&(T.stepper&&T.stepper.setOperatorBBoxes(W,T.gfx.dependencyTracker.takeDebugMetadata()),p&&(this.recordedBBoxes=W))}b&&m(this,Ar,!0),S(this,dl,rd).call(this),I?(T.capability.reject(I),this._abortOperatorList({intentState:v,reason:I instanceof Error?I:new Error(I)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(N=globalThis.Stats)!=null&&N.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new uw({callback:C,params:{canvas:e,canvasContext:t,dependencyTracker:_?new nM(e,v.operatorList.length,E):null,viewport:n,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:y});(v.renderTasks||(v.renderTasks=new Set)).add(T);const k=T.task;return Promise.all([v.displayReadyCapability.promise,c]).then(([I,$])=>{var N;if(this.destroyed){C();return}if((N=this._stats)==null||N.time("Rendering"),!($.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:I,optionalContentConfig:$}),T.operatorListChanged()}).catch(C),k}getOperatorList({intent:t="display",annotationMode:e=$s.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var u;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,n,s,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Wd.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function r(){o.read().then(function({value:c,done:u}){if(u){n(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},s)}const o=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),m(this,Ar,!1),Promise.all(t)}cleanup(t=!1){m(this,Ar,!0);const e=S(this,dl,rd).call(this);return t&&e&&this._stats&&(this._stats=new Kb),e}_startRenderPage(t,e){var s,r;const n=this._intentStates.get(e);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&S(this,dl,rd).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){const{map:r,transfer:o}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:s},o).getReader(),u=this._intentStates.get(e);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();S(this,dl,rd).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Oy){let s=FM;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Gr(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Ar=new WeakMap,dl=new WeakSet,rd=function(){if(!a(this,Ar)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),m(this,Ar,!1),!0};var ko,Xi,br,fl,cy,pl,gl,An,Xg,uC,hC,od,Ru,Yg;const Kt=class Kt{constructor({name:t=null,port:e=null,verbosity:n=CR()}={}){A(this,An);A(this,ko,Promise.withResolvers());A(this,Xi,null);A(this,br,null);A(this,fl,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(a(Kt,gl).has(e))throw new Error("Cannot use more than one PDFWorker per port.");a(Kt,gl).set(e,this),S(this,An,uC).call(this,e)}else S(this,An,hC).call(this)}get promise(){return a(this,ko).promise}get port(){return a(this,br)}get messageHandler(){return a(this,Xi)}destroy(){var t,e;this.destroyed=!0,(t=a(this,fl))==null||t.terminate(),m(this,fl,null),a(Kt,gl).delete(a(this,br)),m(this,br,null),(e=a(this,Xi))==null||e.destroy(),m(this,Xi,null)}static create(t){const e=a(this,gl).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Kt(t)}static get workerSrc(){if(Li.workerSrc)return Li.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return dt(this,"_setupFakeWorkerGlobal",(async()=>a(this,Ru,Yg)?a(this,Ru,Yg):(await import(this.workerSrc)).WorkerMessageHandler)())}};ko=new WeakMap,Xi=new WeakMap,br=new WeakMap,fl=new WeakMap,cy=new WeakMap,pl=new WeakMap,gl=new WeakMap,An=new WeakSet,Xg=function(){a(this,ko).resolve(),a(this,Xi).send("configure",{verbosity:this.verbosity})},uC=function(t){m(this,br,t),m(this,Xi,new Jh("main","worker",t)),a(this,Xi).on("ready",()=>{}),S(this,An,Xg).call(this)},hC=function(){if(a(Kt,pl)||a(Kt,Ru,Yg)){S(this,An,od).call(this);return}let{workerSrc:t}=Kt;try{Kt._isSameOrigin(window.location,t)||(t=Kt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Jh("main","worker",e),s=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?a(this,ko).reject(new Error("Worker was destroyed")):S(this,An,od).call(this)},r=new AbortController;e.addEventListener("error",()=>{a(this,fl)||s()},{signal:r.signal}),n.on("test",l=>{if(r.abort(),this.destroyed||!l){s();return}m(this,Xi,n),m(this,br,e),m(this,fl,e),S(this,An,Xg).call(this)}),n.on("ready",l=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{S(this,An,od).call(this)}});const o=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};o();return}catch{Fy("The worker has been disabled.")}S(this,An,od).call(this)},od=function(){a(Kt,pl)||(lt("Setting up fake worker."),m(Kt,pl,!0)),Kt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){a(this,ko).reject(new Error("Worker was destroyed"));return}const e=new XR;m(this,br,e);const n=`fake${xe(Kt,cy)._++}`,s=new Jh(n+"_worker",n,e);t.setup(s,e),m(this,Xi,new Jh(n,n+"_worker",e)),S(this,An,Xg).call(this)}).catch(t=>{a(this,ko).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Ru=new WeakSet,Yg=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},A(Kt,Ru),A(Kt,cy,0),A(Kt,pl,!1),A(Kt,gl,new WeakMap),vn&&(m(Kt,pl,!0),Li.workerSrc||(Li.workerSrc="./pdf.worker.mjs")),Kt._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const s=new URL(e,n);return n.origin===s.origin},Kt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Kt.fromPort=t=>{if(IR("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Kt.create(t)};let bh=Kt;var Sr,Rs,Mu,Du,xr,ml,ad;class jM{constructor(t,e,n,s,r,o){A(this,ml);A(this,Sr,new Map);A(this,Rs,new Map);A(this,Mu,new Map);A(this,Du,new Map);A(this,xr,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new rC,this.fontLoader=new HR({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return dt(this,"annotationStorage",new sA)}getRenderingIntent(t,e=$s.ENABLE,n=null,s=!1,r=!1){let o=si.DISPLAY,l=Xv;switch(t){case"any":o=si.ANY;break;case"display":break;case"print":o=si.PRINT;break;default:lt(`getRenderingIntent - invalid intent: ${t}`)}const c=o&si.PRINT&&n instanceof H_?n:this.annotationStorage;switch(e){case $s.DISABLE:o+=si.ANNOTATIONS_DISABLE;break;case $s.ENABLE:break;case $s.ENABLE_FORMS:o+=si.ANNOTATIONS_FORMS;break;case $s.ENABLE_STORAGE:o+=si.ANNOTATIONS_STORAGE,l=c.serializable;break;default:lt(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(o+=si.IS_EDITING),r&&(o+=si.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[o,l.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:l,modifiedIds:u}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=a(this,xr))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of a(this,Rs).values())t.push(s._destroy());a(this,Rs).clear(),a(this,Mu).clear(),a(this,Du).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,r;this.commonObjs.clear(),this.fontLoader.clear(),a(this,Sr).clear(),this.filterFactory.destroy(),qd.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Gr("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{wt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}wt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:o}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=e.onProgress)==null||u.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(n,s)=>{wt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:l}){if(l){s.close();return}wt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new OM(n,this))}),t.on("DocException",n=>{e._capability.reject(_n(n))}),t.on("PasswordRequest",n=>{m(this,xr,Promise.withResolvers());try{if(!e.onPassword)throw _n(n);const s=r=>{r instanceof Error?a(this,xr).reject(r):a(this,xr).resolve({password:r})};e.onPassword(s,n.code)}catch(s){a(this,xr).reject(s)}return a(this,xr).promise}),t.on("DataLoaded",n=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;a(this,Rs).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,r])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":if("error"in r){const d=r.error;lt(`Error during font loading: ${d}`),this.commonObjs.resolve(n,d);break}const l=new sw(r),c=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,u=new $R(l,c,r.extra,r.charProcOperatorList);this.fontLoader.bind(u).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:h}=r;wt(h,"The imageRef must be defined.");for(const d of a(this,Rs).values())for(const[,f]of d.objs)if((f==null?void 0:f.ref)===h)return f.dataLen?(this.commonObjs.resolve(n,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,r,o])=>{var c;if(this.destroyed)return;const l=a(this,Rs).get(s);if(!l.objs.has(n)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":l.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[n.type];if(!s)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&lt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=a(this,Mu).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&a(this,Du).set(r.refStr,t);const o=new BM(e,r,this,this._params.pdfBug);return a(this,Rs).set(e,o),o});return a(this,Mu).set(e,s),s}getPageIndex(t){return Yv(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return S(this,ml,ad).call(this,"GetFieldObjects")}hasJSActions(){return S(this,ml,ad).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return S(this,ml,ad).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return S(this,ml,ad).call(this,"GetOptionalContentConfig").then(e=>new yM(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,Sr).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>{var r,o;return{info:s[0],metadata:s[1]?new gM(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return a(this,Sr).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,Rs).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,Sr).clear(),this.filterFactory.destroy(!0),qd.cleanup()}}cachedPageNumber(t){if(!Yv(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return a(this,Du).get(e)??null}}Sr=new WeakMap,Rs=new WeakMap,Mu=new WeakMap,Du=new WeakMap,xr=new WeakMap,ml=new WeakSet,ad=function(t,e=null){const n=a(this,Sr).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,e);return a(this,Sr).set(t,s),s};var Po;class zM{constructor(t){A(this,Po,null);O(this,"onContinue",null);O(this,"onError",null);m(this,Po,t)}get promise(){return a(this,Po).capability.promise}cancel(t=0){a(this,Po).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,Po).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,Po);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Po=new WeakMap;var Lo,yl;const Ta=class Ta{constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null,enableHWA:p=!1,operationsFilter:y=null}){A(this,Lo,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new zM(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=p,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=y}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var c,u;if(this.cancelled)return;if(this._canvas){if(a(Ta,yl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(Ta,yl).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:s,background:r,dependencyTracker:o}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Bc(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:s,viewport:n,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(t=null,e=0){var n,s,r;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),a(this,Lo)&&(window.cancelAnimationFrame(a(this,Lo)),m(this,Lo,null)),a(Ta,yl).delete(this._canvas),t||(t=new Oy(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(r=(s=this.task).onError)==null||r.call(s,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?m(this,Lo,window.requestAnimationFrame(()=>{m(this,Lo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(Ta,yl).delete(this._canvas),this.callback())))}};Lo=new WeakMap,yl=new WeakMap,A(Ta,yl,new WeakSet);let uw=Ta;const dC="5.4.296",fC="f56dc8601";var Wn,vl,Nu,Ce,Jf,Iu,Er,Zf,Ro,Yi,tp,It,hw,dw,fw,xa,pC,Jr;const Cn=class Cn{constructor({editor:t=null,uiManager:e=null}){A(this,It);A(this,Wn,null);A(this,vl,null);A(this,Nu);A(this,Ce,null);A(this,Jf,!1);A(this,Iu,!1);A(this,Er,null);A(this,Zf);A(this,Ro,null);A(this,Yi,null);var n,s;t?(m(this,Iu,!1),m(this,Er,t)):m(this,Iu,!0),m(this,Yi,(t==null?void 0:t._uiManager)||e),m(this,Zf,a(this,Yi)._eventBus),m(this,Nu,((n=t==null?void 0:t.color)==null?void 0:n.toUpperCase())||((s=a(this,Yi))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),a(Cn,tp)||m(Cn,tp,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return dt(this,"_keyboardManager",new $p([[["Escape","mac+Escape"],Cn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Cn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Cn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Cn.prototype._moveToPrevious],[["Home","mac+Home"],Cn.prototype._moveToBeginning],[["End","mac+End"],Cn.prototype._moveToEnd]]))}renderButton(){const t=m(this,Wn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",a(this,Er)&&(t.ariaControls=`${a(this,Er).id}_colorpicker_dropdown`);const e=a(this,Yi)._signal;t.addEventListener("click",S(this,It,xa).bind(this),{signal:e}),t.addEventListener("keydown",S(this,It,fw).bind(this),{signal:e});const n=m(this,vl,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=a(this,Nu),t.append(n),t}renderMainDropdown(){const t=m(this,Ce,S(this,It,hw).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===a(this,Wn)){S(this,It,xa).call(this,t);return}const e=t.target.getAttribute("data-color");e&&S(this,It,dw).call(this,e,t)}_moveToNext(t){var e,n;if(!a(this,It,Jr)){S(this,It,xa).call(this,t);return}if(t.target===a(this,Wn)){(e=a(this,Ce).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=a(this,Ce))==null?void 0:e.firstChild)||t.target===a(this,Wn)){a(this,It,Jr)&&this._hideDropdownFromKeyboard();return}a(this,It,Jr)||S(this,It,xa).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!a(this,It,Jr)){S(this,It,xa).call(this,t);return}(e=a(this,Ce).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,It,Jr)){S(this,It,xa).call(this,t);return}(e=a(this,Ce).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,Ce))==null||t.classList.add("hidden"),a(this,Wn).ariaExpanded="false",(e=a(this,Ro))==null||e.abort(),m(this,Ro,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,Iu)){if(!a(this,It,Jr)){(t=a(this,Er))==null||t.unselect();return}this.hideDropdown(),a(this,Wn).focus({preventScroll:!0,focusVisible:a(this,Jf)})}}updateColor(t){if(a(this,vl)&&(a(this,vl).style.backgroundColor=t),!a(this,Ce))return;const e=a(this,Yi).highlightColors.values();for(const n of a(this,Ce).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=a(this,Wn))==null||t.remove(),m(this,Wn,null),m(this,vl,null),(e=a(this,Ce))==null||e.remove(),m(this,Ce,null)}};Wn=new WeakMap,vl=new WeakMap,Nu=new WeakMap,Ce=new WeakMap,Jf=new WeakMap,Iu=new WeakMap,Er=new WeakMap,Zf=new WeakMap,Ro=new WeakMap,Yi=new WeakMap,tp=new WeakMap,It=new WeakSet,hw=function(){const t=document.createElement("div"),e=a(this,Yi)._signal;t.addEventListener("contextmenu",di,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),a(this,Er)&&(t.id=`${a(this,Er).id}_colorpicker_dropdown`);for(const[n,s]of a(this,Yi).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=n,r.setAttribute("data-l10n-id",a(Cn,tp)[n]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.ariaSelected=s===a(this,Nu),r.addEventListener("click",S(this,It,dw).bind(this,s),{signal:e}),t.append(r)}return t.addEventListener("keydown",S(this,It,fw).bind(this),{signal:e}),t},dw=function(t,e){e.stopPropagation(),a(this,Zf).dispatch("switchannotationeditorparams",{source:this,type:vt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},fw=function(t){Cn._keyboardManager.exec(this,t)},xa=function(t){if(a(this,It,Jr)){this.hideDropdown();return}if(m(this,Jf,t.detail===0),a(this,Ro)||(m(this,Ro,new AbortController),window.addEventListener("pointerdown",S(this,It,pC).bind(this),{signal:a(this,Yi).combinedSignal(a(this,Ro))})),a(this,Wn).ariaExpanded="true",a(this,Ce)){a(this,Ce).classList.remove("hidden");return}const e=m(this,Ce,S(this,It,hw).call(this));a(this,Wn).append(e)},pC=function(t){var e;(e=a(this,Ce))!=null&&e.contains(t.target)||this.hideDropdown()},Jr=function(){return a(this,Ce)&&!a(this,Ce).classList.contains("hidden")},A(Cn,tp,null);let Kd=Cn;var Ms,ep,Fu,np;const ka=class ka{constructor(t){A(this,Ms,null);A(this,ep,null);A(this,Fu,null);m(this,ep,t),m(this,Fu,t._uiManager),a(ka,np)||m(ka,np,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(a(this,Ms))return a(this,Ms);const{editorType:t,colorType:e,colorValue:n}=a(this,ep),s=m(this,Ms,document.createElement("input"));return s.type="color",s.value=n||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",a(ka,np)[t]),s.addEventListener("input",()=>{a(this,Fu).updateParams(e,s.value)},{signal:a(this,Fu)._signal}),s}update(t){a(this,Ms)&&(a(this,Ms).value=t)}destroy(){var t;(t=a(this,Ms))==null||t.remove(),m(this,Ms,null)}hideDropdown(){}};Ms=new WeakMap,ep=new WeakMap,Fu=new WeakMap,np=new WeakMap,A(ka,np,null);let Wm=ka;function vS(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function jh(i){return Math.max(0,Math.min(255,255*i))}class wS{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=jh(t),[t,t,t]}static G_HTML([t]){const e=vS(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(jh)}static RGB_HTML(t){return`#${t.map(vS).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[jh(1-Math.min(1,t+s)),jh(1-Math.min(1,n+s)),jh(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,r=1-e,o=1-n,l=Math.min(s,r,o);return["CMYK",s,r,o,l]}}class UM{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){zt("Abstract method `_createSVG` called.")}}class Qd extends UM{_createSVG(t){return document.createElementNS(qs,t)}}const HM=9,Zl=new WeakSet,$M=new Date().getTimezoneOffset()*60*1e3;class AS{static create(t){switch(t.data.annotationType){case pe.LINK:return new cA(t);case pe.TEXT:return new GM(t);case pe.WIDGET:switch(t.data.fieldType){case"Tx":return new WM(t);case"Btn":return t.data.radioButton?new yC(t):t.data.checkBox?new YM(t):new qM(t);case"Ch":return new KM(t);case"Sig":return new XM(t)}return new sc(t);case pe.POPUP:return new gw(t);case pe.FREETEXT:return new SC(t);case pe.LINE:return new JM(t);case pe.SQUARE:return new ZM(t);case pe.CIRCLE:return new t2(t);case pe.POLYLINE:return new xC(t);case pe.CARET:return new n2(t);case pe.INK:return new uA(t);case pe.POLYGON:return new e2(t);case pe.HIGHLIGHT:return new EC(t);case pe.UNDERLINE:return new i2(t);case pe.SQUIGGLY:return new s2(t);case pe.STRIKEOUT:return new r2(t);case pe.STAMP:return new _C(t);case pe.FILEATTACHMENT:return new o2(t);default:return new oe(t)}}}var wl,Ou,_i,ip,pw;const vA=class vA{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){A(this,ip);A(this,wl,null);A(this,Ou,!1);A(this,_i,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return vA._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:t}=this,e=(n=this.annotationStorage)==null?void 0:n.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var l;const t=(l=this.annotationStorage)==null?void 0:l.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:s}=this.data;let r=-1/0,o=-1/0;if((e==null?void 0:e.length)>=8){for(let c=0;c<e.length;c+=8)e[c+1]>o?(o=e[c+1],r=e[c+2]):e[c+1]===o&&(r=Math.max(r,e[c+2]));return[r,o]}if((n==null?void 0:n.length)>=1){for(const c of n)for(let u=0,h=c.length;u<h;u+=2)c[u+1]>o?(o=c[u+1],r=c[u]):c[u+1]===o&&(r=Math.max(r,c[u]));if(r!==1/0)return[r,o]}return s?[s[2],s[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:o}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-r)/n,t[1]=100*(t[1]-o)/s,t}get commentText(){var e,n,s;const{data:t}=this;return((n=(e=this.annotationStorage.getRawValue(`${Vd}${t.id}`))==null?void 0:e.popup)==null?void 0:n.contents)||((s=t.contentsObj)==null?void 0:s.str)||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${Vd}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=a(this,_i))==null?void 0:t.popup)||this.popup)==null||e.remove(),m(this,_i,this.popup=null)}updateEdited(t){var r;if(!this.container)return;t.rect&&(a(this,wl)||m(this,wl,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&S(this,ip,pw).call(this,e);let s=((r=a(this,_i))==null?void 0:r.popup)||this.popup;!s&&(n!=null&&n.text)&&(this._createPopup(n),s=a(this,_i).popup),s&&(s.updateEdited(t),n!=null&&n.deleted&&(s.remove(),m(this,_i,null),this.popup=null))}resetEdited(){var t;a(this,wl)&&(S(this,ip,pw).call(this,a(this,wl).rect),(t=a(this,_i))==null||t.popup.resetEdited(),m(this,wl,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),!(this instanceof sc)&&!(this instanceof cA)&&(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof gw){const{rotation:w}=e;return!e.hasOwnCanvas&&w!==0&&this.setRotation(w,r),r}const{width:l,height:c}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const w=e.borderStyle.horizontalCornerRadius,x=e.borderStyle.verticalCornerRadius;if(w>0||x>0){const v=`calc(${w}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;o.borderRadius=v}else if(this instanceof yC){const v=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=v}switch(e.borderStyle.style){case ac.SOLID:o.borderStyle="solid";break;case ac.DASHED:o.borderStyle="dashed";break;case ac.BEVELED:lt("Unimplemented border style: beveled");break;case ac.INSET:lt("Unimplemented border style: inset");break;case ac.UNDERLINE:o.borderBottomStyle="solid";break}const g=e.borderColor||null;g?(m(this,Ou,!0),o.borderColor=q.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):o.borderWidth=0}const u=q.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=s.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-p)/d}%`;const{rotation:y}=e;return e.hasOwnCanvas||y===0?(o.width=`${100*l/h}%`,o.height=`${100*c/d}%`):this.setRotation(y,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/n}%`,e.style.height=`${100*o/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const r=s.detail[e],o=r[0],l=r.slice(1);s.target.style[n]=wS[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:wS[`${o}_rgb`](l)})};return dt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail)){const r=t[s]||n[s];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,r]of Object.entries(e)){const o=n[s];if(o){const l={detail:{[s]:r},target:t};o(l),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,r]=this.data.rect.map(w=>Math.fround(w));if(t.length===8){const[w,x,g,v]=t.subarray(2,6);if(s===w&&r===x&&e===g&&n===v)return}const{style:o}=this.container;let l;if(a(this,Ou)){const{borderColor:w,borderWidth:x}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const c=s-e,u=r-n,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),y=`clippath_${this.data.id}`;p.setAttribute("id",y),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let w=2,x=t.length;w<x;w+=8){const g=t[w],v=t[w+1],b=t[w+2],E=t[w+3],_=h.createElement("rect"),C=(b-e)/c,T=(r-v)/u,k=(g-b)/c,P=(v-E)/u;_.setAttribute("x",C),_.setAttribute("y",T),_.setAttribute("width",k),_.setAttribute("height",P),p.append(_),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${C}" y="${T}" width="${k}" height="${P}"/>`)}a(this,Ou)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(d),this.container.style.clipPath=`url(#${y})`}_createPopup(t=null){const{data:e}=this;let n,s;t?(n={str:t.text},s=t.date):(n=e.contentsObj,s=e.modificationDate);const r=m(this,_i,new gw({data:{color:e.color,titleObj:e.titleObj,modificationDate:s,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(r.render())}get hasPopupElement(){return!!(a(this,_i)||this.popup||this.data.popupRef)}get extraPopupElement(){return a(this,_i)}render(){zt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:r,id:o,exportValues:l}of s){if(r===-1||o===e)continue;const c=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Zl.has(u)){lt(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:c,domElement:u})}return n}for(const s of document.getElementsByName(t)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==e&&Zl.has(s)&&n.push({id:o,exportValue:r,domElement:s})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};wl=new WeakMap,Ou=new WeakMap,_i=new WeakMap,ip=new WeakSet,pw=function(t){const{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,s===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(s)};let oe=vA;class VM extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var ai,Ea,gC,mC;class cA extends oe{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});A(this,ai);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action,e.overlaidText),r=!0):e.attachment?(S(this,ai,gC).call(this,s,e.attachment,e.overlaidText,e.attachmentDest),r=!0):e.setOCGState?(S(this,ai,mC).call(this,s,e.setOCGState,e.overlaidText),r=!0):e.dest?(this._bindLink(s,e.dest,e.overlaidText),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(e,n,s=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&S(this,ai,Ea).call(this),s&&(e.title=s)}_bindNamedAction(e,n,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),s&&(e.title=s),S(this,ai,Ea).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const o=s.get(r);o&&(e[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),S(this,ai,Ea).call(this)}_bindResetFormAction(e,n){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),S(this,ai,Ea).call(this),!this._fieldObjects){lt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var d;s==null||s();const{fields:r,refs:o,include:l}=n,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const y=this._fieldObjects[p]||[];for(const{id:w}of y)f.add(w)}for(const p of Object.values(this._fieldObjects))for(const y of p)f.has(y.id)===l&&c.push(y)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const w=f.defaultValue||"";u.setValue(p,{value:w});break}case"checkbox":case"radiobutton":{const w=f.defaultValue===f.exportValues;u.setValue(p,{value:w});break}case"combobox":case"listbox":{const w=f.defaultValue||"";u.setValue(p,{value:w});break}default:continue}const y=document.querySelector(`[data-element-id="${p}"]`);if(y){if(!Zl.has(y)){lt(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}ai=new WeakSet,Ea=function(){this.container.setAttribute("data-internal-link","")},gC=function(e,n,s="",r=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:s&&(e.title=s),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,r),!1},S(this,ai,Ea).call(this)},mC=function(e,n,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),s&&(e.title=s),S(this,ai,Ea).call(this)};class GM extends oe{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class sc extends oe{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return je.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,r){n.includes("mouse")?t.addEventListener(n,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(n,o=>{var l;if(n==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}}))})}_setEventListeners(t,e,n,s){var r,o,l;for(const[c,u]of n)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,u,s),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":q.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||HM,r=t.style;let o;const l=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(u/(A0*s))||1,d=u/h;o=Math.min(s,c(d/A0))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(s,c(u/A0))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=q.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class WM extends sc{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=n),r.setValue(o.id,{[s]:n})}render(){var s,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let l=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",u??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Zl.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:p}=this.data,y=!!f&&this.enableScripting;d&&(n.title=d),this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",x=>{t.setValue(e,{value:x.target.value}),this.setPropertyOnSiblings(n,"value",x.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",x=>{const g=this.data.defaultFieldValue??"";n.value=h.userValue=g,h.formattedValue=null});let w=x=>{const{formattedValue:g}=h;g!=null&&(x.target.value=g),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",g=>{var b;if(h.focused)return;const{target:v}=g;if(y&&(v.type=f,p&&(v.step=p)),h.userValue){const E=h.userValue;if(y)if(f==="time"){const _=new Date(E),C=[_.getHours(),_.getMinutes(),_.getSeconds()];v.value=C.map(T=>T.toString().padStart(2,"0")).join(":")}else v.value=new Date(E-$M).toISOString().split(f==="date"?"T":".",1)[0];else v.value=E}h.lastCommittedValue=v.value,h.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const v={value(b){h.userValue=b.detail.value??"",y||t.setValue(e,{value:h.userValue.toString()}),b.target.value=h.userValue},formattedValue(b){const{formattedValue:E}=b.detail;h.formattedValue=E,E!=null&&b.target!==document.activeElement&&(b.target.value=E);const _={formattedValue:E};y&&(_.value=E),t.setValue(e,_)},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var T;const{charLimit:E}=b.detail,{target:_}=b;if(E===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",E);let C=h.userValue;!C||C.length<=E||(C=C.slice(0,E),_.value=h.userValue=C,t.setValue(e,{value:C}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(v,g)}),n.addEventListener("keydown",g=>{var E;h.commitKey=1;let v=-1;if(g.key==="Escape"?v=0:g.key==="Enter"&&!this.data.multiLine?v=2:g.key==="Tab"&&(h.commitKey=3),v===-1)return;const{value:b}=g.target;h.lastCommittedValue!==b&&(h.lastCommittedValue=b,h.userValue=b,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:v,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const x=w;w=null,n.addEventListener("blur",g=>{var E,_;if(!h.focused||!g.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(h.focused=!1);const{target:v}=g;let{value:b}=v;if(y){if(b&&f==="time"){const C=b.split(":").map(T=>parseInt(T,10));b=new Date(2e3,0,1,C[0],C[1],C[2]||0).valueOf(),v.step=""}else b.includes("T")||(b=`${b}T00:00`),b=new Date(b).valueOf();v.type="text"}h.userValue=b,h.lastCommittedValue!==b&&((_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:h.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),x(g)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",g=>{var P;h.lastCommittedValue=null;const{data:v,target:b}=g,{value:E,selectionStart:_,selectionEnd:C}=b;let T=_,k=C;switch(g.inputType){case"deleteWordBackward":{const L=E.substring(0,_).match(/\w*[^\w]*$/);L&&(T-=L[0].length);break}case"deleteWordForward":{const L=E.substring(_).match(/^[^\w]*\w*/);L&&(k+=L[0].length);break}case"deleteContentBackward":_===C&&(T-=1);break;case"deleteContentForward":_===C&&(k+=1);break}g.preventDefault(),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,change:v||"",willCommit:!1,selStart:T,selEnd:k}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(w&&n.addEventListener("blur",w),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class XM extends sc{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class YM extends sc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Zl.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,n)){const h=c&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=h),t.setValue(u.id,{value:h})}t.setValue(n,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue||"Off";o.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class yC extends sc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const o of this._getElementsByName(e.fieldName,n))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(Zl.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,n))t.setValue(u.id,{value:!1});t.setValue(n,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue;o.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===n;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class qM extends cA{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class KM extends sc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Zl.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,n.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),s.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),o=()=>{h.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const l=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=l(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const p=f.detail.value,y=new Set(Array.isArray(p)?p:[p]);for(const w of s.options)w.selected=y.has(w.value);t.setValue(e,{value:l(!0)}),c=l(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,y=f.detail.remove;p[y].selected=!1,s.remove(y),p.length>0&&Array.prototype.findIndex.call(p,x=>x.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},clear(f){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),c=l(!1)},insert(f){const{index:p,displayValue:y,exportValue:w}=f.detail.insert,x=s.children[p],g=document.createElement("option");g.textContent=y,g.value=w,x?x.before(g):s.append(g),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const y of p){const{displayValue:w,exportValue:x}=y,g=document.createElement("option");g.textContent=w,g.value=x,s.append(g)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},indices(f){const p=new Set(f.detail.indices);for(const y of f.target.options)y.selected=p.has(y.index);t.setValue(e,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),s.addEventListener("input",h=>{var p;const d=l(!0),f=l(!1);t.setValue(e,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}var sp,mw;class gw extends oe{constructor(e){const{data:n,elements:s,parent:r}=e,o=!!r._commentManager;super(e,{isRenderable:!o&&oe._hasPopupData(n)});A(this,sp);if(this.elements=s,o&&oe._hasPopupData(n)){const l=this.popup=S(this,sp,mw).call(this);for(const c of s)c.popup=l}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=S(this,sp,mw).call(this),s=[];for(const r of this.elements)r.popup=n,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${eA}${r}`).join(",")),this.container}}sp=new WeakSet,mw=function(){return new QM({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Xn,Mo,uy,hy,Bu,ju,ue,Ds,Do,Al,zu,Uu,Ns,Yn,_r,Cr,Re,Tr,No,rp,kr,Hu,bl,Io,on,Fo,pt,qg,yw,vw,ww,Kg,Aw,vC,wC,AC,bC,Qg,Jg,bw;class QM{constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:r,contentsObj:o,richText:l,parent:c,rect:u,parentRect:h,open:d,commentManager:f=null}){A(this,pt);A(this,Xn,null);A(this,Mo,S(this,pt,AC).bind(this));A(this,uy,S(this,pt,bw).bind(this));A(this,hy,S(this,pt,Jg).bind(this));A(this,Bu,S(this,pt,Qg).bind(this));A(this,ju,null);A(this,ue,null);A(this,Ds,null);A(this,Do,null);A(this,Al,null);A(this,zu,null);A(this,Uu,null);A(this,Ns,!1);A(this,Yn,null);A(this,_r,null);A(this,Cr,null);A(this,Re,null);A(this,Tr,null);A(this,No,null);A(this,rp,null);A(this,kr,null);A(this,Hu,null);A(this,bl,null);A(this,Io,!1);A(this,on,null);A(this,Fo,null);m(this,ue,t),m(this,Hu,s),m(this,Ds,o),m(this,kr,l),m(this,zu,c),m(this,ju,e),m(this,rp,u),m(this,Uu,h),m(this,Al,n),m(this,Xn,f),m(this,on,n[0]),m(this,Do,Xd.toDateObject(r)),this.trigger=n.flatMap(p=>p.getElementsToTriggerPopup()),f?this.renderCommentButton():(S(this,pt,qg).call(this),a(this,ue).hidden=!0,d&&S(this,pt,Qg).call(this))}renderCommentButton(){if(a(this,Re)||(a(this,Tr)||S(this,pt,yw).call(this),!a(this,Tr)))return;const{signal:t}=m(this,_r,new AbortController),e=!!a(this,on).extraPopupElement,n=()=>{a(this,Xn).toggleCommentPopup(this,!0,void 0,!e)},s=()=>{a(this,Xn).toggleCommentPopup(this,!1,!0,!e)},r=()=>{a(this,Xn).toggleCommentPopup(this,!1,!1)};if(e){m(this,Re,a(this,on).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",a(this,Mo),{signal:t}),o.addEventListener("click",n,{signal:t}),o.addEventListener("pointerenter",s,{signal:t}),o.addEventListener("pointerleave",r,{signal:t}),o.classList.add("popupTriggerArea")}else{const o=m(this,Re,document.createElement("button"));o.className="annotationCommentButton";const l=a(this,on).container;o.style.zIndex=l.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),S(this,pt,ww).call(this),S(this,pt,vw).call(this),o.addEventListener("keydown",a(this,Mo),{signal:t}),o.addEventListener("click",n,{signal:t}),o.addEventListener("pointerenter",s,{signal:t}),o.addEventListener("pointerleave",r,{signal:t}),l.after(o)}}get commentButtonColor(){const{color:t,opacity:e}=a(this,on).commentData;return t?a(this,zu)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=a(this,Re))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:s,modificationDate:r}=a(this,on).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:s,modificationDate:r}}get elementBeforePopup(){return a(this,Re)}get comment(){return a(this,Fo)||m(this,Fo,a(this,on).commentText),a(this,Fo)}set comment(t){t!==this.comment&&(a(this,on).commentText=m(this,Fo,t))}get parentBoundingClientRect(){return a(this,on).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){a(this,Re)&&(a(this,Re).classList.toggle("selected",t),a(this,Re).ariaExpanded=e)}setSelectedCommentButton(t){a(this,Re).classList.toggle("selected",t)}get commentPopupPosition(){if(a(this,No))return a(this,No);const{x:t,y:e,height:n}=a(this,Re).getBoundingClientRect(),{x:s,y:r,width:o,height:l}=a(this,on).layer.getBoundingClientRect();return[(t-s)/o,(e+n-r)/l]}set commentPopupPosition(t){m(this,No,t)}hasDefaultPopupPosition(){return a(this,No)===null}get commentButtonPosition(){return a(this,Tr)}get commentButtonWidth(){return a(this,Re).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=a(this,No)||this.commentButtonPosition.map(u=>u/100),s=this.parentBoundingClientRect,{x:r,y:o,width:l,height:c}=s;a(this,Xn).showDialog(null,this,r+e*l,o+n*c,{...t,parentDimensions:s})}render(){var n,s;if(a(this,Yn))return;const t=m(this,Yn,document.createElement("div"));if(t.className="popup",a(this,ju)){const r=t.style.outlineColor=q.makeHexColor(...a(this,ju));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");if(e.className="header",(n=a(this,Hu))!=null&&n.str){const r=document.createElement("span");r.className="title",e.append(r),{dir:r.dir,str:r.textContent}=a(this,Hu)}if(t.append(e),a(this,Do)){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,Do).valueOf()})),r.dateTime=a(this,Do).toISOString(),e.append(r)}iA({html:a(this,pt,Kg)||a(this,Ds).str,dir:(s=a(this,Ds))==null?void 0:s.dir,className:"popupContent"},t),a(this,ue).append(t)}updateEdited({rect:t,popup:e,deleted:n}){var s;if(a(this,Xn)){n?(this.remove(),m(this,Fo,null)):e&&(e.deleted?this.remove():(S(this,pt,ww).call(this),m(this,Fo,e.text))),t&&(m(this,Tr,null),S(this,pt,yw).call(this),S(this,pt,vw).call(this));return}if(n||e!=null&&e.deleted){this.remove();return}S(this,pt,qg).call(this),a(this,bl)||m(this,bl,{contentsObj:a(this,Ds),richText:a(this,kr)}),t&&m(this,Cr,null),e&&e.text&&(m(this,kr,S(this,pt,wC).call(this,e.text)),m(this,Do,Xd.toDateObject(e.date)),m(this,Ds,null)),(s=a(this,Yn))==null||s.remove(),m(this,Yn,null)}resetEdited(){var t;a(this,bl)&&({contentsObj:xe(this,Ds)._,richText:xe(this,kr)._}=a(this,bl),m(this,bl,null),(t=a(this,Yn))==null||t.remove(),m(this,Yn,null),m(this,Cr,null))}remove(){var t,e,n;if((t=a(this,_r))==null||t.abort(),m(this,_r,null),(e=a(this,Yn))==null||e.remove(),m(this,Yn,null),m(this,Io,!1),m(this,Ns,!1),(n=a(this,Re))==null||n.remove(),m(this,Re,null),this.trigger)for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){m(this,Io,this.isVisible),a(this,Io)&&(a(this,ue).hidden=!0)}maybeShow(){a(this,Xn)||(S(this,pt,qg).call(this),a(this,Io)&&(a(this,Yn)||S(this,pt,Jg).call(this),m(this,Io,!1),a(this,ue).hidden=!1))}get isVisible(){return a(this,Xn)?!1:a(this,ue).hidden===!1}}Xn=new WeakMap,Mo=new WeakMap,uy=new WeakMap,hy=new WeakMap,Bu=new WeakMap,ju=new WeakMap,ue=new WeakMap,Ds=new WeakMap,Do=new WeakMap,Al=new WeakMap,zu=new WeakMap,Uu=new WeakMap,Ns=new WeakMap,Yn=new WeakMap,_r=new WeakMap,Cr=new WeakMap,Re=new WeakMap,Tr=new WeakMap,No=new WeakMap,rp=new WeakMap,kr=new WeakMap,Hu=new WeakMap,bl=new WeakMap,Io=new WeakMap,on=new WeakMap,Fo=new WeakMap,pt=new WeakSet,qg=function(){var e;if(a(this,_r))return;m(this,_r,new AbortController);const{signal:t}=a(this,_r);for(const n of this.trigger)n.addEventListener("click",a(this,Bu),{signal:t}),n.addEventListener("pointerenter",a(this,hy),{signal:t}),n.addEventListener("pointerleave",a(this,uy),{signal:t}),n.classList.add("popupTriggerArea");for(const n of a(this,Al))(e=n.container)==null||e.addEventListener("keydown",a(this,Mo),{signal:t})},yw=function(){const t=a(this,Al).find(e=>e.hasCommentButton);t&&m(this,Tr,t._normalizePoint(t.commentButtonPosition))},vw=function(){if(a(this,on).extraPopupElement&&!a(this,on).editor)return;this.renderCommentButton();const[t,e]=a(this,Tr),{style:n}=a(this,Re);n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`},ww=function(){a(this,on).extraPopupElement||(this.renderCommentButton(),a(this,Re).style.backgroundColor=this.commentButtonColor||"")},Kg=function(){const t=a(this,kr),e=a(this,Ds);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,kr).html||null},Aw=function(){var t,e,n;return((n=(e=(t=a(this,pt,Kg))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},vC=function(){var t,e,n;return((n=(e=(t=a(this,pt,Kg))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},wC=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:a(this,pt,vC),fontSize:a(this,pt,Aw)?`calc(${a(this,pt,Aw)}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:s});return n},AC=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,Ns))&&S(this,pt,Qg).call(this)},bC=function(){if(a(this,Cr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:r}}}=a(this,zu);let o=!!a(this,Uu),l=o?a(this,Uu):a(this,rp);for(const y of a(this,Al))if(!l||q.intersect(y.data.rect,l)!==null){l=y.data.rect,o=!0;break}const c=q.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),h=o?l[2]-l[0]+5:0,d=c[0]+h,f=c[1];m(this,Cr,[100*(d-s)/e,100*(f-r)/n]);const{style:p}=a(this,ue);p.left=`${a(this,Cr)[0]}%`,p.top=`${a(this,Cr)[1]}%`},Qg=function(){if(a(this,Xn)){a(this,Xn).toggleCommentPopup(this,!1);return}m(this,Ns,!a(this,Ns)),a(this,Ns)?(S(this,pt,Jg).call(this),a(this,ue).addEventListener("click",a(this,Bu)),a(this,ue).addEventListener("keydown",a(this,Mo))):(S(this,pt,bw).call(this),a(this,ue).removeEventListener("click",a(this,Bu)),a(this,ue).removeEventListener("keydown",a(this,Mo)))},Jg=function(){a(this,Yn)||this.render(),this.isVisible?a(this,Ns)&&a(this,ue).classList.add("focused"):(S(this,pt,bC).call(this),a(this,ue).hidden=!1,a(this,ue).style.zIndex=parseInt(a(this,ue).style.zIndex)+1e3)},bw=function(){a(this,ue).classList.remove("focused"),!(a(this,Ns)||!this.isVisible)&&(a(this,ue).hidden=!0,a(this,ue).style.zIndex=parseInt(a(this,ue).style.zIndex)-1e3)};class SC extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=at.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var op;class JM extends oe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,op,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),o=m(this,op,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,op)}addHighlightArea(){this.container.classList.add("highlightArea")}}op=new WeakMap;var ap;class ZM extends oe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,ap,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),o=e.borderStyle.width,l=m(this,ap,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",n-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,ap)}addHighlightArea(){this.container.classList.add("highlightArea")}}ap=new WeakMap;var lp;class t2 extends oe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,lp,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),o=e.borderStyle.width,l=m(this,lp,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",s/2),l.setAttribute("rx",n/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,lp)}addHighlightArea(){this.container.classList.add("highlightArea")}}lp=new WeakMap;var cp;class xC extends oe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,cp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:s,popupRef:r},width:o,height:l}=this;if(!n)return this.container;const c=this.svgFactory.create(o,l,!0);let u=[];for(let d=0,f=n.length;d<f;d+=2){const p=n[d]-e[0],y=e[3]-n[d+1];u.push(`${p},${y}`)}u=u.join(" ");const h=m(this,cp,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,cp)}addHighlightArea(){this.container.classList.add("highlightArea")}}cp=new WeakMap;class e2 extends xC{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class n2 extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var up,Sl,hp,Sw;class uA extends oe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,hp);A(this,up,null);A(this,Sl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?at.HIGHLIGHT:at.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:u}=S(this,hp,Sw).call(this,n,e),h=this.svgFactory.create(c,u,!0),d=m(this,up,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",l);for(let f=0,p=s.length;f<p;f++){const y=this.svgFactory.createElement(this.svgElementName);a(this,Sl).push(y),y.setAttribute("points",s[f].join(",")),d.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:s,rect:r}=e,o=a(this,up);if(n>=0&&o.setAttribute("stroke-width",n||1),s)for(let l=0,c=a(this,Sl).length;l<c;l++)a(this,Sl)[l].setAttribute("points",s[l].join(","));if(r){const{transform:l,width:c,height:u}=S(this,hp,Sw).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return a(this,Sl)}addHighlightArea(){this.container.classList.add("highlightArea")}}up=new WeakMap,Sl=new WeakMap,hp=new WeakSet,Sw=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class EC extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=at.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class i2 extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class s2 extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class r2 extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class _C extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=at.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var dp,fp,xw;class o2 extends oe{constructor(e){var s;super(e,{isRenderable:!0});A(this,fp);A(this,dp,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",S(this,fp,xw).bind(this)),m(this,dp,s);const{isMac:r}=je.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&S(this,fp,xw).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return a(this,dp)}addHighlightArea(){this.container.classList.add("highlightArea")}}dp=new WeakMap,fp=new WeakSet,xw=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var $u,xl,Vu,Oo,pp,El,pa,Ew,_w,Gu;let hA=(Gu=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:r,viewport:o,structTreeLayer:l,commentManager:c,linkService:u,annotationStorage:h}){A(this,pa);A(this,$u,null);A(this,xl,null);A(this,Vu,null);A(this,Oo,new Map);A(this,pp,null);A(this,El,null);this.div=t,m(this,$u,e),m(this,xl,n),m(this,pp,l||null),m(this,El,u||null),m(this,Vu,h||new sA),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=c||null}hasEditableAnnotations(){return a(this,Oo).size>0}async render(t){var o,l,c;const{annotations:e}=t,n=this.div;ha(n,this.viewport);const s=new Map,r={data:null,layer:n,linkService:a(this,El),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Qd,annotationStorage:a(this,Vu),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const h=u.annotationType===pe.POPUP;if(h){const p=s.get(u.id);if(!p)continue;r.elements=p}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;r.data=u;const d=AS.create(r);if(!d.isRenderable)continue;if(!h&&u.popupRef){const p=s.get(u.popupRef);p?p.push(d):s.set(u.popupRef,[d])}const f=d.render();u.hidden&&(f.style.visibility="hidden"),await S(this,pa,Ew).call(this,f,u.id,r.elements),(l=(o=d.extraPopupElement)==null?void 0:o.popup)==null||l.renderCommentButton(),d._isEditable&&(a(this,Oo).set(d.data.id,d),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(d))}S(this,pa,_w).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:a(this,El),svgFactory:new Qd,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=Gu._defaultBorderStyle),e.data=n;const s=AS.create(e);if(!s.isRenderable)continue;const r=s.render();await S(this,pa,Ew).call(this,r,n.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,ha(e,{rotation:t.rotation}),S(this,pa,_w).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Oo).values())}getEditableAnnotation(t){return a(this,Oo).get(t)}addFakeAnnotation(t){var l;const{div:e}=this,{id:n,rotation:s}=t,r=new VM({data:{id:n,rect:t.getPDFRect(),rotation:s},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:a(this,El),annotationStorage:a(this,Vu)}),o=r.render();return e.append(o),(l=a(this,$u))==null||l.moveElementInDOM(e,o,o,!1),r.createOrUpdatePopup(),r}static get _defaultBorderStyle(){return dt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ac.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},$u=new WeakMap,xl=new WeakMap,Vu=new WeakMap,Oo=new WeakMap,pp=new WeakMap,El=new WeakMap,pa=new WeakSet,Ew=async function(t,e,n){var l,c;const s=t.firstChild||t,r=s.id=`${eA}${e}`,o=await((l=a(this,pp))==null?void 0:l.getAriaAttributes(r));if(o)for(const[u,h]of o)s.setAttribute(u,h);n?n.at(-1).container.after(t):(this.div.append(t),(c=a(this,$u))==null||c.moveElementInDOM(this.div,t,s,!1))},_w=function(){var e;if(!a(this,xl))return;const t=this.div;for(const[n,s]of a(this,xl)){const r=t.querySelector(`[data-annotation-id="${n}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const l=a(this,Oo).get(n);l&&(l._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,r.id,s),l._hasNoCanvas=!1):l.canvas=s)}a(this,xl).clear()},Gu);const Sg=/\r\n?|\n/g;var qn,gp,_l,Kn,be,CC,TC,kC,Zg,zr,tm,em,PC,Tw,LC;const Yt=class Yt extends Vt{constructor(e){super({...e,name:"freeTextEditor"});A(this,be);A(this,qn,"");A(this,gp,`${this.id}-editor`);A(this,_l,null);A(this,Kn);O(this,"_colorPicker",null);this.color=e.color||Yt._defaultColor||Vt._defaultLineColor,m(this,Kn,e.fontSize||Yt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const e=Yt.prototype,n=o=>o.isEmpty(),s=da.TRANSLATE_SMALL,r=da.TRANSLATE_BIG;return dt(this,"_keyboardManager",new $p([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(e,n){Vt.initialize(e,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case vt.FREETEXT_SIZE:Yt._defaultFontSize=n;break;case vt.FREETEXT_COLOR:Yt._defaultColor=n;break}}updateParams(e,n){switch(e){case vt.FREETEXT_SIZE:S(this,be,CC).call(this,n);break;case vt.FREETEXT_COLOR:S(this,be,TC).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[vt.FREETEXT_SIZE,Yt._defaultFontSize],[vt.FREETEXT_COLOR,Yt._defaultColor||Vt._defaultLineColor]]}get propertiesToUpdate(){return[[vt.FREETEXT_SIZE,a(this,Kn)],[vt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Wm(this)),[["colorPicker",this._colorPicker]]}get colorType(){return vt.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Yt._internalPadding*e,-(Yt._internalPadding+a(this,Kn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),m(this,_l,new AbortController);const e=this._uiManager.combinedSignal(a(this,_l));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,gp)),this._isDraggable=!0,(e=a(this,_l))==null||e.abort(),m(this,_l,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,qn),n=m(this,qn,S(this,be,kC).call(this).trimEnd());if(e===n)return;const s=r=>{if(m(this,qn,r),!r){this.remove();return}S(this,be,em).call(this),this._uiManager.rebuild(this),S(this,be,Zg).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(e)},mustExec:!1}),S(this,be,Zg).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Yt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,gp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${a(this,Kn)}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let y,w;switch(this.rotation){case 0:y=e+(l[0]-f)/h,w=n+this.height-(l[1]-p)/d;break;case 90:y=e+(l[0]-f)/h,w=n-(l[1]-p)/d,[c,u]=[u,-c];break;case 180:y=e-this.width+(l[0]-f)/h,w=n-(l[1]-p)/d,[c,u]=[-c,-u];break;case 270:y=e+(l[0]-f-this.height*d)/h,w=n+(l[1]-p-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(y*r,w*o,c,u)}else this._moveAfterPaste(e,n);S(this,be,em).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var y,w,x;const n=e.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=S(y=Yt,zr,Tw).call(y,n.getData("text")||"").replaceAll(Sg,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=l,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const g=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(Sg,"")),g!==this.editorDiv){let v=h;for(const b of this.editorDiv.childNodes){if(b===g){v=d;continue}v.push(S(w=Yt,zr,tm).call(w,b))}}h.push(c.nodeValue.slice(0,u).replaceAll(Sg,""))}else if(c===this.editorDiv){let g=h,v=0;for(const b of this.editorDiv.childNodes)v++===u&&(g=d),g.push(S(x=Yt,zr,tm).call(x,b))}m(this,qn,`${h.join(`
`)}${r}${d.join(`
`)}`),S(this,be,em).call(this);const f=new Range;let p=Math.sumPrecise(h.map(g=>g.length));for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const v=g.nodeValue.length;if(p<=v){f.setStart(g,p),f.setEnd(g,p);break}p-=v}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Yt._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,s){var l;let r=null;if(e instanceof SC){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:p,richText:y,contentsObj:w,creationDate:x,modificationDate:g},textContent:v,textPosition:b,parent:{page:{pageNumber:E}}}=e;if(!v||v.length===0)return null;r=e={annotationType:at.FREETEXT,color:Array.from(u),fontSize:c,value:v.join(`
`),position:b,pageIndex:E-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:(w==null?void 0:w.str)||null,richText:y,creationDate:x,modificationDate:g}}const o=await super.deserialize(e,n,s);return m(o,Kn,e.fontSize),o.color=q.makeHexColor(...e.color),m(o,qn,S(l=Yt,zr,Tw).call(l,e.value)),o._initialData=r,e.comment&&o.setCommentData(e),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Vt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(e),{color:n,fontSize:a(this,Kn),value:S(this,be,PC).call(this)});return this.addComment(s),e?(s.isCopy=!0,s):this.annotationElementId&&!S(this,be,LC).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:s}=n;s.fontSize=`calc(${a(this,Kn)}px * var(--total-scale-factor))`,s.color=this.color,n.replaceChildren();for(const r of a(this,qn).split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),n.append(o)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:a(this,qn)}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};qn=new WeakMap,gp=new WeakMap,_l=new WeakMap,Kn=new WeakMap,be=new WeakSet,CC=function(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-a(this,Kn))*this.parentScale),m(this,Kn,r),S(this,be,Zg).call(this)},s=a(this,Kn);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},TC=function(e){const n=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},kC=function(){var s;const e=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(S(s=Yt,zr,tm).call(s,r)),n=r);return e.join(`
`)},Zg=function(){const[e,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/n):(this.width=s.height/e,this.height=s.width/n),this.fixAndSetPosition()},zr=new WeakSet,tm=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Sg,"")},em=function(){if(this.editorDiv.replaceChildren(),!!a(this,qn))for(const e of a(this,qn).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},PC=function(){return a(this,qn).replaceAll(""," ")},Tw=function(e){return e.replaceAll(" ","")},LC=function(e){const{value:n,fontSize:s,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==s||e.color.some((l,c)=>l!==r[c])||e.pageIndex!==o},A(Yt,zr),O(Yt,"_freeTextDefaultContent",""),O(Yt,"_internalPadding",0),O(Yt,"_defaultColor",null),O(Yt,"_defaultFontSize",10),O(Yt,"_type","freetext"),O(Yt,"_editorType",at.FREETEXT);let Cw=Yt;class Y{toSVGPath(){zt("Abstract method `toSVGPath` must be implemented.")}get box(){zt("Abstract getter `box` must be implemented.")}serialize(t,e){zt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,s,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l]*s,o[l+1]=n+t[l+1]*r;return o}static _rescaleAndSwap(t,e,n,s,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l+1]*s,o[l+1]=n+t[l]*r;return o}static _translate(t,e,n,s){s||(s=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)s[r]=e+t[r],s[r+1]=n+t[r+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,s,r){switch(r){case 90:return[1-e/n,t/s];case 180:return[1-t/n,1-e/s];case 270:return[e/n,1-t/s];default:return[t/n,e/s]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,s,r,o){return[(t+5*n)/6,(e+5*s)/6,(5*n+r)/6,(5*s+o)/6,(n+r)/2,(s+o)/2]}}O(Y,"PRECISION",1e-4);var Qn,qi,Wu,Xu,Is,gt,Cl,Tl,mp,yp,Yu,qu,Bo,vp,dy,fy,Pe,ld,RC,MC,DC,NC,IC,FC;const tr=class tr{constructor({x:t,y:e},n,s,r,o,l=0){A(this,Pe);A(this,Qn);A(this,qi,[]);A(this,Wu);A(this,Xu);A(this,Is,[]);A(this,gt,new Float32Array(18));A(this,Cl);A(this,Tl);A(this,mp);A(this,yp);A(this,Yu);A(this,qu);A(this,Bo,[]);m(this,Qn,n),m(this,qu,r*s),m(this,Xu,o),a(this,gt).set([NaN,NaN,NaN,NaN,t,e],6),m(this,Wu,l),m(this,yp,a(tr,vp)*s),m(this,mp,a(tr,fy)*s),m(this,Yu,s),a(this,Bo).push(t,e)}isEmpty(){return isNaN(a(this,gt)[8])}add({x:t,y:e}){var P;m(this,Cl,t),m(this,Tl,e);const[n,s,r,o]=a(this,Qn);let[l,c,u,h]=a(this,gt).subarray(8,12);const d=t-u,f=e-h,p=Math.hypot(d,f);if(p<a(this,mp))return!1;const y=p-a(this,yp),w=y/p,x=w*d,g=w*f;let v=l,b=c;l=u,c=h,u+=x,h+=g,(P=a(this,Bo))==null||P.push(t,e);const E=-g/y,_=x/y,C=E*a(this,qu),T=_*a(this,qu);return a(this,gt).set(a(this,gt).subarray(2,8),0),a(this,gt).set([u+C,h+T],4),a(this,gt).set(a(this,gt).subarray(14,18),12),a(this,gt).set([u-C,h-T],16),isNaN(a(this,gt)[6])?(a(this,Is).length===0&&(a(this,gt).set([l+C,c+T],2),a(this,Is).push(NaN,NaN,NaN,NaN,(l+C-n)/r,(c+T-s)/o),a(this,gt).set([l-C,c-T],14),a(this,qi).push(NaN,NaN,NaN,NaN,(l-C-n)/r,(c-T-s)/o)),a(this,gt).set([v,b,l,c,u,h],6),!this.isEmpty()):(a(this,gt).set([v,b,l,c,u,h],6),Math.abs(Math.atan2(b-c,v-l)-Math.atan2(g,x))<Math.PI/2?([l,c,u,h]=a(this,gt).subarray(2,6),a(this,Is).push(NaN,NaN,NaN,NaN,((l+u)/2-n)/r,((c+h)/2-s)/o),[l,c,v,b]=a(this,gt).subarray(14,18),a(this,qi).push(NaN,NaN,NaN,NaN,((v+l)/2-n)/r,((b+c)/2-s)/o),!0):([v,b,l,c,u,h]=a(this,gt).subarray(0,6),a(this,Is).push(((v+5*l)/6-n)/r,((b+5*c)/6-s)/o,((5*l+u)/6-n)/r,((5*c+h)/6-s)/o,((l+u)/2-n)/r,((c+h)/2-s)/o),[u,h,l,c,v,b]=a(this,gt).subarray(12,18),a(this,qi).push(((v+5*l)/6-n)/r,((b+5*c)/6-s)/o,((5*l+u)/6-n)/r,((5*c+h)/6-s)/o,((l+u)/2-n)/r,((c+h)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,Is),e=a(this,qi);if(isNaN(a(this,gt)[6])&&!this.isEmpty())return S(this,Pe,RC).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);S(this,Pe,DC).call(this,n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return S(this,Pe,MC).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,s,r,o){return new OC(t,e,n,s,r,o)}getOutlines(){var d;const t=a(this,Is),e=a(this,qi),n=a(this,gt),[s,r,o,l]=a(this,Qn),c=new Float32Array((((d=a(this,Bo))==null?void 0:d.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(a(this,Bo)[f]-s)/o,c[f+1]=(a(this,Bo)[f+1]-r)/l;if(c[c.length-2]=(a(this,Cl)-s)/o,c[c.length-1]=(a(this,Tl)-r)/l,isNaN(n[6])&&!this.isEmpty())return S(this,Pe,NC).call(this,c);const u=new Float32Array(a(this,Is).length+24+a(this,qi).length);let h=t.length;for(let f=0;f<h;f+=2){if(isNaN(t[f])){u[f]=u[f+1]=NaN;continue}u[f]=t[f],u[f+1]=t[f+1]}h=S(this,Pe,FC).call(this,u,h);for(let f=e.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(e[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=e[f+p],u[h+1]=e[f+p+1],h+=2}return S(this,Pe,IC).call(this,u,h),this.newFreeDrawOutline(u,c,a(this,Qn),a(this,Yu),a(this,Wu),a(this,Xu))}};Qn=new WeakMap,qi=new WeakMap,Wu=new WeakMap,Xu=new WeakMap,Is=new WeakMap,gt=new WeakMap,Cl=new WeakMap,Tl=new WeakMap,mp=new WeakMap,yp=new WeakMap,Yu=new WeakMap,qu=new WeakMap,Bo=new WeakMap,vp=new WeakMap,dy=new WeakMap,fy=new WeakMap,Pe=new WeakSet,ld=function(){const t=a(this,gt).subarray(4,6),e=a(this,gt).subarray(16,18),[n,s,r,o]=a(this,Qn);return[(a(this,Cl)+(t[0]-e[0])/2-n)/r,(a(this,Tl)+(t[1]-e[1])/2-s)/o,(a(this,Cl)+(e[0]-t[0])/2-n)/r,(a(this,Tl)+(e[1]-t[1])/2-s)/o]},RC=function(){const[t,e,n,s]=a(this,Qn),[r,o,l,c]=S(this,Pe,ld).call(this);return`M${(a(this,gt)[2]-t)/n} ${(a(this,gt)[3]-e)/s} L${(a(this,gt)[4]-t)/n} ${(a(this,gt)[5]-e)/s} L${r} ${o} L${l} ${c} L${(a(this,gt)[16]-t)/n} ${(a(this,gt)[17]-e)/s} L${(a(this,gt)[14]-t)/n} ${(a(this,gt)[15]-e)/s} Z`},MC=function(t){const e=a(this,qi);t.push(`L${e[4]} ${e[5]} Z`)},DC=function(t){const[e,n,s,r]=a(this,Qn),o=a(this,gt).subarray(4,6),l=a(this,gt).subarray(16,18),[c,u,h,d]=S(this,Pe,ld).call(this);t.push(`L${(o[0]-e)/s} ${(o[1]-n)/r} L${c} ${u} L${h} ${d} L${(l[0]-e)/s} ${(l[1]-n)/r}`)},NC=function(t){const e=a(this,gt),[n,s,r,o]=a(this,Qn),[l,c,u,h]=S(this,Pe,ld).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-s)/o,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-s)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-s)/o,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-s)/o],0),this.newFreeDrawOutline(d,t,a(this,Qn),a(this,Yu),a(this,Wu),a(this,Xu))},IC=function(t,e){const n=a(this,qi);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},FC=function(t,e){const n=a(this,gt).subarray(4,6),s=a(this,gt).subarray(16,18),[r,o,l,c]=a(this,Qn),[u,h,d,f]=S(this,Pe,ld).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/l,(n[1]-o)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-o)/c],e),e+=24},A(tr,vp,8),A(tr,dy,2),A(tr,fy,a(tr,vp)+a(tr,dy));let Xm=tr;var Ku,kl,Pr,wp,Jn,Ap,me,py,BC;class OC extends Y{constructor(e,n,s,r,o,l){super();A(this,py);A(this,Ku);A(this,kl,new Float32Array(4));A(this,Pr);A(this,wp);A(this,Jn);A(this,Ap);A(this,me);m(this,me,e),m(this,Jn,n),m(this,Ku,s),m(this,Ap,r),m(this,Pr,o),m(this,wp,l),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],S(this,py,BC).call(this,l);const[c,u,h,d]=a(this,kl);for(let f=0,p=e.length;f<p;f+=2)e[f]=(e[f]-c)/h,e[f+1]=(e[f+1]-u)/d;for(let f=0,p=n.length;f<p;f+=2)n[f]=(n[f]-c)/h,n[f+1]=(n[f+1]-u)/d}toSVGPath(){const e=[`M${a(this,me)[4]} ${a(this,me)[5]}`];for(let n=6,s=a(this,me).length;n<s;n+=6){if(isNaN(a(this,me)[n])){e.push(`L${a(this,me)[n+4]} ${a(this,me)[n+5]}`);continue}e.push(`C${a(this,me)[n]} ${a(this,me)[n+1]} ${a(this,me)[n+2]} ${a(this,me)[n+3]} ${a(this,me)[n+4]} ${a(this,me)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,s,r],o){const l=s-e,c=r-n;let u,h;switch(o){case 0:u=Y._rescale(a(this,me),e,r,l,-c),h=Y._rescale(a(this,Jn),e,r,l,-c);break;case 90:u=Y._rescaleAndSwap(a(this,me),e,n,l,c),h=Y._rescaleAndSwap(a(this,Jn),e,n,l,c);break;case 180:u=Y._rescale(a(this,me),s,n,-l,c),h=Y._rescale(a(this,Jn),s,n,-l,c);break;case 270:u=Y._rescaleAndSwap(a(this,me),s,r,-l,-c),h=Y._rescaleAndSwap(a(this,Jn),s,r,-l,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return a(this,kl)}newOutliner(e,n,s,r,o,l=0){return new Xm(e,n,s,r,o,l)}getNewOutline(e,n){const[s,r,o,l]=a(this,kl),[c,u,h,d]=a(this,Ku),f=o*h,p=l*d,y=s*h+c,w=r*d+u,x=this.newOutliner({x:a(this,Jn)[0]*f+y,y:a(this,Jn)[1]*p+w},a(this,Ku),a(this,Ap),e,a(this,wp),n??a(this,Pr));for(let g=2;g<a(this,Jn).length;g+=2)x.add({x:a(this,Jn)[g]*f+y,y:a(this,Jn)[g+1]*p+w});return x.getOutlines()}}Ku=new WeakMap,kl=new WeakMap,Pr=new WeakMap,wp=new WeakMap,Jn=new WeakMap,Ap=new WeakMap,me=new WeakMap,py=new WeakSet,BC=function(e){const n=a(this,me);let s=n[4],r=n[5];const o=[s,r,s,r];let l=s,c=r,u=s,h=r;const d=e?Math.max:Math.min,f=new Float32Array(4);for(let y=6,w=n.length;y<w;y+=6){const x=n[y+4],g=n[y+5];isNaN(n[y])?(q.pointBoundingBox(x,g,o),c>g?(l=x,c=g):c===g&&(l=d(l,x)),h<g?(u=x,h=g):h===g&&(u=d(u,x))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,q.bezierBoundingBox(s,r,...n.slice(y,y+6),f),q.rectBoundingBox(f[0],f[1],f[2],f[3],o),c>f[1]?(l=f[0],c=f[1]):c===f[1]&&(l=d(l,f[0])),h<f[3]?(u=f[2],h=f[3]):h===f[3]&&(u=d(u,f[2]))),s=x,r=g}const p=a(this,kl);p[0]=o[0]-a(this,Pr),p[1]=o[1]-a(this,Pr),p[2]=o[2]-o[0]+2*a(this,Pr),p[3]=o[3]-o[1]+2*a(this,Pr),this.firstPoint=[l,c],this.lastPoint=[u,h]};var bp,Sp,xp,jo,Ki,Sn,jC,nm,zC,UC,Pw;class kw{constructor(t,e=0,n=0,s=!0){A(this,Sn);A(this,bp);A(this,Sp);A(this,xp);A(this,jo,[]);A(this,Ki,[]);const r=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x,y:g,width:v,height:b}of t){const E=Math.floor((x-e)/l)*l,_=Math.ceil((x+v+e)/l)*l,C=Math.floor((g-e)/l)*l,T=Math.ceil((g+b+e)/l)*l,k=[E,C,T,!0],P=[_,C,T,!1];a(this,jo).push(k,P),q.rectBoundingBox(E,C,_,T,r)}const c=r[2]-r[0]+2*n,u=r[3]-r[1]+2*n,h=r[0]-n,d=r[1]-n;let f=s?-1/0:1/0,p=1/0;const y=a(this,jo).at(s?-1:-2),w=[y[0],y[2]];for(const x of a(this,jo)){const[g,v,b,E]=x;!E&&s?v<p?(p=v,f=g):v===p&&(f=Math.max(f,g)):E&&!s&&(v<p?(p=v,f=g):v===p&&(f=Math.min(f,g))),x[0]=(g-h)/c,x[1]=(v-d)/u,x[2]=(b-d)/u}m(this,bp,new Float32Array([h,d,c,u])),m(this,Sp,[f,p]),m(this,xp,w)}getOutlines(){a(this,jo).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of a(this,jo))e[3]?(t.push(...S(this,Sn,Pw).call(this,e)),S(this,Sn,zC).call(this,e)):(S(this,Sn,UC).call(this,e),t.push(...S(this,Sn,Pw).call(this,e)));return S(this,Sn,jC).call(this,t)}}bp=new WeakMap,Sp=new WeakMap,xp=new WeakMap,jo=new WeakMap,Ki=new WeakMap,Sn=new WeakSet,jC=function(t){const e=[],n=new Set;for(const o of t){const[l,c,u]=o;e.push([l,c,o],[l,u,o])}e.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=e.length;o<l;o+=2){const c=e[o][2],u=e[o+1][2];c.push(u),u.push(c),n.add(c),n.add(u)}const s=[];let r;for(;n.size>0;){const o=n.values().next().value;let[l,c,u,h,d]=o;n.delete(o);let f=l,p=c;for(r=[l,u],s.push(r);;){let y;if(n.has(h))y=h;else if(n.has(d))y=d;else break;n.delete(y),[l,c,u,h,d]=y,f!==l&&(r.push(f,p,l,p===c?c:u),f=l),p=p===c?u:c}r.push(f,p)}return new a2(s,a(this,bp),a(this,Sp),a(this,xp))},nm=function(t){const e=a(this,Ki);let n=0,s=e.length-1;for(;n<=s;){const r=n+s>>1,o=e[r][0];if(o===t)return r;o<t?n=r+1:s=r-1}return s+1},zC=function([,t,e]){const n=S(this,Sn,nm).call(this,t);a(this,Ki).splice(n,0,[t,e])},UC=function([,t,e]){const n=S(this,Sn,nm).call(this,t);for(let s=n;s<a(this,Ki).length;s++){const[r,o]=a(this,Ki)[s];if(r!==t)break;if(r===t&&o===e){a(this,Ki).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[r,o]=a(this,Ki)[s];if(r!==t)break;if(r===t&&o===e){a(this,Ki).splice(s,1);return}}},Pw=function(t){const[e,n,s]=t,r=[[e,n,s]],o=S(this,Sn,nm).call(this,s);for(let l=0;l<o;l++){const[c,u]=a(this,Ki)[l];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=c)){if(f>=c){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,p>u&&r.push([e,u,p])}}}return r};var Ep,Qu;class a2 extends Y{constructor(e,n,s,r){super();A(this,Ep);A(this,Qu);m(this,Qu,e),m(this,Ep,n),this.firstPoint=s,this.lastPoint=r}toSVGPath(){const e=[];for(const n of a(this,Qu)){let[s,r]=n;e.push(`M${s} ${r}`);for(let o=2;o<n.length;o+=2){const l=n[o],c=n[o+1];l===s?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${l}`),s=l)}e.push("Z")}return e.join(" ")}serialize([e,n,s,r],o){const l=[],c=s-e,u=r-n;for(const h of a(this,Qu)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=e+h[f]*c,d[f+1]=r-h[f+1]*u;l.push(d)}return l}get box(){return a(this,Ep)}get classNamesForOutlining(){return["highlightOutline"]}}Ep=new WeakMap,Qu=new WeakMap;class Lw extends Xm{newFreeDrawOutline(t,e,n,s,r,o){return new l2(t,e,n,s,r,o)}}class l2 extends OC{newOutliner(t,e,n,s,r,o=0){return new Lw(t,e,n,s,r,o)}}var Ju,_p,Lr,Pl,Cp,Mn,Tp,kp,Ll,Zn,ti,Ve,Zu,th,an,eh,Ci,Pp,ft,Rw,im,HC,$C,VC,Mw,_a,Ri,fc,GC,sm,rm,WC,XC,YC,qC,KC;const xt=class xt extends Vt{constructor(e){super({...e,name:"highlightEditor"});A(this,ft);A(this,Ju,null);A(this,_p,0);A(this,Lr);A(this,Pl,null);A(this,Cp,null);A(this,Mn,null);A(this,Tp,null);A(this,kp,0);A(this,Ll,null);A(this,Zn,null);A(this,ti,null);A(this,Ve,!1);A(this,Zu,null);A(this,th,null);A(this,an,null);A(this,eh,"");A(this,Ci);A(this,Pp,"");this.color=e.color||xt._defaultColor,m(this,Ci,e.thickness||xt._defaultThickness),this.opacity=e.opacity||xt._defaultOpacity,m(this,Lr,e.boxes||null),m(this,Pp,e.methodOfCreation||""),m(this,eh,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(m(this,Ve,!0),S(this,ft,im).call(this,e),S(this,ft,_a).call(this)):a(this,Lr)&&(m(this,Ju,e.anchorNode),m(this,_p,e.anchorOffset),m(this,Tp,e.focusNode),m(this,kp,e.focusOffset),S(this,ft,Rw).call(this),S(this,ft,_a).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=xt.prototype;return dt(this,"_keyboardManager",new $p([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,Ve)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:a(this,Ci),methodOfCreation:a(this,Pp)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var s;Vt.initialize(e,n),xt._defaultColor||(xt._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case vt.HIGHLIGHT_COLOR:xt._defaultColor=n;break;case vt.HIGHLIGHT_THICKNESS:xt._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return a(this,th)}get commentButtonPosition(){return a(this,Zu)}updateParams(e,n){switch(e){case vt.HIGHLIGHT_COLOR:S(this,ft,HC).call(this,n);break;case vt.HIGHLIGHT_THICKNESS:S(this,ft,$C).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[vt.HIGHLIGHT_COLOR,xt._defaultColor],[vt.HIGHLIGHT_THICKNESS,xt._defaultThickness]]}get propertiesToUpdate(){return[[vt.HIGHLIGHT_COLOR,this.color||xt._defaultColor],[vt.HIGHLIGHT_THICKNESS,a(this,Ci)||xt._defaultThickness],[vt.HIGHLIGHT_FREE,a(this,Ve)]]}onUpdatedColor(){var e,n;(e=this.parent)==null||e.drawLayer.updateProperties(a(this,ti),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=a(this,Cp))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",m(this,Cp,new Kd({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(S(this,ft,rm).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,S(this,ft,rm).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){S(this,ft,Mw).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,ft,_a).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?S(this,ft,Mw).call(this):e&&(S(this,ft,_a).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var r,o,l;const{drawLayer:n}=this.parent;let s;a(this,Ve)?(e=(e-this.rotation+360)%360,s=S(r=xt,Ri,fc).call(r,a(this,Zn).box,e)):s=S(o=xt,Ri,fc).call(o,[this.x,this.y,this.width,this.height],e),n.updateProperties(a(this,ti),{bbox:s,root:{"data-main-rotation":e}}),n.updateProperties(a(this,an),{bbox:S(l=xt,Ri,fc).call(l,a(this,Mn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();a(this,eh)&&(e.setAttribute("aria-label",a(this,eh)),e.setAttribute("role","mark")),a(this,Ve)?e.classList.add("free"):this.div.addEventListener("keydown",S(this,ft,GC).bind(this),{signal:this._uiManager._signal});const n=m(this,Ll,document.createElement("div"));return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=a(this,Pl),this.setDims(this.width,this.height),m_(this,a(this,Ll),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,an),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,an),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:S(this,ft,sm).call(this,!0);break;case 1:case 3:S(this,ft,sm).call(this,!1);break}}select(){var e;super.select(),a(this,an)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,an),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),a(this,an)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,an),{rootClass:{selected:!1}}),a(this,Ve)||S(this,ft,sm).call(this,!1))}get _mustFixPosition(){return!a(this,Ve)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(a(this,ti),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(a(this,an),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:s,x:r,y:o}){const{x:l,y:c,width:u,height:h}=s.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),p=y=>{d.abort(),S(this,Ri,qC).call(this,e,y)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",ie,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",di,{signal:f}),s.addEventListener("pointermove",S(this,Ri,YC).bind(this,e),{signal:f}),this._freeHighlight=new Lw({x:r,y:o},[l,c,u,h],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,s){var w,x,g,v;let r=null;if(e instanceof EC){const{data:{quadPoints:b,rect:E,rotation:_,id:C,color:T,opacity:k,popupRef:P,richText:L,contentsObj:M,creationDate:I,modificationDate:$},parent:{page:{pageNumber:N}}}=e;r=e={annotationType:at.HIGHLIGHT,color:Array.from(T),opacity:k,quadPoints:b,boxes:null,pageIndex:N-1,rect:E.slice(0),rotation:_,annotationElementId:C,id:C,deleted:!1,popupRef:P,richText:L,comment:(M==null?void 0:M.str)||null,creationDate:I,modificationDate:$}}else if(e instanceof uA){const{data:{inkLists:b,rect:E,rotation:_,id:C,color:T,borderStyle:{rawWidth:k},popupRef:P,richText:L,contentsObj:M,creationDate:I,modificationDate:$},parent:{page:{pageNumber:N}}}=e;r=e={annotationType:at.HIGHLIGHT,color:Array.from(T),thickness:k,inkLists:b,boxes:null,pageIndex:N-1,rect:E.slice(0),rotation:_,annotationElementId:C,id:C,deleted:!1,popupRef:P,richText:L,comment:(M==null?void 0:M.str)||null,creationDate:I,modificationDate:$}}const{color:o,quadPoints:l,inkLists:c,opacity:u}=e,h=await super.deserialize(e,n,s);h.color=q.makeHexColor(...o),h.opacity=u||1,c&&m(h,Ci,e.thickness),h._initialData=r,e.comment&&h.setCommentData(e);const[d,f]=h.pageDimensions,[p,y]=h.pageTranslation;if(l){const b=m(h,Lr,[]);for(let E=0;E<l.length;E+=8)b.push({x:(l[E]-p)/d,y:1-(l[E+1]-y)/f,width:(l[E+2]-l[E])/d,height:(l[E+1]-l[E+5])/f});S(w=h,ft,Rw).call(w),S(x=h,ft,_a).call(x),h.rotate(h.rotation)}else if(c){m(h,Ve,!0);const b=c[0],E={x:b[0]-p,y:f-(b[1]-y)},_=new Lw(E,[0,0,d,f],1,a(h,Ci)/2,!0,.001);for(let k=0,P=b.length;k<P;k+=2)E.x=b[k]-p,E.y=f-(b[k+1]-y),_.add(E);const{id:C,clipPathId:T}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);S(g=h,ft,im).call(g,{highlightOutlines:_.getOutlines(),highlightId:C,clipPathId:T}),S(v=h,ft,_a).call(v),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=Vt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(e);return Object.assign(s,{color:n,opacity:this.opacity,thickness:a(this,Ci),quadPoints:S(this,ft,WC).call(this),outlines:S(this,ft,XC).call(this,s.rect)}),this.addComment(s),this.annotationElementId&&!S(this,ft,KC).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Ju=new WeakMap,_p=new WeakMap,Lr=new WeakMap,Pl=new WeakMap,Cp=new WeakMap,Mn=new WeakMap,Tp=new WeakMap,kp=new WeakMap,Ll=new WeakMap,Zn=new WeakMap,ti=new WeakMap,Ve=new WeakMap,Zu=new WeakMap,th=new WeakMap,an=new WeakMap,eh=new WeakMap,Ci=new WeakMap,Pp=new WeakMap,ft=new WeakSet,Rw=function(){const e=new kw(a(this,Lr),.001);m(this,Zn,e.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,Zn).box;const n=new kw(a(this,Lr),.0025,.001,this._uiManager.direction==="ltr");m(this,Mn,n.getOutlines());const{firstPoint:s}=a(this,Zn);m(this,Zu,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]);const{lastPoint:r}=a(this,Mn);m(this,th,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},im=function({highlightOutlines:e,highlightId:n,clipPathId:s}){var f,p;if(m(this,Zn,e),m(this,Mn,e.getNewOutline(a(this,Ci)/2+1.5,.0025)),n>=0)m(this,ti,n),m(this,Pl,s),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),m(this,an,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,Mn).box,path:{d:a(this,Mn).toSVGPath()}},!0));else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,ti),{bbox:S(f=xt,Ri,fc).call(f,a(this,Zn).box,(y-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,an),{bbox:S(p=xt,Ri,fc).call(p,a(this,Mn).box,y),path:{d:a(this,Mn).toSVGPath()}})}const[o,l,c,u]=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=u;break;case 90:{const[y,w]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*w/y,this.height=u*y/w;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=u;break;case 270:{const[y,w]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*w/y,this.height=u*y/w;break}}const{firstPoint:h}=e;m(this,Zu,[(h[0]-o)/c,(h[1]-l)/u]);const{lastPoint:d}=a(this,Mn);m(this,th,[(d[0]-o)/c,(d[1]-l)/u])},HC=function(e){const n=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:n.bind(this,e,xt._defaultOpacity),undo:n.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},$C=function(e){const n=a(this,Ci),s=r=>{m(this,Ci,r),S(this,ft,VC).call(this,r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},VC=function(e){a(this,Ve)&&(S(this,ft,im).call(this,{highlightOutlines:a(this,Zn).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},Mw=function(){a(this,ti)===null||!this.parent||(this.parent.drawLayer.remove(a(this,ti)),m(this,ti,null),this.parent.drawLayer.remove(a(this,an)),m(this,an,null))},_a=function(e=this.parent){a(this,ti)===null&&({id:xe(this,ti)._,clipPathId:xe(this,Pl)._}=e.drawLayer.draw({bbox:a(this,Zn).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:a(this,Ve)},path:{d:a(this,Zn).toSVGPath()}},!1,!0),m(this,an,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,Ve)},bbox:a(this,Mn).box,path:{d:a(this,Mn).toSVGPath()}},a(this,Ve))),a(this,Ll)&&(a(this,Ll).style.clipPath=a(this,Pl)))},Ri=new WeakSet,fc=function([e,n,s,r],o){switch(o){case 90:return[1-n-r,e,r,s];case 180:return[1-e-s,1-n-r,s,r];case 270:return[n,1-e-s,r,s]}return[e,n,s,r]},GC=function(e){xt._keyboardManager.exec(this,e)},sm=function(e){if(!a(this,Ju))return;const n=window.getSelection();e?n.setPosition(a(this,Ju),a(this,_p)):n.setPosition(a(this,Tp),a(this,kp))},rm=function(){return a(this,Ve)?this.rotation:0},WC=function(){if(a(this,Ve))return null;const[e,n]=this.pageDimensions,[s,r]=this.pageTranslation,o=a(this,Lr),l=new Float32Array(o.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of o){const p=u*e+s,y=(1-h)*n+r;l[c]=l[c+4]=p,l[c+1]=l[c+3]=y,l[c+2]=l[c+6]=p+d*e,l[c+5]=l[c+7]=y-f*n,c+=8}return l},XC=function(e){return a(this,Zn).serialize(e,S(this,ft,rm).call(this))},YC=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},qC=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},KC=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((s,r)=>s!==n[r])},A(xt,Ri),O(xt,"_defaultColor",null),O(xt,"_defaultOpacity",1),O(xt,"_defaultThickness",12),O(xt,"_type","highlight"),O(xt,"_editorType",at.HIGHLIGHT),O(xt,"_freeHighlightId",-1),O(xt,"_freeHighlight",null),O(xt,"_freeHighlightClipId","");let Ym=xt;var Rl;class QC{constructor(){A(this,Rl,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){a(this,Rl)[t]=e}toSVGProperties(){const t=a(this,Rl);return m(this,Rl,Object.create(null)),{root:t}}reset(){m(this,Rl,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){zt("Not implemented")}}Rl=new WeakMap;var ei,nh,Me,Ml,Dl,zo,Uo,Ho,Nl,bt,Dw,Nw,Iw,cd,JC,om,ud,pc;const J=class J extends Vt{constructor(e){super(e);A(this,bt);A(this,ei,null);A(this,nh);O(this,"_colorPicker",null);O(this,"_drawId",null);m(this,nh,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(S(this,bt,Dw).call(this,e),S(this,bt,cd).call(this))}static _mergeSVGProperties(e,n){const s=new Set(Object.keys(e));for(const[r,o]of Object.entries(n))s.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){zt("Not implemented")}static get typesMap(){zt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(a(J,Me).updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)e.push([s,n[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[s,r]of this.constructor.typesMap)e.push([s,n[r]]);return e}_updateProperty(e,n,s){const r=this._drawingOptions,o=r[n],l=c=>{var h;r.updateProperty(n,c);const u=a(this,ei).updateProperty(n,c);u&&S(this,bt,ud).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,J._mergeSVGProperties(a(this,ei).getPathResizingSVGProperties(S(this,bt,om).call(this)),{bbox:S(this,bt,pc).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,J._mergeSVGProperties(a(this,ei).getPathResizedSVGProperties(S(this,bt,om).call(this)),{bbox:S(this,bt,pc).call(this)}))}_onTranslating(e,n){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:S(this,bt,pc).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,J._mergeSVGProperties(a(this,ei).getPathTranslatedSVGProperties(S(this,bt,om).call(this),this.parentDimensions),{bbox:S(this,bt,pc).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,nh)&&(m(this,nh,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){S(this,bt,Iw).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,bt,cd).call(this),S(this,bt,ud).call(this,a(this,ei).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),S(this,bt,Iw).call(this)):e&&(this._uiManager.addShouldRescale(this),S(this,bt,cd).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,J._mergeSVGProperties({bbox:S(this,bt,pc).call(this)},a(this,ei).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&S(this,bt,ud).call(this,a(this,ei).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),s}static createDrawerInstance(e,n,s,r,o){zt("Not implemented")}static startDrawing(e,n,s,r){var x;const{target:o,offsetX:l,offsetY:c,pointerId:u,pointerType:h}=r;if(a(J,Uo)&&a(J,Uo)!==h)return;const{viewport:{rotation:d}}=e,{width:f,height:p}=o.getBoundingClientRect(),y=m(J,Ml,new AbortController),w=e.combinedSignal(y);if(a(J,zo)||m(J,zo,u),a(J,Uo)??m(J,Uo,h),window.addEventListener("pointerup",g=>{var v;a(J,zo)===g.pointerId?this._endDraw(g):(v=a(J,Ho))==null||v.delete(g.pointerId)},{signal:w}),window.addEventListener("pointercancel",g=>{var v;a(J,zo)===g.pointerId?this._currentParent.endDrawingSession():(v=a(J,Ho))==null||v.delete(g.pointerId)},{signal:w}),window.addEventListener("pointerdown",g=>{a(J,Uo)===g.pointerType&&((a(J,Ho)||m(J,Ho,new Set)).add(g.pointerId),a(J,Me).isCancellable()&&(a(J,Me).removeLastElement(),a(J,Me).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",di,{signal:w}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),o.addEventListener("touchmove",g=>{g.timeStamp===a(J,Nl)&&ie(g)},{signal:w}),e.toggleDrawing(),(x=n._editorUndoBar)==null||x.hide(),a(J,Me)){e.drawLayer.updateProperties(this._currentDrawId,a(J,Me).startNew(l,c,f,p,d));return}n.updateUIForDefaultProperties(this),m(J,Me,this.createDrawerInstance(l,c,f,p,d)),m(J,Dl,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(a(J,Dl).toSVGProperties(),a(J,Me).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(m(J,Nl,-1),!a(J,Me))return;const{offsetX:n,offsetY:s,pointerId:r}=e;if(a(J,zo)===r){if(((o=a(J,Ho))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(J,Me).add(n,s)),m(J,Nl,e.timeStamp),ie(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,m(J,Me,null),m(J,Dl,null),m(J,Uo,null),m(J,Nl,NaN)),a(J,Ml)&&(a(J,Ml).abort(),m(J,Ml,null),m(J,zo,NaN),m(J,Ho,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,a(J,Me).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=a(J,Me),r=this._currentDrawId,o=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:vt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(vt.DRAW_STEP),!a(J,Me).isEmpty()){const{pageDimensions:[s,r],scale:o}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(J,Me).getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:a(J,Dl),mustBeCommitted:!e});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,s,r,o,l){zt("Not implemented")}static async deserialize(e,n,s){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=n.viewport,u=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,e),h=await super.deserialize(e,n,s);return h.createDrawingOptions(e),S(d=h,bt,Dw).call(d,{drawOutlines:u}),S(f=h,bt,cd).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[n,s]=this.pageTranslation,[r,o]=this.pageDimensions;return a(this,ei).serialize([n,s,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};ei=new WeakMap,nh=new WeakMap,Me=new WeakMap,Ml=new WeakMap,Dl=new WeakMap,zo=new WeakMap,Uo=new WeakMap,Ho=new WeakMap,Nl=new WeakMap,bt=new WeakSet,Dw=function({drawOutlines:e,drawId:n,drawingOptions:s}){m(this,ei,e),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=S(this,bt,Nw).call(this,e,this.parent),S(this,bt,ud).call(this,e.box)},Nw=function(e,n){const{id:s}=n.drawLayer.draw(J._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},Iw=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},cd=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=S(this,bt,Nw).call(this,a(this,ei),e)}},JC=function([e,n,s,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[n,1-e,s*(l/o),r*(o/l)];case 180:return[1-e,1-n,s,r];case 270:return[1-n,e,s*(l/o),r*(o/l)];default:return[e,n,s,r]}},om=function(){const{x:e,y:n,width:s,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-n,e,s*(o/l),r*(l/o)];case 180:return[1-e,1-n,s,r];case 270:return[n,1-e,s*(o/l),r*(l/o)];default:return[e,n,s,r]}},ud=function(e){[this.x,this.y,this.width,this.height]=S(this,bt,JC).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},pc=function(){const{x:e,y:n,width:s,height:r,rotation:o,parentRotation:l,parentDimensions:[c,u]}=this;switch((o*4+l)/90){case 1:return[1-n-r,e,r,s];case 2:return[1-e-s,1-n-r,s,r];case 3:return[n,1-e-s,r,s];case 4:return[e,n-s*(c/u),r*(u/c),s*(c/u)];case 5:return[1-n,e,s*(c/u),r*(u/c)];case 6:return[1-e-r*(u/c),1-n,r*(u/c),s*(c/u)];case 7:return[n-s*(c/u),1-e-r*(u/c),s*(c/u),r*(u/c)];case 8:return[e-s,n-r,s,r];case 9:return[1-n,e-s,r,s];case 10:return[1-e,1-n,s,r];case 11:return[n-r,1-e,r,s];case 12:return[e-r*(u/c),n,r*(u/c),s*(c/u)];case 13:return[1-n-s*(c/u),e-r*(u/c),s*(c/u),r*(u/c)];case 14:return[1-e,1-n-s*(c/u),r*(u/c),s*(c/u)];case 15:return[n,1-e,s*(c/u),r*(u/c)];default:return[e,n,s,r]}},O(J,"_currentDrawId",-1),O(J,"_currentParent",null),A(J,Me,null),A(J,Ml,null),A(J,Dl,null),A(J,zo,NaN),A(J,Uo,null),A(J,Ho,null),A(J,Nl,NaN),O(J,"_INNER_MARGIN",3);let qm=J;var Fs,De,Ne,Il,ih,gn,Ge,Ti,Fl,Ol,Bl,sh,am;class c2{constructor(t,e,n,s,r,o){A(this,sh);A(this,Fs,new Float64Array(6));A(this,De);A(this,Ne);A(this,Il);A(this,ih);A(this,gn);A(this,Ge,"");A(this,Ti,0);A(this,Fl,new Gp);A(this,Ol);A(this,Bl);m(this,Ol,n),m(this,Bl,s),m(this,Il,r),m(this,ih,o),[t,e]=S(this,sh,am).call(this,t,e);const l=m(this,De,[NaN,NaN,NaN,NaN,t,e]);m(this,gn,[t,e]),m(this,Ne,[{line:l,points:a(this,gn)}]),a(this,Fs).set(l,0)}updateProperty(t,e){t==="stroke-width"&&m(this,ih,e)}isEmpty(){return!a(this,Ne)||a(this,Ne).length===0}isCancellable(){return a(this,gn).length<=10}add(t,e){[t,e]=S(this,sh,am).call(this,t,e);const[n,s,r,o]=a(this,Fs).subarray(2,6),l=t-r,c=e-o;return Math.hypot(a(this,Ol)*l,a(this,Bl)*c)<=2?null:(a(this,gn).push(t,e),isNaN(n)?(a(this,Fs).set([r,o,t,e],2),a(this,De).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(a(this,Fs)[0])&&a(this,De).splice(6,6),a(this,Fs).set([n,s,r,o,t,e],0),a(this,De).push(...Y.createBezierPoints(n,s,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(a(this,gn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,s,r){m(this,Ol,n),m(this,Bl,s),m(this,Il,r),[t,e]=S(this,sh,am).call(this,t,e);const o=m(this,De,[NaN,NaN,NaN,NaN,t,e]);m(this,gn,[t,e]);const l=a(this,Ne).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),a(this,Ne).push({line:o,points:a(this,gn)}),a(this,Fs).set(o,0),m(this,Ti,0),this.toSVGPath(),null}getLastElement(){return a(this,Ne).at(-1)}setLastElement(t){return a(this,Ne)?(a(this,Ne).push(t),m(this,De,t.line),m(this,gn,t.points),m(this,Ti,0),{path:{d:this.toSVGPath()}}):a(this,Fl).setLastElement(t)}removeLastElement(){if(!a(this,Ne))return a(this,Fl).removeLastElement();a(this,Ne).pop(),m(this,Ge,"");for(let t=0,e=a(this,Ne).length;t<e;t++){const{line:n,points:s}=a(this,Ne)[t];m(this,De,n),m(this,gn,s),m(this,Ti,0),this.toSVGPath()}return{path:{d:a(this,Ge)}}}toSVGPath(){const t=Y.svgRound(a(this,De)[4]),e=Y.svgRound(a(this,De)[5]);if(a(this,gn).length===2)return m(this,Ge,`${a(this,Ge)} M ${t} ${e} Z`),a(this,Ge);if(a(this,gn).length<=6){const s=a(this,Ge).lastIndexOf("M");m(this,Ge,`${a(this,Ge).slice(0,s)} M ${t} ${e}`),m(this,Ti,6)}if(a(this,gn).length===4){const s=Y.svgRound(a(this,De)[10]),r=Y.svgRound(a(this,De)[11]);return m(this,Ge,`${a(this,Ge)} L ${s} ${r}`),m(this,Ti,12),a(this,Ge)}const n=[];a(this,Ti)===0&&(n.push(`M ${t} ${e}`),m(this,Ti,6));for(let s=a(this,Ti),r=a(this,De).length;s<r;s+=6){const[o,l,c,u,h,d]=a(this,De).slice(s,s+6).map(Y.svgRound);n.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}return m(this,Ge,a(this,Ge)+n.join(" ")),m(this,Ti,a(this,De).length),a(this,Ge)}getOutlines(t,e,n,s){const r=a(this,Ne).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),a(this,Fl).build(a(this,Ne),t,e,n,a(this,Il),a(this,ih),s),m(this,Fs,null),m(this,De,null),m(this,Ne,null),m(this,Ge,null),a(this,Fl)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Fs=new WeakMap,De=new WeakMap,Ne=new WeakMap,Il=new WeakMap,ih=new WeakMap,gn=new WeakMap,Ge=new WeakMap,Ti=new WeakMap,Fl=new WeakMap,Ol=new WeakMap,Bl=new WeakMap,sh=new WeakSet,am=function(t,e){return Y._normalizePoint(t,e,a(this,Ol),a(this,Bl),a(this,Il))};var mn,Lp,Rp,ni,Os,Bs,rh,oh,jl,Ye,Qs,ZC,tT,eT;class Gp extends Y{constructor(){super(...arguments);A(this,Ye);A(this,mn);A(this,Lp,0);A(this,Rp);A(this,ni);A(this,Os);A(this,Bs);A(this,rh);A(this,oh);A(this,jl)}build(e,n,s,r,o,l,c){m(this,Os,n),m(this,Bs,s),m(this,rh,r),m(this,oh,o),m(this,jl,l),m(this,Rp,c??0),m(this,ni,e),S(this,Ye,tT).call(this)}get thickness(){return a(this,jl)}setLastElement(e){return a(this,ni).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,ni).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of a(this,ni)){if(e.push(`M${Y.svgRound(n[4])} ${Y.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${Y.svgRound(n[10])} ${Y.svgRound(n[11])}`);continue}for(let s=6,r=n.length;s<r;s+=6){const[o,l,c,u,h,d]=n.subarray(s,s+6).map(Y.svgRound);e.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}}return e.join("")}serialize([e,n,s,r],o){const l=[],c=[],[u,h,d,f]=S(this,Ye,ZC).call(this);let p,y,w,x,g,v,b,E,_;switch(a(this,oh)){case 0:_=Y._rescale,p=e,y=n+r,w=s,x=-r,g=e+u*s,v=n+(1-h-f)*r,b=e+(u+d)*s,E=n+(1-h)*r;break;case 90:_=Y._rescaleAndSwap,p=e,y=n,w=s,x=r,g=e+h*s,v=n+u*r,b=e+(h+f)*s,E=n+(u+d)*r;break;case 180:_=Y._rescale,p=e+s,y=n,w=-s,x=r,g=e+(1-u-d)*s,v=n+h*r,b=e+(1-u)*s,E=n+(h+f)*r;break;case 270:_=Y._rescaleAndSwap,p=e+s,y=n+r,w=-s,x=-r,g=e+(1-h-f)*s,v=n+(1-u-d)*r,b=e+(1-h)*s,E=n+(1-u)*r;break}for(const{line:C,points:T}of a(this,ni))l.push(_(C,p,y,w,x,o?new Array(C.length):null)),c.push(_(T,p,y,w,x,o?new Array(T.length):null));return{lines:l,points:c,rect:[g,v,b,E]}}static deserialize(e,n,s,r,o,{paths:{lines:l,points:c},rotation:u,thickness:h}){const d=[];let f,p,y,w,x;switch(u){case 0:x=Y._rescale,f=-e/s,p=n/r+1,y=1/s,w=-1/r;break;case 90:x=Y._rescaleAndSwap,f=-n/r,p=-e/s,y=1/r,w=1/s;break;case 180:x=Y._rescale,f=e/s+1,p=-n/r,y=-1/s,w=1/r;break;case 270:x=Y._rescaleAndSwap,f=n/r+1,p=e/s+1,y=-1/r,w=-1/s;break}if(!l){l=[];for(const v of c){const b=v.length;if(b===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1]]));continue}if(b===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1],NaN,NaN,NaN,NaN,v[2],v[3]]));continue}const E=new Float32Array(3*(b-2));l.push(E);let[_,C,T,k]=v.subarray(0,4);E.set([NaN,NaN,NaN,NaN,_,C],0);for(let P=4;P<b;P+=2){const L=v[P],M=v[P+1];E.set(Y.createBezierPoints(_,C,T,k,L,M),(P-2)*3),[_,C,T,k]=[T,k,L,M]}}}for(let v=0,b=l.length;v<b;v++)d.push({line:x(l[v].map(E=>E??NaN),f,p,y,w),points:x(c[v].map(E=>E??NaN),f,p,y,w)});const g=new this.prototype.constructor;return g.build(d,s,r,1,u,h,o),g}get box(){return a(this,mn)}updateProperty(e,n){return e==="stroke-width"?S(this,Ye,eT).call(this,n):null}updateParentDimensions([e,n],s){const[r,o]=S(this,Ye,Qs).call(this);m(this,Os,e),m(this,Bs,n),m(this,rh,s);const[l,c]=S(this,Ye,Qs).call(this),u=l-r,h=c-o,d=a(this,mn);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(e){return m(this,Lp,e),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,mn).map(Y.svgRound).join(" ")}get defaultProperties(){const[e,n]=a(this,mn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Y.svgRound(e)} ${Y.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=a(this,mn);let s=0,r=0,o=0,l=0,c=0,u=0;switch(a(this,Lp)){case 90:r=n/e,o=-e/n,c=e;break;case 180:s=-1,l=-1,c=e,u=n;break;case 270:r=-n/e,o=e/n,u=n;break;default:return""}return`matrix(${s} ${r} ${o} ${l} ${Y.svgRound(c)} ${Y.svgRound(u)})`}getPathResizingSVGProperties([e,n,s,r]){const[o,l]=S(this,Ye,Qs).call(this),[c,u,h,d]=a(this,mn);if(Math.abs(h-o)<=Y.PRECISION||Math.abs(d-l)<=Y.PRECISION){const x=e+s/2-(c+h/2),g=n+r/2-(u+d/2);return{path:{"transform-origin":`${Y.svgRound(e)} ${Y.svgRound(n)}`,transform:`${this.rotationTransform} translate(${x} ${g})`}}}const f=(s-2*o)/(h-2*o),p=(r-2*l)/(d-2*l),y=h/s,w=d/r;return{path:{"transform-origin":`${Y.svgRound(c)} ${Y.svgRound(u)}`,transform:`${this.rotationTransform} scale(${y} ${w}) translate(${Y.svgRound(o)} ${Y.svgRound(l)}) scale(${f} ${p}) translate(${Y.svgRound(-o)} ${Y.svgRound(-l)})`}}}getPathResizedSVGProperties([e,n,s,r]){const[o,l]=S(this,Ye,Qs).call(this),c=a(this,mn),[u,h,d,f]=c;if(c[0]=e,c[1]=n,c[2]=s,c[3]=r,Math.abs(d-o)<=Y.PRECISION||Math.abs(f-l)<=Y.PRECISION){const g=e+s/2-(u+d/2),v=n+r/2-(h+f/2);for(const{line:b,points:E}of a(this,ni))Y._translate(b,g,v,b),Y._translate(E,g,v,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Y.svgRound(e)} ${Y.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(s-2*o)/(d-2*o),y=(r-2*l)/(f-2*l),w=-p*(u+o)+e+o,x=-y*(h+l)+n+l;if(p!==1||y!==1||w!==0||x!==0)for(const{line:g,points:v}of a(this,ni))Y._rescale(g,w,x,p,y,g),Y._rescale(v,w,x,p,y,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Y.svgRound(e)} ${Y.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],s){const[r,o]=s,l=a(this,mn),c=e-l[0],u=n-l[1];if(a(this,Os)===r&&a(this,Bs)===o)for(const{line:h,points:d}of a(this,ni))Y._translate(h,c,u,h),Y._translate(d,c,u,d);else{const h=a(this,Os)/r,d=a(this,Bs)/o;m(this,Os,r),m(this,Bs,o);for(const{line:f,points:p}of a(this,ni))Y._rescale(f,c,u,h,d,f),Y._rescale(p,c,u,h,d,p);l[2]*=h,l[3]*=d}return l[0]=e,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Y.svgRound(e)} ${Y.svgRound(n)}`}}}get defaultSVGProperties(){const e=a(this,mn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Y.svgRound(e[0])} ${Y.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}mn=new WeakMap,Lp=new WeakMap,Rp=new WeakMap,ni=new WeakMap,Os=new WeakMap,Bs=new WeakMap,rh=new WeakMap,oh=new WeakMap,jl=new WeakMap,Ye=new WeakSet,Qs=function(e=a(this,jl)){const n=a(this,Rp)+e/2*a(this,rh);return a(this,oh)%180===0?[n/a(this,Os),n/a(this,Bs)]:[n/a(this,Bs),n/a(this,Os)]},ZC=function(){const[e,n,s,r]=a(this,mn),[o,l]=S(this,Ye,Qs).call(this,0);return[e+o,n+l,s-2*o,r-2*l]},tT=function(){const e=m(this,mn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of a(this,ni)){if(r.length<=12){for(let c=4,u=r.length;c<u;c+=6)q.pointBoundingBox(r[c],r[c+1],e);continue}let o=r[4],l=r[5];for(let c=6,u=r.length;c<u;c+=6){const[h,d,f,p,y,w]=r.subarray(c,c+6);q.bezierBoundingBox(o,l,h,d,f,p,y,w,e),o=y,l=w}}const[n,s]=S(this,Ye,Qs).call(this);e[0]=ln(e[0]-n,0,1),e[1]=ln(e[1]-s,0,1),e[2]=ln(e[2]+n,0,1),e[3]=ln(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]},eT=function(e){const[n,s]=S(this,Ye,Qs).call(this);m(this,jl,e);const[r,o]=S(this,Ye,Qs).call(this),[l,c]=[r-n,o-s],u=a(this,mn);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u};class zy extends QC{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Vt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new zy(this._viewParameters);return t.updateAll(this),t}}var gy,nT;const Rc=class Rc extends qm{constructor(e){super({...e,name:"inkEditor"});A(this,gy);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){Vt.initialize(e,n),this._defaultDrawingOptions=new zy(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return dt(this,"typesMap",new Map([[vt.INK_THICKNESS,"stroke-width"],[vt.INK_COLOR,"stroke"],[vt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,s,r,o){return new c2(e,n,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,s,r,o,l){return Gp.deserialize(e,n,s,r,o,l)}static async deserialize(e,n,s){let r=null;if(e instanceof uA){const{data:{inkLists:l,rect:c,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:y,richText:w,contentsObj:x,creationDate:g,modificationDate:v},parent:{page:{pageNumber:b}}}=e;r=e={annotationType:at.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:l},boxes:null,pageIndex:b-1,rect:c.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:y,richText:w,comment:(x==null?void 0:x.str)||null,creationDate:g,modificationDate:v}}const o=await super.deserialize(e,n,s);return o._initialData=r,e.comment&&o.setCommentData(e),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Wm(this)),[["colorPicker",this._colorPicker]]}get colorType(){return vt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:s}){this._drawingOptions=Rc.getDefaultDrawingOptions({stroke:q.makeHexColor(...e),"stroke-width":n,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":l}}=this,c=Object.assign(super.serialize(e),{color:Vt._colorManager.convert(r),opacity:o,thickness:l,paths:{lines:n,points:s}});return this.addComment(c),e?(c.isCopy=!0,c):this.annotationElementId&&!S(this,gy,nT).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};gy=new WeakSet,nT=function(e){const{color:n,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==n[c])||e.thickness!==s||e.opacity!==r||e.pageIndex!==o},O(Rc,"_type","ink"),O(Rc,"_editorType",at.INK),O(Rc,"_defaultDrawingOptions",null);let Fw=Rc;class Ow extends Gp{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const xg=8,zh=3;var zl,Et,Bw,Qi,iT,sT,jw,lm,rT,oT,aT,zw,Uw,lT;class Vs{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:s},r,o,l,c){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const d=200,f=h.font=`${n} ${s} ${d}px ${e}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:y,actualBoundingBoxAscent:w,actualBoundingBoxDescent:x,fontBoundingBoxAscent:g,fontBoundingBoxDescent:v,width:b}=h.measureText(t),E=1.5,_=Math.ceil(Math.max(Math.abs(p)+Math.abs(y)||0,b)*E),C=Math.ceil(Math.max(Math.abs(w)+Math.abs(x)||d,Math.abs(g)+Math.abs(v)||d)*E);u=new OffscreenCanvas(_,C),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=f,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,_,C),h.fillStyle="black",h.fillText(t,_*(E-1)/2,C*(3-E)/2);const T=S(this,Et,zw).call(this,h.getImageData(0,0,_,C).data),k=S(this,Et,aT).call(this,T),P=S(this,Et,Uw).call(this,k),L=S(this,Et,jw).call(this,T,_,C,P);return this.processDrawnLines({lines:{curves:L,width:_,height:C},pageWidth:r,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,n,s,r){const[o,l,c]=S(this,Et,lT).call(this,t),[u,h]=S(this,Et,oT).call(this,o,l,c,Math.hypot(l,c)*a(this,zl).sigmaSFactor,a(this,zl).sigmaR,a(this,zl).kernelSize),d=S(this,Et,Uw).call(this,h),f=S(this,Et,jw).call(this,u,l,c,d);return this.processDrawnLines({lines:{curves:f,width:l,height:c},pageWidth:e,pageHeight:n,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:s,innerMargin:r,mustSmooth:o,areContours:l}){s%180!==0&&([e,n]=[n,e]);const{curves:c,width:u,height:h}=t,d=t.thickness??0,f=[],p=Math.min(e/u,n/h),y=p/e,w=p/n,x=[];for(const{points:v}of c){const b=o?S(this,Et,rT).call(this,v):v;if(!b)continue;x.push(b);const E=b.length,_=new Float32Array(E),C=new Float32Array(3*(E===2?2:E-2));if(f.push({line:C,points:_}),E===2){_[0]=b[0]*y,_[1]=b[1]*w,C.set([NaN,NaN,NaN,NaN,_[0],_[1]],0);continue}let[T,k,P,L]=b;T*=y,k*=w,P*=y,L*=w,_.set([T,k,P,L],0),C.set([NaN,NaN,NaN,NaN,T,k],0);for(let M=4;M<E;M+=2){const I=_[M]=b[M]*y,$=_[M+1]=b[M+1]*w;C.set(Y.createBezierPoints(T,k,P,L,I,$),(M-2)*3),[T,k,P,L]=[P,L,I,$]}}if(f.length===0)return null;const g=l?new Ow:new Gp;return g.build(f,e,n,1,s,l?0:d,r),{outline:g,newCurves:x,areContours:l,thickness:d,width:u,height:h}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:s,height:r}){let o=1/0,l=-1/0,c=0;for(const b of t){c+=b.length;for(let E=2,_=b.length;E<_;E++){const C=b[E]-b[E-2];o=Math.min(o,C),l=Math.max(l,C)}}let u;o>=-128&&l<=127?u=Int8Array:o>=-32768&&l<=32767?u=Int16Array:u=Int32Array;const h=t.length,d=xg+zh*h,f=new Uint32Array(d);let p=0;f[p++]=d*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*u.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=s,f[p++]=r,f[p++]=e?0:1,f[p++]=Math.max(0,Math.floor(n??0)),f[p++]=h,f[p++]=u.BYTES_PER_ELEMENT;for(const b of t)f[p++]=b.length-2,f[p++]=b[0],f[p++]=b[1];const y=new CompressionStream("deflate-raw"),w=y.writable.getWriter();await w.ready,w.write(f);const x=u.prototype.constructor;for(const b of t){const E=new x(b.length-2);for(let _=2,C=b.length;_<C;_++)E[_-2]=b[_]-b[_-2];w.write(E)}w.close();const g=await new Response(y.readable).arrayBuffer(),v=new Uint8Array(g);return s_(v)}static async decompressSignature(t){try{const e=NR(t),{readable:n,writable:s}=new DecompressionStream("deflate-raw"),r=s.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,l=0;for await(const b of n)o||(o=new Uint8Array(new Uint32Array(b.buffer,0,4)[0])),o.set(b,l),l+=b.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=c[2],d=c[3],f=c[4]===0,p=c[5],y=c[6],w=c[7],x=[],g=(xg+zh*y)*Uint32Array.BYTES_PER_ELEMENT;let v;switch(w){case Int8Array.BYTES_PER_ELEMENT:v=new Int8Array(o.buffer,g);break;case Int16Array.BYTES_PER_ELEMENT:v=new Int16Array(o.buffer,g);break;case Int32Array.BYTES_PER_ELEMENT:v=new Int32Array(o.buffer,g);break}l=0;for(let b=0;b<y;b++){const E=c[zh*b+xg],_=new Float32Array(E+2);x.push(_);for(let C=0;C<zh-1;C++)_[C]=c[zh*b+xg+C+1];for(let C=0;C<E;C++)_[C+2]=_[C]+v[l++]}return{areContours:f,thickness:p,outlines:x,width:h,height:d}}catch(e){return lt(`decompressSignature: ${e}`),null}}}zl=new WeakMap,Et=new WeakSet,Bw=function(t,e,n,s){return n-=t,s-=e,n===0?s>0?0:4:n===1?s+6:2-s},Qi=new WeakMap,iT=function(t,e,n,s,r,o,l){const c=S(this,Et,Bw).call(this,n,s,r,o);for(let u=0;u<8;u++){const h=(-u+c-l+16)%8,d=a(this,Qi)[2*h],f=a(this,Qi)[2*h+1];if(t[(n+d)*e+(s+f)]!==0)return h}return-1},sT=function(t,e,n,s,r,o,l){const c=S(this,Et,Bw).call(this,n,s,r,o);for(let u=0;u<8;u++){const h=(u+c+l+16)%8,d=a(this,Qi)[2*h],f=a(this,Qi)[2*h+1];if(t[(n+d)*e+(s+f)]!==0)return h}return-1},jw=function(t,e,n,s){const r=t.length,o=new Int32Array(r);for(let h=0;h<r;h++)o[h]=t[h]<=s?1:0;for(let h=1;h<n-1;h++)o[h*e]=o[h*e+e-1]=0;for(let h=0;h<e;h++)o[h]=o[e*n-1-h]=0;let l=1,c;const u=[];for(let h=1;h<n-1;h++){c=1;for(let d=1;d<e-1;d++){const f=h*e+d,p=o[f];if(p===0)continue;let y=h,w=d;if(p===1&&o[f-1]===0)l+=1,w-=1;else if(p>=1&&o[f+1]===0)l+=1,w+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const x=[d,h],g=w===d+1,v={isHole:g,points:x,id:l,parent:0};u.push(v);let b;for(const M of u)if(M.id===c){b=M;break}b?b.isHole?v.parent=g?b.parent:c:v.parent=g?c:b.parent:v.parent=g?c:0;const E=S(this,Et,iT).call(this,o,e,h,d,y,w,0);if(E===-1){o[f]=-l,o[f]!==1&&(c=Math.abs(o[f]));continue}let _=a(this,Qi)[2*E],C=a(this,Qi)[2*E+1];const T=h+_,k=d+C;y=T,w=k;let P=h,L=d;for(;;){const M=S(this,Et,sT).call(this,o,e,P,L,y,w,1);_=a(this,Qi)[2*M],C=a(this,Qi)[2*M+1];const I=P+_,$=L+C;x.push($,I);const N=P*e+L;if(o[N+1]===0?o[N]=-l:o[N]===1&&(o[N]=l),I===h&&$===d&&P===T&&L===k){o[f]!==1&&(c=Math.abs(o[f]));break}else y=P,w=L,P=I,L=$}}}return u},lm=function(t,e,n,s){if(n-e<=4){for(let T=e;T<n-2;T+=2)s.push(t[T],t[T+1]);return}const r=t[e],o=t[e+1],l=t[n-4]-r,c=t[n-3]-o,u=Math.hypot(l,c),h=l/u,d=c/u,f=h*o-d*r,p=c/l,y=1/u,w=Math.atan(p),x=Math.cos(w),g=Math.sin(w),v=y*(Math.abs(x)+Math.abs(g)),b=y*(1-v+v**2),E=Math.max(Math.atan(Math.abs(g+x)*b),Math.atan(Math.abs(g-x)*b));let _=0,C=e;for(let T=e+2;T<n-2;T+=2){const k=Math.abs(f-h*t[T+1]+d*t[T]);k>_&&(C=T,_=k)}_>(u*E)**2?(S(this,Et,lm).call(this,t,e,C+2,s),S(this,Et,lm).call(this,t,C,n,s)):s.push(r,o)},rT=function(t){const e=[],n=t.length;return S(this,Et,lm).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},oT=function(t,e,n,s,r,o){const l=new Float32Array(o**2),c=-2*s**2,u=o>>1;for(let w=0;w<o;w++){const x=(w-u)**2;for(let g=0;g<o;g++)l[w*o+g]=Math.exp((x+(g-u)**2)/c)}const h=new Float32Array(256),d=-2*r**2;for(let w=0;w<256;w++)h[w]=Math.exp(w**2/d);const f=t.length,p=new Uint8Array(f),y=new Uint32Array(256);for(let w=0;w<n;w++)for(let x=0;x<e;x++){const g=w*e+x,v=t[g];let b=0,E=0;for(let C=0;C<o;C++){const T=w+C-u;if(!(T<0||T>=n))for(let k=0;k<o;k++){const P=x+k-u;if(P<0||P>=e)continue;const L=t[T*e+P],M=l[C*o+k]*h[Math.abs(L-v)];b+=L*M,E+=M}}const _=p[g]=Math.round(b/E);y[_]++}return[p,y]},aT=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},zw=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let s=-1/0,r=1/0;for(let l=0,c=n.length;l<c;l++){const u=n[l]=t[l<<2];s=Math.max(s,u),r=Math.min(r,u)}const o=255/(s-r);for(let l=0,c=n.length;l<c;l++)n[l]=(n[l]-r)*o;return n},Uw=function(t){let e,n=-1/0,s=-1/0;const r=t.findIndex(c=>c!==0);let o=r,l=r;for(e=r;e<256;e++){const c=t[e];c>n&&(e-o>s&&(s=e-o,l=e-1),n=c,o=e)}for(e=l-1;e>=0&&!(t[e]>t[e+1]);e--);return e},lT=function(t){const e=t,{width:n,height:s}=t,{maxDim:r}=a(this,zl);let o=n,l=s;if(n>r||s>r){let f=n,p=s,y=Math.log2(Math.max(n,s)/r);const w=Math.floor(y);y=y===w?w-1:w;for(let g=0;g<y;g++){o=Math.ceil(f/2),l=Math.ceil(p/2);const v=new OffscreenCanvas(o,l);v.getContext("2d").drawImage(t,0,0,f,p,0,0,o,l),f=o,p=l,t!==e&&t.close(),t=v.transferToImageBitmap()}const x=Math.min(r/o,r/l);o=Math.round(o*x),l=Math.round(l*x)}const u=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,l),u.filter="grayscale(1)",u.drawImage(t,0,0,t.width,t.height,0,0,o,l);const h=u.getImageData(0,0,o,l).data;return[S(this,Et,zw).call(this,h),o,l]},A(Vs,Et),A(Vs,zl,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),A(Vs,Qi,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class dA extends QC{constructor(){super(),super.updateProperties({fill:Vt._defaultLineColor,"stroke-width":0})}clone(){const t=new dA;return t.updateAll(this),t}}class fA extends zy{constructor(t){super(t),super.updateProperties({stroke:Vt._defaultLineColor,"stroke-width":1})}clone(){const t=new fA(this._viewParameters);return t.updateAll(this),t}}var $o,js,Vo,Ul;const zn=class zn extends qm{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});A(this,$o,!1);A(this,js,null);A(this,Vo,null);A(this,Ul,null);this._willKeepAspectRatio=!0,m(this,Vo,e.signatureData||null),m(this,js,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){Vt.initialize(e,n),this._defaultDrawingOptions=new dA,this._defaultDrawnSignatureOptions=new fA(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return dt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!a(this,js)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(a(this,Vo)){const{lines:r,mustSmooth:o,areContours:l,description:c,uuid:u,heightInPage:h}=a(this,Vo),{rawDims:{pageWidth:d,pageHeight:f},rotation:p}=this.parent.viewport,y=Vs.processDrawnLines({lines:r,pageWidth:d,pageHeight:f,rotation:p,innerMargin:zn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(y,h,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:a(this,js)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){m(this,Ul,e),this.addEditToolbar()}getUuid(){return a(this,Ul)}get description(){return a(this,js)}set description(e){m(this,js,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:s,width:r,height:o}=a(this,Vo),l=Math.max(r,o),c=Vs.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:s,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,s,r){const{x:o,y:l}=this,{outline:c}=m(this,Vo,e);m(this,$o,c instanceof Ow),this.description=s;let u;a(this,$o)?u=zn.getDefaultDrawingOptions():(u=zn._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,h]=this.pageDimensions;let d=n/h;d=d>=1?.5:d,this.width*=d/this.height,this.width>=1&&(d*=.9/this.width,this.width=.9),this.height=d,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return Vs.process(e,n,s,r,zn._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return Vs.extractContoursFromText(e,n,s,r,o,zn._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return Vs.processDrawnLines({lines:e,pageWidth:n,pageHeight:s,rotation:r,innerMargin:zn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=zn.getDefaultDrawingOptions():(this._drawingOptions=zn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(e),{isSignature:!0,areContours:a(this,$o),color:[0,0,0],thickness:a(this,$o)?0:r});return this.addComment(o),e?(o.paths={lines:n,points:s},o.uuid=a(this,Ul),o.isCopy=!0):o.lines=n,a(this,js)&&(o.accessibilityData={type:"Figure",alt:a(this,js)}),o}static deserializeDraw(e,n,s,r,o,l){return l.areContours?Ow.deserialize(e,n,s,r,o,l):Gp.deserialize(e,n,s,r,o,l)}static async deserialize(e,n,s){var o;const r=await super.deserialize(e,n,s);return m(r,$o,e.areContours),r.description=((o=e.accessibilityData)==null?void 0:o.alt)||"",m(r,Ul,e.uuid),r}};$o=new WeakMap,js=new WeakMap,Vo=new WeakMap,Ul=new WeakMap,O(zn,"_type","signature"),O(zn,"_editorType",at.SIGNATURE),O(zn,"_defaultDrawingOptions",null);let Hw=zn;var Jt,Ie,Go,Rr,Wo,ah,Mr,Hl,zs,ii,lh,St,hd,dd,cm,um,hm,Vw,dm,cT;class $w extends Vt{constructor(e){super({...e,name:"stampEditor"});A(this,St);A(this,Jt,null);A(this,Ie,null);A(this,Go,null);A(this,Rr,null);A(this,Wo,null);A(this,ah,"");A(this,Mr,null);A(this,Hl,!1);A(this,zs,null);A(this,ii,!1);A(this,lh,!1);m(this,Rr,e.bitmapUrl),m(this,Wo,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){Vt.initialize(e,n)}static isHandlingMimeForPasting(e){return Um.includes(e)}static paste(e,n){n.pasteEditor({mode:at.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),n&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var e;a(this,Ie)&&(m(this,Jt,null),this._uiManager.imageManager.deleteId(a(this,Ie)),(e=a(this,Mr))==null||e.remove(),m(this,Mr,null),a(this,zs)&&(clearTimeout(a(this,zs)),m(this,zs,null))),super.remove()}rebuild(){if(!this.parent){a(this,Ie)&&S(this,St,cm).call(this);return}super.rebuild(),this.div!==null&&(a(this,Ie)&&a(this,Mr)===null&&S(this,St,cm).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(a(this,Go)||a(this,Jt)||a(this,Rr)||a(this,Wo)||a(this,Ie)||a(this,Hl))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),a(this,Hl)||(a(this,Jt)?S(this,St,um).call(this):S(this,St,cm).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(m(this,Ie,s),r&&m(this,Jt,r),m(this,Hl,!1),S(this,St,um).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,zs)!==null&&clearTimeout(a(this,zs)),m(this,zs,setTimeout(()=>{m(this,zs,null),S(this,St,Vw).call(this)},200))}copyCanvas(e,n,s=!1){e||(e=224);const{width:r,height:o}=a(this,Jt),l=new ls;let c=a(this,Jt),u=r,h=o,d=null;if(n){if(r>n||o>n){const T=Math.min(n/r,n/o);u=Math.floor(r*T),h=Math.floor(o*T)}d=document.createElement("canvas");const p=d.width=Math.ceil(u*l.sx),y=d.height=Math.ceil(h*l.sy);a(this,ii)||(c=S(this,St,hm).call(this,p,y));const w=d.getContext("2d");w.filter=this._uiManager.hcmFilter;let x="white",g="#cfcfd8";this._uiManager.hcmFilter!=="none"?g="black":OR.isDarkMode&&(x="#8f8f9d",g="#42414d");const v=15,b=v*l.sx,E=v*l.sy,_=new OffscreenCanvas(b*2,E*2),C=_.getContext("2d");C.fillStyle=x,C.fillRect(0,0,b*2,E*2),C.fillStyle=g,C.fillRect(0,0,b,E),C.fillRect(b,E,b,E),w.fillStyle=w.createPattern(_,"repeat"),w.fillRect(0,0,p,y),w.drawImage(c,0,0,c.width,c.height,0,0,p,y)}let f=null;if(s){let p,y;if(l.symmetric&&c.width<e&&c.height<e)p=c.width,y=c.height;else if(c=a(this,Jt),r>e||o>e){const g=Math.min(e/r,e/o);p=Math.floor(r*g),y=Math.floor(o*g),a(this,ii)||(c=S(this,St,hm).call(this,p,y))}const x=new OffscreenCanvas(p,y).getContext("2d",{willReadFrequently:!0});x.drawImage(c,0,0,c.width,c.height,0,0,p,y),f={width:p,height:y,data:x.getImageData(0,0,p,y).data}}return{canvas:d,width:u,height:h,imageData:f}}static async deserialize(e,n,s){var x;let r=null,o=!1;if(e instanceof _C){const{data:{rect:g,rotation:v,id:b,structParent:E,popupRef:_,richText:C,contentsObj:T,creationDate:k,modificationDate:P},container:L,parent:{page:{pageNumber:M}},canvas:I}=e;let $,N;I?(delete e.canvas,{id:$,bitmap:N}=s.imageManager.getFromCanvas(L.id,I),I.remove()):(o=!0,e._hasNoCanvas=!0);const W=((x=await n._structTree.getAriaAttributes(`${eA}${b}`))==null?void 0:x.get("aria-label"))||"";r=e={annotationType:at.STAMP,bitmapId:$,bitmap:N,pageIndex:M-1,rect:g.slice(0),rotation:v,annotationElementId:b,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:W},isSvg:!1,structParent:E,popupRef:_,richText:C,comment:(T==null?void 0:T.str)||null,creationDate:k,modificationDate:P}}const l=await super.deserialize(e,n,s),{rect:c,bitmap:u,bitmapUrl:h,bitmapId:d,isSvg:f,accessibilityData:p}=e;o?(s.addMissingCanvas(e.id,l),m(l,Hl,!0)):d&&s.imageManager.isValidId(d)?(m(l,Ie,d),u&&m(l,Jt,u)):m(l,Rr,h),m(l,ii,f);const[y,w]=l.pageDimensions;return l.width=(c[2]-c[0])/y,l.height=(c[3]-c[1])/w,p&&(l.altTextData=p),l._initialData=r,e.comment&&l.setCommentData(e),m(l,lh,!!r),l}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(e),{bitmapId:a(this,Ie),isSvg:a(this,ii)});if(this.addComment(s),e)return s.bitmapUrl=S(this,St,dm).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=S(this,St,cT).call(this,s);return c.isSame?null:(c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(n===null)return s;n.stamps||(n.stamps=new Map);const l=a(this,ii)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(a(this,Ie)))n.stamps.set(a(this,Ie),{area:l,serialized:s}),s.bitmap=S(this,St,dm).call(this,!1);else if(a(this,ii)){const c=n.stamps.get(a(this,Ie));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=S(this,St,dm).call(this,!1))}return s}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Jt=new WeakMap,Ie=new WeakMap,Go=new WeakMap,Rr=new WeakMap,Wo=new WeakMap,ah=new WeakMap,Mr=new WeakMap,Hl=new WeakMap,zs=new WeakMap,ii=new WeakMap,lh=new WeakMap,St=new WeakSet,hd=function(e,n=!1){if(!e){this.remove();return}m(this,Jt,e.bitmap),n||(m(this,Ie,e.id),m(this,ii,e.isSvg)),e.file&&m(this,ah,e.file.name),S(this,St,um).call(this)},dd=function(){if(m(this,Go,null),this._uiManager.enableWaiting(!1),!!a(this,Mr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Jt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Jt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},cm=function(){if(a(this,Ie)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,Ie)).then(s=>S(this,St,hd).call(this,s,!0)).finally(()=>S(this,St,dd).call(this));return}if(a(this,Rr)){const s=a(this,Rr);m(this,Rr,null),this._uiManager.enableWaiting(!0),m(this,Go,this._uiManager.imageManager.getFromUrl(s).then(r=>S(this,St,hd).call(this,r)).finally(()=>S(this,St,dd).call(this)));return}if(a(this,Wo)){const s=a(this,Wo);m(this,Wo,null),this._uiManager.enableWaiting(!0),m(this,Go,this._uiManager.imageManager.getFromFile(s).then(r=>S(this,St,hd).call(this,r)).finally(()=>S(this,St,dd).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Um.join(",");const n=this._uiManager._signal;m(this,Go,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),S(this,St,hd).call(this,r)}s()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>S(this,St,dd).call(this))),e.click()},um=function(){var u;const{div:e}=this;let{width:n,height:s}=a(this,Jt);const[r,o]=this.pageDimensions,l=.75;if(this.width)n=this.width*r,s=this.height*o;else if(n>l*r||s>l*o){const h=Math.min(l*r/n,l*o/s);n*=h,s*=h}this._uiManager.enableWaiting(!1);const c=m(this,Mr,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=n/r,this.height=s/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),S(this,St,Vw).call(this),a(this,lh)||(this.parent.addUndoableEditor(this),m(this,lh,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,ah)&&this.div.setAttribute("aria-description",a(this,ah)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},hm=function(e,n){const{width:s,height:r}=a(this,Jt);let o=s,l=r,c=a(this,Jt);for(;o>2*e||l>2*n;){const u=o,h=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const d=new OffscreenCanvas(o,l);d.getContext("2d").drawImage(c,0,0,u,h,0,0,o,l),c=d.transferToImageBitmap()}return c},Vw=function(){const[e,n]=this.parentDimensions,{width:s,height:r}=this,o=new ls,l=Math.ceil(s*e*o.sx),c=Math.ceil(r*n*o.sy),u=a(this,Mr);if(!u||u.width===l&&u.height===c)return;u.width=l,u.height=c;const h=a(this,ii)?a(this,Jt):S(this,St,hm).call(this,l,c),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,l,c)},dm=function(e){if(e){if(a(this,ii)){const r=this._uiManager.imageManager.getSvgUrl(a(this,Ie));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=a(this,Jt),n.getContext("2d").drawImage(a(this,Jt),0,0),n.toDataURL()}if(a(this,ii)){const[n,s]=this.pageDimensions,r=Math.round(this.width*n*Wr.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*Wr.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(a(this,Jt),0,0,a(this,Jt).width,a(this,Jt).height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(a(this,Jt))},cT=function(e){var l;const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,r=e.pageIndex===n,o=(((l=e.accessibilityData)==null?void 0:l.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},O($w,"_type","stamp"),O($w,"_editorType",at.STAMP);var $l,ch,Xo,Yo,Dr,Dn,qo,uh,hh,Ji,Nr,Fe,Ir,Ko,dh,et,Qo,jt,Gw,uT,ms,Ww,Xw,fm;const zi=class zi{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:l,textLayer:c,viewport:u,l10n:h}){A(this,jt);A(this,$l);A(this,ch,!1);A(this,Xo,null);A(this,Yo,null);A(this,Dr,null);A(this,Dn,new Map);A(this,qo,!1);A(this,uh,!1);A(this,hh,!1);A(this,Ji,null);A(this,Nr,null);A(this,Fe,null);A(this,Ir,null);A(this,Ko,null);A(this,dh,-1);A(this,et);const d=[...a(zi,Qo).values()];if(!zi._initialized){zi._initialized=!0;for(const f of d)f.initialize(h,t)}t.registerEditorTypes(d),m(this,et,t),this.pageIndex=e,this.div=n,m(this,$l,r),m(this,Xo,o),this.viewport=u,m(this,Fe,c),this.drawLayer=l,this._structTree=s,a(this,et).addLayer(this)}get isEmpty(){return a(this,Dn).size===0}get isInvisible(){return this.isEmpty&&a(this,et).getMode()===at.NONE}updateToolbar(t){a(this,et).updateToolbar(t)}updateMode(t=a(this,et).getMode()){switch(S(this,jt,fm).call(this),t){case at.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case at.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case at.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===at.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of a(zi,Qo).values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,Fe))==null?void 0:e.div)}setEditingState(t){a(this,et).setEditingState(t)}addCommands(t){a(this,et).addCommands(t)}cleanUndoStack(t){a(this,et).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,Xo))==null||e.div.classList.toggle("disabled",!t)}async enable(){var n;m(this,hh,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=a(this,Ko))==null||n.abort(),m(this,Ko,null);const t=new Set;for(const s of a(this,jt,Gw))s.enableEditing(),s.show(!0),s.annotationElementId&&(a(this,et).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const e=a(this,Xo);if(e)for(const s of e.getEditableAnnotations()){if(s.hide(),a(this,et).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}m(this,hh,!1),a(this,et)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var n;if(m(this,uh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),a(this,Fe)&&!a(this,Ko)){m(this,Ko,new AbortController);const s=a(this,et).combinedSignal(a(this,Ko));a(this,Fe).div.addEventListener("pointerdown",r=>{const{clientX:l,clientY:c,timeStamp:u}=r,h=a(this,dh);if(u-h>500){m(this,dh,u);return}m(this,dh,-1);const{classList:d}=this.div;d.toggle("getElements",!0);const f=document.elementsFromPoint(l,c);if(d.toggle("getElements",!1),!this.div.contains(f[0]))return;let p;const y=new RegExp(`^${Vd}[0-9]+$`);for(const x of f)if(y.test(x.id)){p=x.id;break}if(!p)return;const w=a(this,Dn).get(p);(w==null?void 0:w.annotationElementId)===null&&(r.stopPropagation(),r.preventDefault(),w.dblclick(r))},{signal:s,capture:!0})}const t=a(this,Xo);if(t){const s=new Map,r=new Map;for(const l of a(this,jt,Gw)){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(t);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else r.set(l.annotationElementId,l);(n=this.getEditableAnnotation(l.annotationElementId))==null||n.show(),l.remove()}const o=t.getEditableAnnotations();for(const l of o){const{id:c}=l.data;if(a(this,et).isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let u=r.get(c);if(u){u.resetAnnotationElement(l),u.show(!1),l.show();continue}u=s.get(c),u&&(a(this,et).addChangedExistingAnnotation(u),u.renderAnnotationElement(l)&&u.show(!1)),l.show()}}S(this,jt,fm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const s of a(zi,Qo).values())e.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),m(this,uh,!1)}getEditableAnnotation(t){var e;return((e=a(this,Xo))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,et).getActive()!==t&&a(this,et).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,Fe))!=null&&t.div&&!a(this,Ir)){m(this,Ir,new AbortController);const e=a(this,et).combinedSignal(a(this,Ir));a(this,Fe).div.addEventListener("pointerdown",S(this,jt,uT).bind(this),{signal:e}),a(this,Fe).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,Fe))!=null&&t.div&&a(this,Ir)&&(a(this,Ir).abort(),m(this,Ir,null),a(this,Fe).div.classList.remove("highlighting"))}enableClick(){if(a(this,Yo))return;m(this,Yo,new AbortController);const t=a(this,et).combinedSignal(a(this,Yo));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=a(this,Yo))==null||t.abort(),m(this,Yo,null)}attach(t){a(this,Dn).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,et).isDeletedAnnotationElement(e)&&a(this,et).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,Dn).delete(t.id),(e=a(this,$l))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,uh)&&t.annotationElementId&&a(this,et).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,et).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,et).addDeletedAnnotationElement(t.annotationElementId),Vt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,et).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!a(this,hh)),a(this,et).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,Dr)&&(t._focusEventsAllowed=!1,m(this,Dr,setTimeout(()=>{m(this,Dr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,et)._signal}),e.focus())},0))),t._structTreeParentId=(n=a(this,$l))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of a(this,Dn).values())if(e.uid===t)return e;return null}getNextId(){return a(this,et).getId()}combinedSignal(t){return a(this,et).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,jt,ms))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await a(this,et).updateMode(t.mode);const{offsetX:n,offsetY:s}=S(this,jt,Xw).call(this),r=this.getNextId(),o=S(this,jt,Ww).call(this,{parent:this,id:r,x:n,y:s,uiManager:a(this,et),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=a(zi,Qo).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,a(this,et)))||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),r=S(this,jt,Ww).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:a(this,et),isCentered:e,...n});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(S(this,jt,Xw).call(this),!0,t)}setSelected(t){a(this,et).setSelected(t)}toggleSelected(t){a(this,et).toggleSelected(t)}unselect(t){a(this,et).unselect(t)}pointerup(t){var s;const{isMac:e}=je.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!a(this,qo)||(m(this,qo,!1),(s=a(this,jt,ms))!=null&&s.isDrawer&&a(this,jt,ms).supportMultipleDrawings))return;if(!a(this,ch)){m(this,ch,!0);return}const n=a(this,et).getMode();if(n===at.STAMP||n===at.SIGNATURE){a(this,et).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var s;if(a(this,et).getMode()===at.HIGHLIGHT&&this.enableTextSelection(),a(this,qo)){m(this,qo,!1);return}const{isMac:e}=je.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(m(this,qo,!0),(s=a(this,jt,ms))!=null&&s.isDrawer){this.startDrawingSession(t);return}const n=a(this,et).getActive();m(this,ch,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),a(this,Ji)){a(this,jt,ms).startDrawing(this,a(this,et),!1,t);return}a(this,et).setCurrentDrawingSession(this),m(this,Ji,new AbortController);const e=a(this,et).combinedSignal(a(this,Ji));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(m(this,Nr,null),this.commitOrRemove())},{signal:e}),a(this,jt,ms).startDrawing(this,a(this,et),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&m(this,Nr,e);return}a(this,Nr)&&setTimeout(()=>{var e;(e=a(this,Nr))==null||e.focus(),m(this,Nr,null)},0)}endDrawingSession(t=!1){return a(this,Ji)?(a(this,et).setCurrentDrawingSession(null),a(this,Ji).abort(),m(this,Ji,null),m(this,Nr,null),a(this,jt,ms).endDrawing(t)):null}findNewParent(t,e,n){const s=a(this,et).findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return a(this,Ji)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,Ji)&&a(this,jt,ms).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=a(this,et).getActive())==null?void 0:t.parent)===this&&(a(this,et).commitOrRemove(),a(this,et).setActiveEditor(null)),a(this,Dr)&&(clearTimeout(a(this,Dr)),m(this,Dr,null));for(const n of a(this,Dn).values())(e=a(this,$l))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,a(this,Dn).clear(),a(this,et).removeLayer(this)}render({viewport:t}){this.viewport=t,ha(this.div,t);for(const e of a(this,et).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,et).commitOrRemove(),S(this,jt,fm).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,ha(this.div,{rotation:n}),e!==n)for(const s of a(this,Dn).values())s.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,et).viewParameters.realScale}};$l=new WeakMap,ch=new WeakMap,Xo=new WeakMap,Yo=new WeakMap,Dr=new WeakMap,Dn=new WeakMap,qo=new WeakMap,uh=new WeakMap,hh=new WeakMap,Ji=new WeakMap,Nr=new WeakMap,Fe=new WeakMap,Ir=new WeakMap,Ko=new WeakMap,dh=new WeakMap,et=new WeakMap,Qo=new WeakMap,jt=new WeakSet,Gw=function(){return a(this,Dn).size!==0?a(this,Dn).values():a(this,et).getEditors(this.pageIndex)},uT=function(t){a(this,et).unselectAll();const{target:e}=t;if(e===a(this,Fe).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,Fe).div.contains(e)){const{isMac:n}=je.platform;if(t.button!==0||t.ctrlKey&&n)return;a(this,et).showAllEditors("highlight",!0,!0),a(this,Fe).div.classList.add("free"),this.toggleDrawing(),Ym.startHighlighting(this,a(this,et).direction==="ltr",{target:a(this,Fe).div,x:t.x,y:t.y}),a(this,Fe).div.addEventListener("pointerup",()=>{a(this,Fe).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,et)._signal}),t.preventDefault()}},ms=function(){return a(zi,Qo).get(a(this,et).getMode())},Ww=function(t){const e=a(this,jt,ms);return e?new e.prototype.constructor(t):null},Xw=function(){const{x:t,y:e,width:n,height:s}=this.boundingClientRect,r=Math.max(0,t),o=Math.max(0,e),l=Math.min(window.innerWidth,t+n),c=Math.min(window.innerHeight,e+s),u=(r+l)/2-t,h=(o+c)/2-e,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},fm=function(){for(const t of a(this,Dn).values())t.isEmpty()&&t.remove()},O(zi,"_initialized",!1),A(zi,Qo,new Map([Cw,Fw,$w,Ym,Hw].map(t=>[t._editorType,t])));let Km=zi;var Zi,yn,Vl,Mp,my,hT,Xs,Yw,dT,qw;const Ee=class Ee{constructor({pageIndex:t}){A(this,Xs);A(this,Zi,null);A(this,yn,new Map);A(this,Vl,new Map);this.pageIndex=t}setParent(t){if(!a(this,Zi)){m(this,Zi,t);return}if(a(this,Zi)!==t){if(a(this,yn).size>0)for(const e of a(this,yn).values())e.remove(),t.append(e);m(this,Zi,t)}}static get _svgFactory(){return dt(this,"_svgFactory",new Qd)}draw(t,e=!1,n=!1){const s=xe(Ee,Mp)._++,r=S(this,Xs,Yw).call(this),o=Ee._svgFactory.createElement("defs");r.append(o);const l=Ee._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),e&&a(this,Vl).set(s,l);const u=n?S(this,Xs,dT).call(this,o,c):null,h=Ee._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(r,t),a(this,yn).set(s,r),{id:s,clipPathId:`url(#${u})`}}drawOutline(t,e){const n=xe(Ee,Mp)._++,s=S(this,Xs,Yw).call(this),r=Ee._svgFactory.createElement("defs");s.append(r);const o=Ee._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const d=Ee._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${n}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=Ee._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Ee._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${l}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=Ee._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${l}`),c&&u.setAttribute("mask",`url(#${c})`);const h=u.cloneNode();return s.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,t),a(this,yn).set(n,s),n}finalizeDraw(t,e){a(this,Vl).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:n,bbox:s,rootClass:r,path:o}=e,l=typeof t=="number"?a(this,yn).get(t):t;if(l){if(n&&S(this,Xs,qw).call(this,l,n),s&&S(c=Ee,my,hT).call(c,l,s),r){const{classList:u}=l;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(o){const h=l.firstChild.firstChild;S(this,Xs,qw).call(this,h,o)}}}updateParent(t,e){if(e===this)return;const n=a(this,yn).get(t);n&&(a(e,Zi).append(n),a(this,yn).delete(t),a(e,yn).set(t,n))}remove(t){a(this,Vl).delete(t),a(this,Zi)!==null&&(a(this,yn).get(t).remove(),a(this,yn).delete(t))}destroy(){m(this,Zi,null);for(const t of a(this,yn).values())t.remove();a(this,yn).clear(),a(this,Vl).clear()}};Zi=new WeakMap,yn=new WeakMap,Vl=new WeakMap,Mp=new WeakMap,my=new WeakSet,hT=function(t,[e,n,s,r]){const{style:o}=t;o.top=`${100*n}%`,o.left=`${100*e}%`,o.width=`${100*s}%`,o.height=`${100*r}%`},Xs=new WeakSet,Yw=function(){const t=Ee._svgFactory.create(1,1,!0);return a(this,Zi).append(t),t.setAttribute("aria-hidden",!0),t},dT=function(t,e){const n=Ee._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const r=Ee._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s},qw=function(t,e){for(const[n,s]of Object.entries(e))s===null?t.removeAttribute(n):t.setAttribute(n,s)},A(Ee,my),A(Ee,Mp,0);let Qm=Ee;globalThis._pdfjsTestingUtils={HighlightOutliner:kw};globalThis.pdfjsLib={AbortException:Gr,AnnotationEditorLayer:Km,AnnotationEditorParamsType:vt,AnnotationEditorType:at,AnnotationEditorUIManager:da,AnnotationLayer:hA,AnnotationMode:$s,AnnotationType:pe,applyOpacity:c_,build:fC,ColorPicker:Kd,createValidAbsoluteUrl:J1,CSSConstants:l_,DOMSVGFactory:Qd,DrawLayer:Qm,FeatureTest:je,fetchData:Ch,findContrastColor:u_,getDocument:aA,getFilenameFromUrl:r_,getPdfFilenameFromUrl:o_,getRGB:Th,getUuid:tA,getXfaPageViewport:a_,GlobalWorkerOptions:Li,ImageKind:xd,InvalidPDFException:zm,isDataScheme:Hp,isPdfFile:By,isValidExplicitDest:$_,MathClamp:ln,noContextMenu:di,normalizeUnicode:i_,OPS:Ah,OutputScale:ls,PasswordResponses:e_,PDFDataRangeTransport:lA,PDFDateString:Xd,PDFWorker:bh,PermissionFlag:t_,PixelsPerInch:Wr,RenderingCancelledException:Oy,renderRichText:iA,ResponseException:Gd,setLayerDimensions:ha,shadow:dt,SignatureExtractor:Vs,stopEvent:ie,SupportedImageMimeTypes:Um,TextLayer:qd,TouchManager:Yd,updateUrlHash:Z1,Util:q,VerbosityLevel:jp,version:dC,XfaLayer:nA};const u2=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Gr,AnnotationEditorLayer:Km,AnnotationEditorParamsType:vt,AnnotationEditorType:at,AnnotationEditorUIManager:da,AnnotationLayer:hA,AnnotationMode:$s,AnnotationType:pe,CSSConstants:l_,ColorPicker:Kd,DOMSVGFactory:Qd,DrawLayer:Qm,FeatureTest:je,GlobalWorkerOptions:Li,ImageKind:xd,InvalidPDFException:zm,MathClamp:ln,OPS:Ah,OutputScale:ls,PDFDataRangeTransport:lA,PDFDateString:Xd,PDFWorker:bh,PasswordResponses:e_,PermissionFlag:t_,PixelsPerInch:Wr,RenderingCancelledException:Oy,ResponseException:Gd,SignatureExtractor:Vs,SupportedImageMimeTypes:Um,TextLayer:qd,TouchManager:Yd,Util:q,VerbosityLevel:jp,XfaLayer:nA,applyOpacity:c_,build:fC,createValidAbsoluteUrl:J1,fetchData:Ch,findContrastColor:u_,getDocument:aA,getFilenameFromUrl:r_,getPdfFilenameFromUrl:o_,getRGB:Th,getUuid:tA,getXfaPageViewport:a_,isDataScheme:Hp,isPdfFile:By,isValidExplicitDest:$_,noContextMenu:di,normalizeUnicode:i_,renderRichText:iA,setLayerDimensions:ha,shadow:dt,stopEvent:ie,updateUrlHash:Z1,version:dC},Symbol.toStringTag,{value:"Module"}));function fT(i){var t,e,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var s=i.length;for(t=0;t<s;t++)i[t]&&(e=fT(i[t]))&&(n&&(n+=" "),n+=e)}else for(e in i)i[e]&&(n&&(n+=" "),n+=e);return n}function Uy(){for(var i,t,e=0,n="",s=arguments.length;e<s;e++)(i=arguments[e])&&(t=fT(i))&&(n&&(n+=" "),n+=t);return n}var bS=Object.prototype.hasOwnProperty;function SS(i,t,e){for(e of i.keys())if(jc(e,t))return e}function jc(i,t){var e,n,s;if(i===t)return!0;if(i&&t&&(e=i.constructor)===t.constructor){if(e===Date)return i.getTime()===t.getTime();if(e===RegExp)return i.toString()===t.toString();if(e===Array){if((n=i.length)===t.length)for(;n--&&jc(i[n],t[n]););return n===-1}if(e===Set){if(i.size!==t.size)return!1;for(n of i)if(s=n,s&&typeof s=="object"&&(s=SS(t,s),!s)||!t.has(s))return!1;return!0}if(e===Map){if(i.size!==t.size)return!1;for(n of i)if(s=n[0],s&&typeof s=="object"&&(s=SS(t,s),!s)||!jc(n[1],t.get(s)))return!1;return!0}if(e===ArrayBuffer)i=new Uint8Array(i),t=new Uint8Array(t);else if(e===DataView){if((n=i.byteLength)===t.byteLength)for(;n--&&i.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(i)){if((n=i.byteLength)===t.byteLength)for(;n--&&i[n]===t[n];);return n===-1}if(!e||typeof i=="object"){n=0;for(e in i)if(bS.call(i,e)&&++n&&!bS.call(t,e)||!(e in t)||!jc(i[e],t[e]))return!1;return Object.keys(t).length===n}}return i!==i&&t!==t}function Wp(i){let t=!1;return{promise:new Promise((n,s)=>{i.then(r=>!t&&n(r)).catch(r=>!t&&s(r))}),cancel(){t=!0}}}const h2=["onCopy","onCut","onPaste"],d2=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],f2=["onFocus","onBlur"],p2=["onInput","onInvalid","onReset","onSubmit"],g2=["onLoad","onError"],m2=["onKeyDown","onKeyPress","onKeyUp"],y2=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],v2=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],w2=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],A2=["onSelect"],b2=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],S2=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],x2=["onScroll"],E2=["onWheel"],_2=["onAnimationStart","onAnimationEnd","onAnimationIteration"],C2=["onTransitionEnd"],T2=["onToggle"],k2=["onChange"],P2=[...h2,...d2,...f2,...p2,...g2,...m2,...y2,...v2,...w2,...A2,...b2,...S2,...x2,...E2,..._2,...C2,...k2,...T2];function pT(i,t){const e={};for(const n of P2){const s=i[n];s&&(t?e[n]=r=>s(r,t(n)):e[n]=s)}return e}var L2="Invariant failed";function Bt(i,t){if(!i)throw new Error(L2)}var R2=function(){},M2=R2;const un=RS(M2),gT=F.createContext(null),D2="noopener noreferrer nofollow";class N2{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Bt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Bt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||D2,t.target=n?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{Bt(this.pdfDocument),Bt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Bt(Array.isArray(e));const n=e[0];new Promise(s=>{Bt(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(r=>{s(r)}).catch(()=>{Bt(!1)}):typeof n=="number"?s(n):Bt(!1)}).then(s=>{const r=s+1;Bt(this.pdfViewer),Bt(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:s,pageNumber:r})})})}goToPage(t){const e=t-1;Bt(this.pdfViewer),Bt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function zc({children:i,type:t}){return R.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:i})}const xS={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function I2(i,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function Sh(){return F.useReducer(I2,{value:void 0,error:void 0})}const Hy=typeof window<"u",mT=Hy&&window.location.protocol==="file:";function F2(i){return typeof i<"u"}function Aa(i){return F2(i)&&i!==null}function O2(i){return typeof i=="string"}function B2(i){return i instanceof ArrayBuffer}function j2(i){return Bt(Hy),i instanceof Blob}function Kw(i){return O2(i)&&/^data:/.test(i)}function ES(i){Bt(Kw(i));const[t="",e=""]=i.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function z2(){return Hy&&window.devicePixelRatio||1}const yT="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function _S(){un(!mT,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${yT}`)}function U2(){un(!mT,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${yT}`)}function tc(i){i!=null&&i.cancel&&i.cancel()}function Qw(i,t){return Object.defineProperty(i,"width",{get(){return this.getViewport({scale:t}).width},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.getViewport({scale:t}).height},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),i}function vT(i){return i.name==="AbortException"||i.name==="RenderingCancelledException"}function H2(i){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=s=>{if(!s.target)return e(new Error("Error while reading a file."));const{error:r}=s.target;if(!r)return e(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(i)})}const{PDFDataRangeTransport:$2}=u2,V2=(i,t)=>{switch(t){case xS.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");i(e);break}case xS.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");i(e);break}}};function CS(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const G2=F.forwardRef(function({children:t,className:e,error:n="Failed to load PDF file.",externalLinkRel:s,externalLinkTarget:r,file:o,inputRef:l,imageResourcesPath:c,loading:u="Loading PDF",noData:h="No PDF file specified.",onItemClick:d,onLoadError:f,onLoadProgress:p,onLoadSuccess:y,onPassword:w=V2,onSourceError:x,onSourceSuccess:g,options:v,renderMode:b,rotate:E,scale:_,...C},T){const[k,P]=Sh(),{value:L,error:M}=k,[I,$]=Sh(),{value:N,error:W}=I,j=F.useRef(new N2),U=F.useRef([]),D=F.useRef(void 0),H=F.useRef(void 0);o&&o!==D.current&&CS(o)&&(un(!jc(o,D.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),D.current=o),v&&v!==H.current&&(un(!jc(v,H.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),H.current=v);const B=F.useRef({scrollPageIntoView:it=>{const{dest:ot,pageNumber:mt,pageIndex:Wt=mt-1}=it;if(d){d({dest:ot,pageIndex:Wt,pageNumber:mt});return}const Lt=U.current[Wt];if(Lt){Lt.scrollIntoView();return}un(!1,`An internal link leading to page ${mt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});F.useImperativeHandle(T,()=>({linkService:j,pages:U,viewer:B}),[]);function Z(){g&&g()}function G(){M&&(un(!1,M.toString()),x&&x(M))}function tt(){P({type:"RESET"})}F.useEffect(tt,[o,P]);const ct=F.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return Kw(o)?{data:ES(o)}:(_S(),{url:o});if(o instanceof $2)return{range:o};if(B2(o))return{data:o};if(Hy&&j2(o))return{data:await H2(o)};if(Bt(typeof o=="object"),Bt(CS(o)),"url"in o&&typeof o.url=="string"){if(Kw(o.url)){const{url:it,...ot}=o;return{data:ES(it),...ot}}_S()}return o},[o]);F.useEffect(()=>{const it=Wp(ct());return it.promise.then(ot=>{P({type:"RESOLVE",value:ot})}).catch(ot=>{P({type:"REJECT",error:ot})}),()=>{tc(it)}},[ct,P]),F.useEffect(()=>{if(!(typeof L>"u")){if(L===!1){G();return}Z()}},[L]);function Pt(){N&&(y&&y(N),U.current=new Array(N.numPages),j.current.setDocument(N))}function _t(){W&&(un(!1,W.toString()),f&&f(W))}F.useEffect(function(){$({type:"RESET"})},[$,L]),F.useEffect(function(){if(!L)return;const ot=v?{...L,...v}:L,mt=aA(ot);p&&(mt.onProgress=p),w&&(mt.onPassword=w);const Wt=mt;return Wt.promise.then(Lt=>{Wt.destroyed||$({type:"RESOLVE",value:Lt})}).catch(Lt=>{Wt.destroyed||$({type:"REJECT",error:Lt})}),()=>{Wt.destroy()}},[v,$,L]),F.useEffect(()=>{if(!(typeof N>"u")){if(N===!1){_t();return}Pt()}},[N]),F.useEffect(function(){j.current.setViewer(B.current),j.current.setExternalLinkRel(s),j.current.setExternalLinkTarget(r)},[s,r]);const rt=F.useCallback((it,ot)=>{U.current[it]=ot},[]),Gt=F.useCallback(it=>{delete U.current[it]},[]),Se=F.useMemo(()=>({imageResourcesPath:c,linkService:j.current,onItemClick:d,pdf:N,registerPage:rt,renderMode:b,rotate:E,scale:_,unregisterPage:Gt}),[c,d,N,rt,b,E,_,Gt]),Ut=F.useMemo(()=>pT(C,()=>N),[C,N]);function nt(){function it(mt){return!!(mt!=null&&mt.pdf)}if(!it(Se))throw new Error("pdf is undefined");const ot=typeof t=="function"?t(Se):t;return R.jsx(gT.Provider,{value:Se,children:ot})}function K(){return o?N==null?R.jsx(zc,{type:"loading",children:typeof u=="function"?u():u}):N===!1?R.jsx(zc,{type:"error",children:typeof n=="function"?n():n}):nt():R.jsx(zc,{type:"no-data",children:typeof h=="function"?h():h})}return R.jsx("div",{className:Uy("react-pdf__Document",e),ref:l,...Ut,children:K()})});function wT(){return F.useContext(gT)}function AT(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=i.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(r){for(var o=0,l=e;o<l.length;o++){var c=l[o];typeof c=="function"?c(r):c&&(c.current=r)}}}const bT=F.createContext(null);function $y(){return F.useContext(bT)}function W2(){const i=wT(),t=$y();Bt(t);const e={...i,...t},{filterAnnotations:n,imageResourcesPath:s,linkService:r,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:u,page:h,pdf:d,renderForms:f,rotate:p,scale:y=1}=e;Bt(d),Bt(h),Bt(r);const[w,x]=Sh(),{value:g,error:v}=w,b=F.useRef(null);un(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function E(){g&&l&&l(g)}function _(){v&&(un(!1,v.toString()),o&&o(v))}F.useEffect(function(){x({type:"RESET"})},[x,h]),F.useEffect(function(){if(!h)return;const L=Wp(h.getAnnotations()),M=L;return L.promise.then(I=>{x({type:"RESOLVE",value:I})}).catch(I=>{x({type:"REJECT",error:I})}),()=>{tc(M)}},[x,h]),F.useEffect(()=>{if(g!==void 0){if(g===!1){_();return}E()}},[g]);function C(){u&&u()}function T(P){un(!1,`${P}`),c&&c(P)}const k=F.useMemo(()=>h.getViewport({scale:y,rotation:p}),[h,p,y]);return F.useEffect(function(){if(!d||!h||!r||!g)return;const{current:L}=b;if(!L)return;const M=k.clone({dontFlip:!0}),I={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:d.annotationStorage,commentManager:null,div:L,l10n:null,linkService:r,page:h,structTreeLayer:null,viewport:M},$={annotations:n?n({annotations:g}):g,annotationStorage:d.annotationStorage,div:L,imageResourcesPath:s,linkService:r,page:h,renderForms:f,viewport:M};L.innerHTML="";try{new hA(I).render($),C()}catch(N){T(N)}return()=>{}},[g,n,s,r,h,d,f,k]),R.jsx("div",{className:Uy("react-pdf__Page__annotations","annotationLayer"),ref:b})}const ST={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},X2=/^H(\d+)$/;function Y2(i){return i in ST}function Vy(i){return"children"in i}function xT(i){return Vy(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function q2(i){const t={};if(Vy(i)){const{role:e}=i,n=e.match(X2);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(Y2(e)){const s=ST[e];s&&(t.role=s)}}return t}function ET(i){const t={};if(Vy(i)){if(i.alt!==void 0&&(t["aria-label"]=i.alt),i.lang!==void 0&&(t.lang=i.lang),xT(i)){const[e]=i.children;if(e){const n=ET(e);return{...t,...n}}}}else"id"in i&&(t["aria-owns"]=i.id);return t}function K2(i){return i?{...q2(i),...ET(i)}:null}function _T({className:i,node:t}){const e=F.useMemo(()=>K2(t),[t]),n=F.useMemo(()=>!Vy(t)||xT(t)?null:t.children.map((s,r)=>R.jsx(_T,{node:s},r)),[t]);return R.jsx("span",{className:i,...e,children:n})}function Q2(){const i=$y();Bt(i);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=i,[n,s]=Sh(),{value:r,error:o}=n,{customTextRenderer:l,page:c}=i;function u(){r&&e&&e(r)}function h(){o&&(un(!1,o.toString()),t&&t(o))}return F.useEffect(function(){s({type:"RESET"})},[s,c]),F.useEffect(function(){if(l||!c)return;const f=Wp(c.getStructTree()),p=f;return f.promise.then(y=>{s({type:"RESOLVE",value:y})}).catch(y=>{s({type:"REJECT",error:y})}),()=>tc(p)},[l,c,s]),F.useEffect(()=>{if(r!==void 0){if(r===!1){h();return}u()}},[r]),r?R.jsx(_T,{className:"react-pdf__Page__structTree structTree",node:r}):null}const TS=$s;function J2(i){const t=$y();Bt(t);const e={...t,...i},{_className:n,canvasBackground:s,devicePixelRatio:r=z2(),onRenderError:o,onRenderSuccess:l,page:c,renderForms:u,renderTextLayer:h,rotate:d,scale:f}=e,{canvasRef:p}=i;Bt(c);const y=F.useRef(null);function w(){c&&l&&l(Qw(c,f))}function x(E){vT(E)||(un(!1,E.toString()),o&&o(E))}const g=F.useMemo(()=>c.getViewport({scale:f*r,rotation:d}),[r,c,d,f]),v=F.useMemo(()=>c.getViewport({scale:f,rotation:d}),[c,d,f]);F.useEffect(function(){if(!c)return;c.cleanup();const{current:_}=y;if(!_)return;_.width=g.width,_.height=g.height,_.style.width=`${Math.floor(v.width)}px`,_.style.height=`${Math.floor(v.height)}px`,_.style.visibility="hidden";const C={annotationMode:u?TS.ENABLE_FORMS:TS.ENABLE,canvas:_,canvasContext:_.getContext("2d",{alpha:!1}),viewport:g};s&&(C.background=s);const T=c.render(C),k=T;return T.promise.then(()=>{_.style.visibility="",w()}).catch(x),()=>tc(k)},[s,c,u,g,v]);const b=F.useCallback(()=>{const{current:E}=y;E&&(E.width=0,E.height=0)},[]);return F.useEffect(()=>b,[b]),R.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:AT(p,y),style:{display:"block",userSelect:"none"},children:h?R.jsx(Q2,{}):null})}function Z2(i){return"str"in i}function tD(){const i=$y();Bt(i);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:s,onRenderTextLayerSuccess:r,page:o,pageIndex:l,pageNumber:c,rotate:u,scale:h}=i;Bt(o);const[d,f]=Sh(),{value:p,error:y}=d,w=F.useRef(null);un(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function x(){p&&n&&n(p)}function g(){y&&(un(!1,y.toString()),e&&e(y))}F.useEffect(function(){f({type:"RESET"})},[o,f]),F.useEffect(function(){if(!o)return;const k=Wp(o.getTextContent()),P=k;return k.promise.then(L=>{f({type:"RESOLVE",value:L})}).catch(L=>{f({type:"REJECT",error:L})}),()=>tc(P)},[o,f]),F.useEffect(()=>{if(p!==void 0){if(p===!1){g();return}x()}},[p]);const v=F.useCallback(()=>{r&&r()},[r]),b=F.useCallback(T=>{vT(T)||(un(!1,T.toString()),s&&s(T))},[s]);function E(){const T=w.current;T&&T.classList.add("selecting")}function _(){const T=w.current;T&&T.classList.remove("selecting")}const C=F.useMemo(()=>o.getViewport({scale:h,rotation:u}),[o,u,h]);return F.useLayoutEffect(function(){if(!o||!p)return;const{current:k}=w;if(!k)return;k.innerHTML="";const P=o.streamTextContent({includeMarkedContent:!0}),L={container:k,textContentSource:P,viewport:C},M=new qd(L),I=M;return M.render().then(()=>{const $=document.createElement("div");$.className="endOfContent",k.append($);const N=k.querySelectorAll('[role="presentation"]');if(t){let W=0;p.items.forEach((j,U)=>{if(!Z2(j))return;const D=N[W];if(!D)return;const H=t({pageIndex:l,pageNumber:c,itemIndex:U,...j});D.innerHTML=H,W+=j.str&&j.hasEOL?2:1})}v()}).catch(b),()=>tc(I)},[t,b,v,o,l,c,p,C]),R.jsx("div",{className:Uy("react-pdf__Page__textContent","textLayer"),onMouseUp:_,onMouseDown:E,ref:w})}const kS=1;function eD(i){const e={...wT(),...i},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:r,canvasRef:o,children:l,className:c,customRenderer:u,customTextRenderer:h,devicePixelRatio:d,error:f="Failed to load the page.",filterAnnotations:p,height:y,inputRef:w,loading:x="Loading page",noData:g="No page specified.",onGetAnnotationsError:v,onGetAnnotationsSuccess:b,onGetStructTreeError:E,onGetStructTreeSuccess:_,onGetTextError:C,onGetTextSuccess:T,onLoadError:k,onLoadSuccess:P,onRenderAnnotationLayerError:L,onRenderAnnotationLayerSuccess:M,onRenderError:I,onRenderSuccess:$,onRenderTextLayerError:N,onRenderTextLayerSuccess:W,pageIndex:j,pageNumber:U,pdf:D,registerPage:H,renderAnnotationLayer:B=!0,renderForms:Z=!1,renderMode:G="canvas",renderTextLayer:tt=!0,rotate:ct,scale:Pt=kS,unregisterPage:_t,width:rt,...Gt}=e,[Se,Ut]=Sh(),{value:nt,error:K}=Se,it=F.useRef(null);Bt(D);const ot=Aa(U)?U-1:j??null,mt=U??(Aa(j)?j+1:null),Wt=ct??(nt?nt.rotate:null),Lt=F.useMemo(()=>{if(!nt)return null;let hs=1;const ds=Pt??kS;if(rt||y){const dn=nt.getViewport({scale:1,rotation:Wt});rt?hs=rt/dn.width:y&&(hs=y/dn.height)}return ds*hs},[y,nt,Wt,Pt,rt]);F.useEffect(function(){return()=>{Aa(ot)&&s&&_t&&_t(ot)}},[s,D,ot,_t]);function Ys(){if(P){if(!nt||!Lt)return;P(Qw(nt,Lt))}if(s&&H){if(!Aa(ot)||!it.current)return;H(ot,it.current)}}function us(){K&&(un(!1,K.toString()),k&&k(K))}F.useEffect(function(){Ut({type:"RESET"})},[Ut,D,ot]),F.useEffect(function(){if(!D||!mt)return;const ds=Wp(D.getPage(mt)),dn=ds;return ds.promise.then(wa=>{Ut({type:"RESOLVE",value:wa})}).catch(wa=>{Ut({type:"REJECT",error:wa})}),()=>tc(dn)},[Ut,D,mt]),F.useEffect(()=>{if(nt!==void 0){if(nt===!1){us();return}Ys()}},[nt,Lt]);const Oi=F.useMemo(()=>Aa(ot)&&mt&&Aa(Wt)&&Aa(Lt)?{_className:n,canvasBackground:r,customTextRenderer:h,devicePixelRatio:d,filterAnnotations:p,onGetAnnotationsError:v,onGetAnnotationsSuccess:b,onGetStructTreeError:E,onGetStructTreeSuccess:_,onGetTextError:C,onGetTextSuccess:T,onRenderAnnotationLayerError:L,onRenderAnnotationLayerSuccess:M,onRenderError:I,onRenderSuccess:$,onRenderTextLayerError:N,onRenderTextLayerSuccess:W,page:nt,pageIndex:ot,pageNumber:mt,renderForms:Z,renderTextLayer:tt,rotate:Wt,scale:Lt}:null,[n,r,h,d,p,v,b,E,_,C,T,L,M,I,$,N,W,nt,ot,mt,Z,tt,Wt,Lt]),va=F.useMemo(()=>pT(Gt,()=>nt&&(Lt?Qw(nt,Lt):void 0)),[Gt,nt,Lt]),Kr=`${ot}@${Lt}/${Wt}`;function kh(){switch(G){case"custom":return Bt(u),R.jsx(u,{},`${Kr}_custom`);case"none":return null;case"canvas":default:return R.jsx(J2,{canvasRef:o},`${Kr}_canvas`)}}function Xp(){return tt?R.jsx(tD,{},`${Kr}_text`):null}function Yp(){return B?R.jsx(W2,{},`${Kr}_annotations`):null}function Gy(){function hs(dn){return!!(dn!=null&&dn.page)}if(!hs(Oi))throw new Error("page is undefined");const ds=typeof l=="function"?l(Oi):l;return R.jsxs(bT.Provider,{value:Oi,children:[kh(),Xp(),Yp(),ds]})}function qp(){return mt?D===null||nt===void 0||nt===null?R.jsx(zc,{type:"loading",children:typeof x=="function"?x():x}):D===!1||nt===!1?R.jsx(zc,{type:"error",children:typeof f=="function"?f():f}):Gy():R.jsx(zc,{type:"no-data",children:typeof g=="function"?g():g})}return R.jsx("div",{className:Uy(n,c),"data-page-number":mt,ref:AT(w,it),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Lt}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...va,children:qp()})}U2();Li.workerSrc="pdf.worker.mjs";const nD="/NurArdiansah/assets/pdf.worker.min-qwK7q_zL.mjs";Li.workerSrc=nD;const iD=()=>{F.useState(0);const i=[fR,gR,pR,Xb,Xb,mR,yR,vR],[t,e]=K1({loop:!0},[Q1({delay:2500})]),n=F.useCallback(()=>e&&e.scrollPrev(),[e]),s=F.useCallback(()=>e&&e.scrollNext(),[e]),[r,o]=F.useState(300);return F.useEffect(()=>{const l=()=>{o(window.innerWidth>=768?500:300)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),R.jsxs("div",{children:[R.jsx("section",{id:"home-section",className:"bg-white mt-16 lg:mt-1 xl:mt1",children:R.jsx("div",{className:"max-w-7xl px-6 pb-5 mx-auto",children:R.jsxs("main",{className:"relative z-20 w-full mt-8 md:flex md:items-center xl:mt-12",children:[R.jsx("div",{className:"absolute w-full bg-gray-800 -z-10 md:h-96 rounded-2xl"}),R.jsxs("div",{className:"w-full p-6 bg-gray-800 md:flex md:items-center rounded-2xl md:bg-transparent md:p-0 lg:px-12 md:justify-evenly",children:[R.jsx("img",{className:"h-24 w-24 md:mx-6 rounded-full object-cover shadow-md md:h-[32rem] md:w-80 lg:h-[30rem] lg:w-[25rem] md:rounded-2xl",src:PL,alt:"Client smiling and looking at the camera"}),R.jsxs("div",{className:"md:mx-6",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-2xl lg:text-3xl pb-1 font-medium tracking-tight text-white",children:"Nur Ardiansah"}),R.jsx("p",{className:"text-blue-200 text-xl font-semibold",children:"Educational Laboratory Analyst"})]}),R.jsx("p",{className:"mt-4 text-sm leading-relaxed text-white md:text-md",children:"Profesional sistem industri dan manajemen logistik/ rantai pasok dengan penempatan di Laboratorium Logistik Migas. Menguasai aktivitas SCM oil & gas. Mampu memetakan SCM BBM end-to-end, serta SCM natural gas. Mengaplikasikan statistika industri untuk analisis demand, lead time, reliabilitas suplai, dan KPI layanan; serta riset operasi dan pemodelan sistem untuk optimasi alokasi suplai, kapasitas, rute, dan penjadwalan distribusi. Mengelola logistik material migas (suku cadang/ MRO) melalui perencanaan kebutuhan, pengadaan, pergudangan, pengendalian persediaan, dan distribusi ke titik operasi. Memperkuat ketahanan rantai pasok melalui enterprise risk management dan kajian risiko BBM petrodieselbiodiesel."}),R.jsxs("div",{className:"button block lg:flex pt-4",children:[R.jsx("div",{className:"button1",children:R.jsx("button",{className:"px-6 py-3 lg:w-40 mt-3 w-full font-normal rounded-full bg-white hover:bg-slate-200 text-black bg-gradient-to-br from-sky-800 via-cyan-700 to-white-200",children:R.jsx("a",{href:"#portofolio-section",className:"no-underline text-white",children:"Portfolio"})})}),R.jsxs("div",{class:" btn-4 font-normal w-full lg:w-40 lg:ml-5","data-tooltip":"Size: 747Kb",children:[R.jsxs("div",{class:"button-wrapper",children:[R.jsx("div",{class:"text",children:"Download CV"}),R.jsx("span",{class:"icon",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"img",width:"2em",height:"2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",children:R.jsx("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15V3m0 12l-4-4m4 4l4-4M2 17l.621 2.485A2 2 0 0 0 4.561 21h14.878a2 2 0 0 0 1.94-1.515L22 17"})})})]}),R.jsx("a",{href:kL,download:"CV Nur Ardiansah.pdf",className:"download-link",children:" "})]})]})]})]})]})})}),R.jsxs("section",{id:"about-section",className:"bg-gradient-to-r from-gray-950 via-gray-900 to-gray-800 px-5 py-10 md:p-10 lg:p-16 lg:mt-10 mt-0 text-white",children:[R.jsxs("div",{className:"text-center pb-5 mb-5",children:[R.jsxs("h1",{className:"text-2xl md:text-3xl font-semibold tracking-wide",children:["Who is"," ",R.jsx("span",{className:"text-blue-800 font-extrabold",children:"Nur Ardiansah??"})]}),R.jsx("p",{className:"mt-3 text-sm md:text-base",children:"I am currently working at the Polytechnic of Energy and Minerals (PEM Akamigas) as an Educator Laboratory Analyst starting 27 February 2024."})]}),R.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[R.jsx("div",{className:"w-full space-y-4",children:[{label:"NIP",value:"19861007 200604 1 001"},{label:"Tempat/Tanggal Lahir",value:"Bojonegoro / 7 Oktober 1986"},{label:"Jabatan",value:"Analis Laboratorium Pendidikan/27 Feb 2024"},{label:"Pangkat/Golongan",value:"Penata Muda Tingkat I / IIIb"},{label:"Nama Instansi",value:"Politeknik Energi dan Mineral (PEM Akamigas)"},{label:"Nama Laboratorium",value:"Laboratorium Logistik Minyak dan Gas"}].map((l,c)=>R.jsxs("div",{className:"flex items-center rounded-md p-4 bg-gradient-to-r from-gray-950 via-gray-900 to-gray-800 transition-all duration-300 hover:from-gray-900 hover:via-blue-800 hover:to-blue-400 hover:text-lg",children:[R.jsx("p",{className:"hidden sm:block transition-all duration-300 text-sm md:text-base",children:l.label}),R.jsx("p",{className:"text-sm md:text-base text-center sm:ms-0 lg:text-end lg:ms-auto  sm:text-left w-full sm:w-auto",children:l.strike?R.jsx("span",{className:"line-through",children:l.value}):l.value})]},c))}),R.jsx("div",{className:"flex justify-center items-center w-full",children:R.jsx("video",{className:"object-cover w-full max-w-sm md:max-w-md lg:max-w-xl h-auto lg:h-[412px] rounded-md",src:xR,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})})]})]}),R.jsx("section",{id:"education-section",className:"relative pb-10 pt-12",children:R.jsxs("div",{className:"container px-6 pb-10 mx-auto",children:[R.jsx("h1",{className:"text-2xl font-bold text-center text- capitalize lg:text-3xl text-gray-900",children:"Education"}),R.jsx("div",{className:"grid grid-cols-1 gap-5 mt-3 xl:mt-8 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3",children:ER.map((l,c)=>R.jsxs("div",{className:"bg-slate-100 flex flex-col items-center p-8 transition-colors duration-300 transform border cursor-pointer rounded-lg shadow-md hover:border-transparent group hover:bg-gray-600 ",children:[R.jsx("img",{className:"object-cover w-auto h-32",src:l.image,alt:l.name}),R.jsx("h1",{className:"mt-4 text-2xl font-semibold text-gray-700 capitalize group-hover:text-white",children:l.name}),R.jsx("a",{href:l.url,className:"hover:underline mt-2 text-gray-500 capitalize group-hover:text-gray-300 text-center",children:l.desc}),R.jsx("a",{href:l.url,className:"hover:underline mt-2 text-gray-500 capitalize group-hover:text-gray-300 text-center",children:l.tahun})]},c))})]})}),R.jsxs("section",{id:"sertif-section",className:"pt-10 bg-white text-dark",children:[R.jsx("h1",{className:"text-2xl font-bold text-center capitalize lg:text-3xl",children:"CERTIFICATE"}),R.jsx("p",{className:"mt-3 mx-2 lg:mx-0 text-center text-gray-500",children:"Multiple certificates of competitions and bootcamps in Development Resources Oil Man and Gas"}),R.jsx("div",{className:"flex justify-center pb-5 pt-5 lg:pb-10 lg:pt-5",children:R.jsxs("div",{className:"w-full max-w-2xl h-auto rounded-lg overflow-hidden relative",children:[R.jsx("div",{className:"overflow-hidden",ref:t,children:R.jsx("div",{className:"flex",children:i.map((l,c)=>R.jsx("div",{className:"flex-[0_0_100%] flex justify-center items-center",children:R.jsx(G2,{file:l,children:R.jsx(eD,{pageNumber:1,width:r,renderTextLayer:!1,renderAnnotationLayer:!1})})},c))})}),R.jsx("button",{onClick:n,className:"absolute left-5 top-1/2 transform -translate-y-1/2 p-2 rounded-full shadow-none text-black hover:scale-125 transition-all",children:""}),R.jsx("button",{onClick:s,className:"absolute right-5 top-1/2 transform -translate-y-1/2 p-2 rounded-full shadow-none text-black hover:scale-125 transition-all",children:""})]})})]}),R.jsx("section",{id:"portofolio-section",className:"bg-white",children:R.jsxs("div",{className:"container px-4 sm:px-6 py-8 sm:py-10 mx-auto",children:[R.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center text-gray-950 capitalize lg:text-3xl",children:"Portofolio dan Penugasan"}),R.jsx("p",{className:"mt-3 sm:mt-4 text-center text-gray-500 text-sm sm:text-base px-2",children:"Several achievements and Special Assignments in the field of Lectures and Academics specializing in Petroleum and Natural Gas"}),R.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:gap-8 mt-6 sm:mt-8 xl:mt-12 xl:gap-12 md:grid-cols-2 xl:grid-cols-2",children:[R.jsx("div",{className:"overflow-hidden bg-cover bg-center bg-no-repeat rounded-lg cursor-pointer h-64 sm:h-80 md:h-96 group",style:{backgroundImage:`url(${wR})`,backgroundPosition:"center"},children:R.jsxs("div",{className:"flex flex-col justify-center w-full h-full px-4 sm:px-8 py-4 transition-opacity duration-700 opacity-0 backdrop-blur-sm bg-gray-800/60 group-hover:opacity-100",children:[R.jsx("h2",{className:"mt-2 sm:mt-4 text-lg sm:text-xl font-semibold text-white capitalize",children:"Pengelola Perkuliahan dan Akademik"}),R.jsx("p",{className:"mb-2 sm:mb-3 text-white text-sm sm:text-base capitalize",children:"Periode Jabatan : 2019  2024 (Januari)"}),R.jsx("a",{href:"https://akamigas.ac.id/",className:"text-blue-400 text-sm sm:text-base hover:underline",children:"Politeknik Energi dan Mineral (PEM Akamigas)"})]})}),R.jsx("div",{className:"overflow-hidden bg-cover bg-center bg-no-repeat rounded-lg cursor-pointer h-64 sm:h-80 md:h-96 group",style:{backgroundImage:`url(${AR})`,backgroundPosition:"center"},children:R.jsxs("div",{className:"flex flex-col justify-center w-full h-full px-4 sm:px-8 py-4 transition-opacity duration-700 opacity-0 backdrop-blur-sm bg-gray-800/60 group-hover:opacity-100",children:[R.jsx("h2",{className:"mt-2 sm:mt-4 text-lg sm:text-xl font-semibold text-white capitalize",children:"Analis Laboratorium Pendidikan"}),R.jsx("p",{className:"mb-2 sm:mb-3 text-white text-sm sm:text-base capitalize",children:"Periode Jabatan : 2024 - sekarang"}),R.jsx("a",{href:"https://akamigas.ac.id/",className:"text-blue-400 text-sm sm:text-base hover:underline",children:"Politeknik Energi dan Mineral (PEM Akamigas)"})]})}),R.jsx("div",{className:"overflow-hidden bg-cover bg-center bg-no-repeat rounded-lg cursor-pointer h-64 sm:h-80 md:h-96 group",style:{backgroundImage:`url(${bR})`,backgroundPosition:"center"},children:R.jsxs("div",{className:"flex flex-col justify-center w-full h-full px-4 sm:px-8 py-4 transition-opacity duration-700 opacity-0 backdrop-blur-sm bg-gray-800/60 group-hover:opacity-100",children:[R.jsx("h2",{className:"mt-2 sm:mt-4 text-lg sm:text-xl font-semibold text-white capitalize",children:"Petugas Pengambilan Contoh Minyak Bumi dan Gas Bumi di PT Pertamina EP Cepu"}),R.jsx("p",{className:"mb-2 sm:mb-3 text-white text-sm sm:text-base capitalize",children:"Periode Jabatan : 2024-09-01 - 2024-12-31"}),R.jsx("a",{href:"https://akamigas.ac.id/",className:"text-blue-400 text-sm sm:text-base hover:underline",children:"Politeknik Energi dan Mineral (PEM Akamigas)"})]})}),R.jsx("div",{className:"overflow-hidden bg-cover bg-center bg-no-repeat rounded-lg cursor-pointer h-64 sm:h-80 md:h-96 group",style:{backgroundImage:`url(${SR})`,backgroundPosition:"center"},children:R.jsxs("div",{className:"flex flex-col justify-center w-full h-full px-4 sm:px-8 py-4 transition-opacity duration-700 opacity-0 backdrop-blur-sm bg-gray-800/60 group-hover:opacity-100",children:[R.jsx("h2",{className:"mt-2 sm:mt-4 text-lg sm:text-xl font-semibold text-white capitalize",children:"Kelompok Kerja Pengembangan Karir"}),R.jsx("p",{className:"mb-2 sm:mb-3 text-white text-sm sm:text-base capitalize",children:"Periode Jabatan : 2024-09-01 - 2024-12-31"}),R.jsx("a",{href:"https://akamigas.ac.id/",className:"text-blue-400 text-sm sm:text-base hover:underline",children:"Politeknik Energi dan Mineral (PEM Akamigas)"})]})})]})]})})]})},sD=()=>{const i=({icon:t,label:e,href:n})=>R.jsxs("a",{href:n,className:"flex flex-col items-center text-gray-950 hover:text-blue-600",children:[R.jsx("i",{className:`bi ${t} text-lg`}),R.jsx("p",{className:"text-xs",children:e})]});return R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"lg:hidden fixed top-0 left-0 w-full bg-gradient-to-r from-gray-500 via-gray-200 to-gray-500 shadow-md z-50 rounded-b-2xl",children:R.jsx("div",{className:"flex items-center justify-center py-3",children:R.jsx("h1",{className:"text-md font-semibold text-gray-950 ",children:"Nur Ardiansah Profile"})})}),R.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 w-full  shadow-lg bg-gradient-to-r from-gray-500 via-gray-300 to-gray-500 z-50 rounded-t-xl",children:R.jsxs("div",{className:"flex items-center justify-around py-2",children:[R.jsx(i,{icon:"bi-houses",label:"Home",href:"#"}),R.jsx(i,{icon:"bi-person",label:"About",href:"#about-section"}),R.jsx(i,{icon:"bi-mortarboard",label:"Education",href:"#education-section"}),R.jsx(i,{icon:"bi-patch-check",label:"Sertif",href:"#sertif-section"}),R.jsx(i,{icon:"bi-file-earmark-person",label:"Porto",href:"#portofolio-section"})]})}),R.jsx("div",{className:"hidden lg:block bg-white shadow sticky top-0 z-50",children:R.jsx("div",{className:"container px-16 py-4 mx-auto",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx("a",{href:"#home-section",className:"mx-auto font-extrabold text-lg",children:R.jsx("h1",{className:"text-gray-900",children:"Nur Ardiansah"})}),R.jsxs("div",{className:"flex items-center space-x-6",children:[R.jsx("a",{href:"#home-section",className:"text-gray-700 capitalize hover:text-blue-600",children:"Home"}),R.jsx("a",{href:"#about-section",className:"text-gray-700 capitalize hover:text-blue-600",children:"About"}),R.jsx("a",{href:"#education-section",className:"text-gray-700 capitalize hover:text-blue-600",children:"Education"}),R.jsx("a",{href:"#sertif-section",className:"text-gray-700 capitalize hover:text-blue-600",children:"Certificate"}),R.jsx("a",{href:"#portofolio-section",className:"text-gray-700 capitalize hover:text-blue-600",children:"Portfolio"})]})]})})})]})},rD=()=>R.jsx("div",{children:R.jsx("footer",{className:"bg-gray-900 pb-16 lg:pb-0",children:R.jsxs("div",{className:"container px-6 py-8 mx-auto",children:[R.jsx("div",{className:"flex flex-col items-center text-center",children:R.jsxs("div",{className:"flex flex-wrap justify-center mt-1 -mx-4",children:[R.jsxs("a",{href:"#home-section",className:"mx-4 text-sm text-gray-100 transition-colors duration-300 hover:text-blue-500","aria-label":"Reddit",children:[" ","Home"," "]}),R.jsxs("a",{href:"#about-section",className:"mx-4 text-sm text-gray-100 transition-colors duration-300 hover:text-blue-500 ","aria-label":"Reddit",children:[" ","About"," "]}),R.jsxs("a",{href:"#education-section",className:"mx-4 text-sm text-gray-100 transition-colors duration-300 hover:text-blue-500 ","aria-label":"Reddit",children:[" ","Education"," "]}),R.jsxs("a",{href:"#sertif-section",className:"mx-4 text-sm text-gray-100 transition-colors duration-300 hover:text-blue-500","aria-label":"Reddit",children:[" ","Sertificate"," "]}),R.jsxs("a",{href:"#portofolio-section",className:"mx-4 text-sm text-gray-100 transition-colors duration-300 hover:text-blue-500","aria-label":"Reddit",children:[" ","Portofolio"," "]})]})}),R.jsx("hr",{className:"my-6 border-gray-200 md:my-4 "}),R.jsxs("div",{className:"flex flex-col items-center sm:flex-row sm:justify-between",children:[R.jsx("a",{href:"https://indrapratama.biz.id/",className:"text-sm text-gray-100",children:" Copyright 2024. Created by indrapratama.biz.id"}),R.jsxs("div",{className:"flex -mx-2 mt-4",children:[R.jsx("a",{href:"mailto:nurardiansah@gmail.com",className:"mx-2","aria-label":"Instagram",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6 text-blue-500",children:R.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})})}),R.jsx("a",{href:"mailto:nur.ardiansah@esdm.go.id",className:"mx-2","aria-label":"Github",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6 text-blue-500",children:R.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})})}),R.jsx("a",{href:"https://wa.me/6281315784453",className:"mx-2","aria-label":"WA",children:R.jsx("svg",{class:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})})]})]})]})})}),oD=()=>R.jsx(SL,{children:R.jsxs("div",{className:"bg-white",children:[R.jsx(sD,{}),R.jsx(iD,{}),R.jsx(rD,{})]})});VE(document.getElementById("root")).render(R.jsx(F.StrictMode,{children:R.jsx(oD,{})}));
